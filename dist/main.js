!function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=11)}([function(e,t,r){"use strict";(function(e){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
var n=r(1),i=r(8),o=r(9);function s(){return a.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function u(e,t){if(s()<t)throw new RangeError("Invalid typed array length");return a.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=a.prototype:(null===e&&(e=new a(t)),e.length=t),e}function a(e,t,r){if(!(a.TYPED_ARRAY_SUPPORT||this instanceof a))return new a(e,t,r);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return l(this,e)}return f(this,e,t,r)}function f(e,t,r,n){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,r,n){if(t.byteLength,r<0||t.byteLength<r)throw new RangeError("'offset' is out of bounds");if(t.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");t=void 0===r&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,r):new Uint8Array(t,r,n);a.TYPED_ARRAY_SUPPORT?(e=t).__proto__=a.prototype:e=h(e,t);return e}(e,t,r,n):"string"==typeof t?function(e,t,r){"string"==typeof r&&""!==r||(r="utf8");if(!a.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=0|_(t,r),i=(e=u(e,n)).write(t,r);i!==n&&(e=e.slice(0,i));return e}(e,t,r):function(e,t){if(a.isBuffer(t)){var r=0|p(t.length);return 0===(e=u(e,r)).length?e:(t.copy(e,0,0,r),e)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||function(e){return e!=e}(t.length)?u(e,0):h(e,t);if("Buffer"===t.type&&o(t.data))return h(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function c(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function l(e,t){if(c(t),e=u(e,t<0?0:0|p(t)),!a.TYPED_ARRAY_SUPPORT)for(var r=0;r<t;++r)e[r]=0;return e}function h(e,t){var r=t.length<0?0:0|p(t.length);e=u(e,r);for(var n=0;n<r;n+=1)e[n]=255&t[n];return e}function p(e){if(e>=s())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s().toString(16)+" bytes");return 0|e}function _(e,t){if(a.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var r=e.length;if(0===r)return 0;for(var n=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return F(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return k(e).length;default:if(n)return F(e).length;t=(""+t).toLowerCase(),n=!0}}function d(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function y(e,t,r,n,i){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(i)return-1;r=e.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof t&&(t=a.from(t,n)),a.isBuffer(t))return 0===t.length?-1:g(e,t,r,n,i);if("number"==typeof t)return t&=255,a.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):g(e,[t],r,n,i);throw new TypeError("val must be string, number or Buffer")}function g(e,t,r,n,i){var o,s=1,u=e.length,a=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;s=2,u/=2,a/=2,r/=2}function f(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(i){var c=-1;for(o=r;o<u;o++)if(f(e,o)===f(t,-1===c?0:o-c)){if(-1===c&&(c=o),o-c+1===a)return c*s}else-1!==c&&(o-=o-c),c=-1}else for(r+a>u&&(r=u-a),o=r;o>=0;o--){for(var l=!0,h=0;h<a;h++)if(f(e,o+h)!==f(t,h)){l=!1;break}if(l)return o}return-1}function b(e,t,r,n){r=Number(r)||0;var i=e.length-r;n?(n=Number(n))>i&&(n=i):n=i;var o=t.length;if(o%2!=0)throw new TypeError("Invalid hex string");n>o/2&&(n=o/2);for(var s=0;s<n;++s){var u=parseInt(t.substr(2*s,2),16);if(isNaN(u))return s;e[r+s]=u}return s}function N(e,t,r,n){return z(F(t,e.length-r),e,r,n)}function B(e,t,r,n){return z(function(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function O(e,t,r,n){return B(e,t,r,n)}function m(e,t,r,n){return z(k(t),e,r,n)}function E(e,t,r,n){return z(function(e,t){for(var r,n,i,o=[],s=0;s<e.length&&!((t-=2)<0);++s)r=e.charCodeAt(s),n=r>>8,i=r%256,o.push(i),o.push(n);return o}(t,e.length-r),e,r,n)}function S(e,t,r){return 0===t&&r===e.length?n.fromByteArray(e):n.fromByteArray(e.slice(t,r))}function A(e,t,r){r=Math.min(e.length,r);for(var n=[],i=t;i<r;){var o,s,u,a,f=e[i],c=null,l=f>239?4:f>223?3:f>191?2:1;if(i+l<=r)switch(l){case 1:f<128&&(c=f);break;case 2:128==(192&(o=e[i+1]))&&(a=(31&f)<<6|63&o)>127&&(c=a);break;case 3:o=e[i+1],s=e[i+2],128==(192&o)&&128==(192&s)&&(a=(15&f)<<12|(63&o)<<6|63&s)>2047&&(a<55296||a>57343)&&(c=a);break;case 4:o=e[i+1],s=e[i+2],u=e[i+3],128==(192&o)&&128==(192&s)&&128==(192&u)&&(a=(15&f)<<18|(63&o)<<12|(63&s)<<6|63&u)>65535&&a<1114112&&(c=a)}null===c?(c=65533,l=1):c>65535&&(c-=65536,n.push(c>>>10&1023|55296),c=56320|1023&c),n.push(c),i+=l}return function(e){var t=e.length;if(t<=w)return String.fromCharCode.apply(String,e);var r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=w));return r}(n)}t.Buffer=a,t.SlowBuffer=function(e){+e!=e&&(e=0);return a.alloc(+e)},t.INSPECT_MAX_BYTES=50,a.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=s(),a.poolSize=8192,a._augment=function(e){return e.__proto__=a.prototype,e},a.from=function(e,t,r){return f(null,e,t,r)},a.TYPED_ARRAY_SUPPORT&&(a.prototype.__proto__=Uint8Array.prototype,a.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&a[Symbol.species]===a&&Object.defineProperty(a,Symbol.species,{value:null,configurable:!0})),a.alloc=function(e,t,r){return function(e,t,r,n){return c(t),t<=0?u(e,t):void 0!==r?"string"==typeof n?u(e,t).fill(r,n):u(e,t).fill(r):u(e,t)}(null,e,t,r)},a.allocUnsafe=function(e){return l(null,e)},a.allocUnsafeSlow=function(e){return l(null,e)},a.isBuffer=function(e){return!(null==e||!e._isBuffer)},a.compare=function(e,t){if(!a.isBuffer(e)||!a.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var r=e.length,n=t.length,i=0,o=Math.min(r,n);i<o;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0},a.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(e,t){if(!o(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return a.alloc(0);var r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var n=a.allocUnsafe(t),i=0;for(r=0;r<e.length;++r){var s=e[r];if(!a.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(n,i),i+=s.length}return n},a.byteLength=_,a.prototype._isBuffer=!0,a.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)d(this,t,t+1);return this},a.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)d(this,t,t+3),d(this,t+1,t+2);return this},a.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)d(this,t,t+7),d(this,t+1,t+6),d(this,t+2,t+5),d(this,t+3,t+4);return this},a.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?A(this,0,e):function(e,t,r){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return I(this,t,r);case"utf8":case"utf-8":return A(this,t,r);case"ascii":return v(this,t,r);case"latin1":case"binary":return T(this,t,r);case"base64":return S(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return D(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}.apply(this,arguments)},a.prototype.equals=function(e){if(!a.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===a.compare(this,e)},a.prototype.inspect=function(){var e="",r=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(e+=" ... ")),"<Buffer "+e+">"},a.prototype.compare=function(e,t,r,n,i){if(!a.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),t<0||r>e.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&t>=r)return 0;if(n>=i)return-1;if(t>=r)return 1;if(t>>>=0,r>>>=0,n>>>=0,i>>>=0,this===e)return 0;for(var o=i-n,s=r-t,u=Math.min(o,s),f=this.slice(n,i),c=e.slice(t,r),l=0;l<u;++l)if(f[l]!==c[l]){o=f[l],s=c[l];break}return o<s?-1:s<o?1:0},a.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},a.prototype.indexOf=function(e,t,r){return y(this,e,t,r,!0)},a.prototype.lastIndexOf=function(e,t,r){return y(this,e,t,r,!1)},a.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-t;if((void 0===r||r>i)&&(r=i),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return b(this,e,t,r);case"utf8":case"utf-8":return N(this,e,t,r);case"ascii":return B(this,e,t,r);case"latin1":case"binary":return O(this,e,t,r);case"base64":return m(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,e,t,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var w=4096;function v(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(127&e[i]);return n}function T(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}function I(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var i="",o=t;o<r;++o)i+=C(e[o]);return i}function D(e,t,r){for(var n=e.slice(t,r),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function R(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function L(e,t,r,n,i,o){if(!a.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function $(e,t,r,n){t<0&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-r,2);i<o;++i)e[r+i]=(t&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function M(e,t,r,n){t<0&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-r,4);i<o;++i)e[r+i]=t>>>8*(n?i:3-i)&255}function P(e,t,r,n,i,o){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function x(e,t,r,n,o){return o||P(e,0,r,4),i.write(e,t,r,n,23,4),r+4}function U(e,t,r,n,o){return o||P(e,0,r,8),i.write(e,t,r,n,52,8),r+8}a.prototype.slice=function(e,t){var r,n=this.length;if(e=~~e,t=void 0===t?n:~~t,e<0?(e+=n)<0&&(e=0):e>n&&(e=n),t<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e),a.TYPED_ARRAY_SUPPORT)(r=this.subarray(e,t)).__proto__=a.prototype;else{var i=t-e;r=new a(i,void 0);for(var o=0;o<i;++o)r[o]=this[o+e]}return r},a.prototype.readUIntLE=function(e,t,r){e|=0,t|=0,r||R(e,t,this.length);for(var n=this[e],i=1,o=0;++o<t&&(i*=256);)n+=this[e+o]*i;return n},a.prototype.readUIntBE=function(e,t,r){e|=0,t|=0,r||R(e,t,this.length);for(var n=this[e+--t],i=1;t>0&&(i*=256);)n+=this[e+--t]*i;return n},a.prototype.readUInt8=function(e,t){return t||R(e,1,this.length),this[e]},a.prototype.readUInt16LE=function(e,t){return t||R(e,2,this.length),this[e]|this[e+1]<<8},a.prototype.readUInt16BE=function(e,t){return t||R(e,2,this.length),this[e]<<8|this[e+1]},a.prototype.readUInt32LE=function(e,t){return t||R(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},a.prototype.readUInt32BE=function(e,t){return t||R(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},a.prototype.readIntLE=function(e,t,r){e|=0,t|=0,r||R(e,t,this.length);for(var n=this[e],i=1,o=0;++o<t&&(i*=256);)n+=this[e+o]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*t)),n},a.prototype.readIntBE=function(e,t,r){e|=0,t|=0,r||R(e,t,this.length);for(var n=t,i=1,o=this[e+--n];n>0&&(i*=256);)o+=this[e+--n]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*t)),o},a.prototype.readInt8=function(e,t){return t||R(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},a.prototype.readInt16LE=function(e,t){t||R(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},a.prototype.readInt16BE=function(e,t){t||R(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},a.prototype.readInt32LE=function(e,t){return t||R(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},a.prototype.readInt32BE=function(e,t){return t||R(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},a.prototype.readFloatLE=function(e,t){return t||R(e,4,this.length),i.read(this,e,!0,23,4)},a.prototype.readFloatBE=function(e,t){return t||R(e,4,this.length),i.read(this,e,!1,23,4)},a.prototype.readDoubleLE=function(e,t){return t||R(e,8,this.length),i.read(this,e,!0,52,8)},a.prototype.readDoubleBE=function(e,t){return t||R(e,8,this.length),i.read(this,e,!1,52,8)},a.prototype.writeUIntLE=function(e,t,r,n){(e=+e,t|=0,r|=0,n)||L(this,e,t,r,Math.pow(2,8*r)-1,0);var i=1,o=0;for(this[t]=255&e;++o<r&&(i*=256);)this[t+o]=e/i&255;return t+r},a.prototype.writeUIntBE=function(e,t,r,n){(e=+e,t|=0,r|=0,n)||L(this,e,t,r,Math.pow(2,8*r)-1,0);var i=r-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+r},a.prototype.writeUInt8=function(e,t,r){return e=+e,t|=0,r||L(this,e,t,1,255,0),a.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},a.prototype.writeUInt16LE=function(e,t,r){return e=+e,t|=0,r||L(this,e,t,2,65535,0),a.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):$(this,e,t,!0),t+2},a.prototype.writeUInt16BE=function(e,t,r){return e=+e,t|=0,r||L(this,e,t,2,65535,0),a.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):$(this,e,t,!1),t+2},a.prototype.writeUInt32LE=function(e,t,r){return e=+e,t|=0,r||L(this,e,t,4,4294967295,0),a.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):M(this,e,t,!0),t+4},a.prototype.writeUInt32BE=function(e,t,r){return e=+e,t|=0,r||L(this,e,t,4,4294967295,0),a.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):M(this,e,t,!1),t+4},a.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t|=0,!n){var i=Math.pow(2,8*r-1);L(this,e,t,r,i-1,-i)}var o=0,s=1,u=0;for(this[t]=255&e;++o<r&&(s*=256);)e<0&&0===u&&0!==this[t+o-1]&&(u=1),this[t+o]=(e/s>>0)-u&255;return t+r},a.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t|=0,!n){var i=Math.pow(2,8*r-1);L(this,e,t,r,i-1,-i)}var o=r-1,s=1,u=0;for(this[t+o]=255&e;--o>=0&&(s*=256);)e<0&&0===u&&0!==this[t+o+1]&&(u=1),this[t+o]=(e/s>>0)-u&255;return t+r},a.prototype.writeInt8=function(e,t,r){return e=+e,t|=0,r||L(this,e,t,1,127,-128),a.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},a.prototype.writeInt16LE=function(e,t,r){return e=+e,t|=0,r||L(this,e,t,2,32767,-32768),a.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):$(this,e,t,!0),t+2},a.prototype.writeInt16BE=function(e,t,r){return e=+e,t|=0,r||L(this,e,t,2,32767,-32768),a.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):$(this,e,t,!1),t+2},a.prototype.writeInt32LE=function(e,t,r){return e=+e,t|=0,r||L(this,e,t,4,2147483647,-2147483648),a.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):M(this,e,t,!0),t+4},a.prototype.writeInt32BE=function(e,t,r){return e=+e,t|=0,r||L(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),a.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):M(this,e,t,!1),t+4},a.prototype.writeFloatLE=function(e,t,r){return x(this,e,t,!0,r)},a.prototype.writeFloatBE=function(e,t,r){return x(this,e,t,!1,r)},a.prototype.writeDoubleLE=function(e,t,r){return U(this,e,t,!0,r)},a.prototype.writeDoubleBE=function(e,t,r){return U(this,e,t,!1,r)},a.prototype.copy=function(e,t,r,n){if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var i,o=n-r;if(this===e&&r<t&&t<n)for(i=o-1;i>=0;--i)e[i+t]=this[i+r];else if(o<1e3||!a.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)e[i+t]=this[i+r];else Uint8Array.prototype.set.call(e,this.subarray(r,r+o),t);return o},a.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!a.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;var o;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(o=t;o<r;++o)this[o]=e;else{var s=a.isBuffer(e)?e:F(new a(e,n).toString()),u=s.length;for(o=0;o<r-t;++o)this[o+t]=s[o%u]}return this};var j=/[^+\/0-9A-Za-z-_]/g;function C(e){return e<16?"0"+e.toString(16):e.toString(16)}function F(e,t){var r;t=t||1/0;for(var n=e.length,i=null,o=[],s=0;s<n;++s){if((r=e.charCodeAt(s))>55295&&r<57344){if(!i){if(r>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(s+1===n){(t-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;o.push(r)}else if(r<2048){if((t-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function k(e){return n.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(j,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function z(e,t,r,n){for(var i=0;i<n&&!(i+r>=t.length||i>=e.length);++i)t[i+r]=e[i];return i}}).call(this,r(3))},function(e,t,r){"use strict";t.byteLength=function(e){var t=f(e),r=t[0],n=t[1];return 3*(r+n)/4-n},t.toByteArray=function(e){for(var t,r=f(e),n=r[0],s=r[1],u=new o(function(e,t,r){return 3*(t+r)/4-r}(0,n,s)),a=0,c=s>0?n-4:n,l=0;l<c;l+=4)t=i[e.charCodeAt(l)]<<18|i[e.charCodeAt(l+1)]<<12|i[e.charCodeAt(l+2)]<<6|i[e.charCodeAt(l+3)],u[a++]=t>>16&255,u[a++]=t>>8&255,u[a++]=255&t;2===s&&(t=i[e.charCodeAt(l)]<<2|i[e.charCodeAt(l+1)]>>4,u[a++]=255&t);1===s&&(t=i[e.charCodeAt(l)]<<10|i[e.charCodeAt(l+1)]<<4|i[e.charCodeAt(l+2)]>>2,u[a++]=t>>8&255,u[a++]=255&t);return u},t.fromByteArray=function(e){for(var t,r=e.length,i=r%3,o=[],s=0,u=r-i;s<u;s+=16383)o.push(l(e,s,s+16383>u?u:s+16383));1===i?(t=e[r-1],o.push(n[t>>2]+n[t<<4&63]+"==")):2===i&&(t=(e[r-2]<<8)+e[r-1],o.push(n[t>>10]+n[t>>4&63]+n[t<<2&63]+"="));return o.join("")};for(var n=[],i=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",u=0,a=s.length;u<a;++u)n[u]=s[u],i[s.charCodeAt(u)]=u;function f(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function c(e){return n[e>>18&63]+n[e>>12&63]+n[e>>6&63]+n[63&e]}function l(e,t,r){for(var n,i=[],o=t;o<r;o+=3)n=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(255&e[o+2]),i.push(c(n));return i.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},function(module,__webpack_exports__,__webpack_require__){"use strict";(function(global,process){var buffer__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),buffer__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(buffer__WEBPACK_IMPORTED_MODULE_0__),commonjsGlobal="undefined"!=typeof window?window:void 0!==global?global:"undefined"!=typeof self?self:{};function createCommonjsModule(e,t){return e(t={exports:{}},t.exports),t.exports}var map=createCommonjsModule(function(e){buffer__WEBPACK_IMPORTED_MODULE_0___default.a.Buffer;if(void 0!==commonjsGlobal.Map)e.exports=commonjsGlobal.Map,e.exports.Map=commonjsGlobal.Map;else{var t=function(e){this._keys=[],this._values={};for(var t=0;t<e.length;t++)if(null!=e[t]){var r=e[t],n=r[0],i=r[1];this._keys.push(n),this._values[n]={v:i,i:this._keys.length-1}}};t.prototype.clear=function(){this._keys=[],this._values={}},t.prototype.delete=function(e){var t=this._values[e];return null!=t&&(delete this._values[e],this._keys.splice(t.i,1),!0)},t.prototype.entries=function(){var e=this,t=0;return{next:function(){var r=e._keys[t++];return{value:void 0!==r?[r,e._values[r].v]:void 0,done:void 0===r}}}},t.prototype.forEach=function(e,t){t=t||this;for(var r=0;r<this._keys.length;r++){var n=this._keys[r];e.call(t,this._values[n].v,n,t)}},t.prototype.get=function(e){return this._values[e]?this._values[e].v:void 0},t.prototype.has=function(e){return null!=this._values[e]},t.prototype.keys=function(){var e=this,t=0;return{next:function(){var r=e._keys[t++];return{value:void 0!==r?r:void 0,done:void 0===r}}}},t.prototype.set=function(e,t){return this._values[e]?(this._values[e].v=t,this):(this._keys.push(e),this._values[e]={v:t,i:this._keys.length-1},this)},t.prototype.values=function(){var e=this,t=0;return{next:function(){var r=e._keys[t++];return{value:void 0!==r?e._values[r].v:void 0,done:void 0===r}}}},Object.defineProperty(t.prototype,"size",{enumerable:!0,get:function(){return this._keys.length}}),e.exports=t,e.exports.Map=t}}),map_1=map.Map;function Long(e,t){if(!(this instanceof Long))return new Long(e,t);this._bsontype="Long",this.low_=0|e,this.high_=0|t}Long.prototype.toInt=function(){return this.low_},Long.prototype.toNumber=function(){return this.high_*Long.TWO_PWR_32_DBL_+this.getLowBitsUnsigned()},Long.prototype.toJSON=function(){return this.toString()},Long.prototype.toString=function(e){var t=e||10;if(t<2||36<t)throw Error("radix out of range: "+t);if(this.isZero())return"0";if(this.isNegative()){if(this.equals(Long.MIN_VALUE)){var r=Long.fromNumber(t),n=this.div(r),i=n.multiply(r).subtract(this);return n.toString(t)+i.toInt().toString(t)}return"-"+this.negate().toString(t)}var o=Long.fromNumber(Math.pow(t,6));i=this;for(var s="";!i.isZero();){var u=i.div(o),a=i.subtract(u.multiply(o)).toInt().toString(t);if((i=u).isZero())return a+s;for(;a.length<6;)a="0"+a;s=""+a+s}},Long.prototype.getHighBits=function(){return this.high_},Long.prototype.getLowBits=function(){return this.low_},Long.prototype.getLowBitsUnsigned=function(){return this.low_>=0?this.low_:Long.TWO_PWR_32_DBL_+this.low_},Long.prototype.getNumBitsAbs=function(){if(this.isNegative())return this.equals(Long.MIN_VALUE)?64:this.negate().getNumBitsAbs();for(var e=0!==this.high_?this.high_:this.low_,t=31;t>0&&0==(e&1<<t);t--);return 0!==this.high_?t+33:t+1},Long.prototype.isZero=function(){return 0===this.high_&&0===this.low_},Long.prototype.isNegative=function(){return this.high_<0},Long.prototype.isOdd=function(){return 1==(1&this.low_)},Long.prototype.equals=function(e){return this.high_===e.high_&&this.low_===e.low_},Long.prototype.notEquals=function(e){return this.high_!==e.high_||this.low_!==e.low_},Long.prototype.lessThan=function(e){return this.compare(e)<0},Long.prototype.lessThanOrEqual=function(e){return this.compare(e)<=0},Long.prototype.greaterThan=function(e){return this.compare(e)>0},Long.prototype.greaterThanOrEqual=function(e){return this.compare(e)>=0},Long.prototype.compare=function(e){if(this.equals(e))return 0;var t=this.isNegative(),r=e.isNegative();return t&&!r?-1:!t&&r?1:this.subtract(e).isNegative()?-1:1},Long.prototype.negate=function(){return this.equals(Long.MIN_VALUE)?Long.MIN_VALUE:this.not().add(Long.ONE)},Long.prototype.add=function(e){var t=this.high_>>>16,r=65535&this.high_,n=this.low_>>>16,i=65535&this.low_,o=e.high_>>>16,s=65535&e.high_,u=e.low_>>>16,a=0,f=0,c=0,l=0;return c+=(l+=i+(65535&e.low_))>>>16,l&=65535,f+=(c+=n+u)>>>16,c&=65535,a+=(f+=r+s)>>>16,f&=65535,a+=t+o,a&=65535,Long.fromBits(c<<16|l,a<<16|f)},Long.prototype.subtract=function(e){return this.add(e.negate())},Long.prototype.multiply=function(e){if(this.isZero())return Long.ZERO;if(e.isZero())return Long.ZERO;if(this.equals(Long.MIN_VALUE))return e.isOdd()?Long.MIN_VALUE:Long.ZERO;if(e.equals(Long.MIN_VALUE))return this.isOdd()?Long.MIN_VALUE:Long.ZERO;if(this.isNegative())return e.isNegative()?this.negate().multiply(e.negate()):this.negate().multiply(e).negate();if(e.isNegative())return this.multiply(e.negate()).negate();if(this.lessThan(Long.TWO_PWR_24_)&&e.lessThan(Long.TWO_PWR_24_))return Long.fromNumber(this.toNumber()*e.toNumber());var t=this.high_>>>16,r=65535&this.high_,n=this.low_>>>16,i=65535&this.low_,o=e.high_>>>16,s=65535&e.high_,u=e.low_>>>16,a=65535&e.low_,f=0,c=0,l=0,h=0;return l+=(h+=i*a)>>>16,h&=65535,c+=(l+=n*a)>>>16,l&=65535,c+=(l+=i*u)>>>16,l&=65535,f+=(c+=r*a)>>>16,c&=65535,f+=(c+=n*u)>>>16,c&=65535,f+=(c+=i*s)>>>16,c&=65535,f+=t*a+r*u+n*s+i*o,f&=65535,Long.fromBits(l<<16|h,f<<16|c)},Long.prototype.div=function(e){if(e.isZero())throw Error("division by zero");if(this.isZero())return Long.ZERO;if(this.equals(Long.MIN_VALUE)){if(e.equals(Long.ONE)||e.equals(Long.NEG_ONE))return Long.MIN_VALUE;if(e.equals(Long.MIN_VALUE))return Long.ONE;var t=this.shiftRight(1).div(e).shiftLeft(1);if(t.equals(Long.ZERO))return e.isNegative()?Long.ONE:Long.NEG_ONE;var r=this.subtract(e.multiply(t));return t.add(r.div(e))}if(e.equals(Long.MIN_VALUE))return Long.ZERO;if(this.isNegative())return e.isNegative()?this.negate().div(e.negate()):this.negate().div(e).negate();if(e.isNegative())return this.div(e.negate()).negate();var n=Long.ZERO;for(r=this;r.greaterThanOrEqual(e);){t=Math.max(1,Math.floor(r.toNumber()/e.toNumber()));for(var i=Math.ceil(Math.log(t)/Math.LN2),o=i<=48?1:Math.pow(2,i-48),s=Long.fromNumber(t),u=s.multiply(e);u.isNegative()||u.greaterThan(r);)t-=o,u=(s=Long.fromNumber(t)).multiply(e);s.isZero()&&(s=Long.ONE),n=n.add(s),r=r.subtract(u)}return n},Long.prototype.modulo=function(e){return this.subtract(this.div(e).multiply(e))},Long.prototype.not=function(){return Long.fromBits(~this.low_,~this.high_)},Long.prototype.and=function(e){return Long.fromBits(this.low_&e.low_,this.high_&e.high_)},Long.prototype.or=function(e){return Long.fromBits(this.low_|e.low_,this.high_|e.high_)},Long.prototype.xor=function(e){return Long.fromBits(this.low_^e.low_,this.high_^e.high_)},Long.prototype.shiftLeft=function(e){if(0===(e&=63))return this;var t=this.low_;if(e<32){var r=this.high_;return Long.fromBits(t<<e,r<<e|t>>>32-e)}return Long.fromBits(0,t<<e-32)},Long.prototype.shiftRight=function(e){if(0===(e&=63))return this;var t=this.high_;if(e<32){var r=this.low_;return Long.fromBits(r>>>e|t<<32-e,t>>e)}return Long.fromBits(t>>e-32,t>=0?0:-1)},Long.prototype.shiftRightUnsigned=function(e){if(0===(e&=63))return this;var t=this.high_;if(e<32){var r=this.low_;return Long.fromBits(r>>>e|t<<32-e,t>>>e)}return 32===e?Long.fromBits(t,0):Long.fromBits(t>>>e-32,0)},Long.fromInt=function(e){if(-128<=e&&e<128){var t=Long.INT_CACHE_[e];if(t)return t}var r=new Long(0|e,e<0?-1:0);return-128<=e&&e<128&&(Long.INT_CACHE_[e]=r),r},Long.fromNumber=function(e){return isNaN(e)||!isFinite(e)?Long.ZERO:e<=-Long.TWO_PWR_63_DBL_?Long.MIN_VALUE:e+1>=Long.TWO_PWR_63_DBL_?Long.MAX_VALUE:e<0?Long.fromNumber(-e).negate():new Long(e%Long.TWO_PWR_32_DBL_|0,e/Long.TWO_PWR_32_DBL_|0)},Long.fromBits=function(e,t){return new Long(e,t)},Long.fromString=function(e,t){if(0===e.length)throw Error("number format error: empty string");var r=t||10;if(r<2||36<r)throw Error("radix out of range: "+r);if("-"===e.charAt(0))return Long.fromString(e.substring(1),r).negate();if(e.indexOf("-")>=0)throw Error('number format error: interior "-" character: '+e);for(var n=Long.fromNumber(Math.pow(r,8)),i=Long.ZERO,o=0;o<e.length;o+=8){var s=Math.min(8,e.length-o),u=parseInt(e.substring(o,o+s),r);if(s<8){var a=Long.fromNumber(Math.pow(r,s));i=i.multiply(a).add(Long.fromNumber(u))}else i=(i=i.multiply(n)).add(Long.fromNumber(u))}return i},Long.INT_CACHE_={},Long.TWO_PWR_16_DBL_=65536,Long.TWO_PWR_24_DBL_=1<<24,Long.TWO_PWR_32_DBL_=Long.TWO_PWR_16_DBL_*Long.TWO_PWR_16_DBL_,Long.TWO_PWR_31_DBL_=Long.TWO_PWR_32_DBL_/2,Long.TWO_PWR_48_DBL_=Long.TWO_PWR_32_DBL_*Long.TWO_PWR_16_DBL_,Long.TWO_PWR_64_DBL_=Long.TWO_PWR_32_DBL_*Long.TWO_PWR_32_DBL_,Long.TWO_PWR_63_DBL_=Long.TWO_PWR_64_DBL_/2,Long.ZERO=Long.fromInt(0),Long.ONE=Long.fromInt(1),Long.NEG_ONE=Long.fromInt(-1),Long.MAX_VALUE=Long.fromBits(-1,2147483647),Long.MIN_VALUE=Long.fromBits(0,-2147483648),Long.TWO_PWR_24_=Long.fromInt(1<<24);var long_1=Long,Long_1=Long;function Double(e){if(!(this instanceof Double))return new Double(e);this._bsontype="Double",this.value=e}long_1.Long=Long_1,Double.prototype.valueOf=function(){return this.value},Double.prototype.toJSON=function(){return this.value};var double_1=Double,Double_1=Double;function Timestamp(e,t){e instanceof long_1?long_1.call(this,e.low_,e.high_):long_1.call(this,e,t),this._bsontype="Timestamp"}double_1.Double=Double_1,Timestamp.prototype=Object.create(long_1.prototype),Timestamp.prototype.constructor=Timestamp,Timestamp.prototype.toJSON=function(){return{$timestamp:this.toString()}},Timestamp.fromInt=function(e){return new Timestamp(long_1.fromInt(e))},Timestamp.fromNumber=function(e){return new Timestamp(long_1.fromNumber(e))},Timestamp.fromBits=function(e,t){return new Timestamp(e,t)},Timestamp.fromString=function(e,t){return new Timestamp(long_1.fromString(e,t))};var timestamp=Timestamp,Timestamp_1=Timestamp,_endianness;function endianness(){if(void 0===_endianness){var e=new ArrayBuffer(2),t=new Uint8Array(e),r=new Uint16Array(e);if(t[0]=1,t[1]=2,258===r[0])_endianness="BE";else{if(513!==r[0])throw new Error("unable to figure out endianess");_endianness="LE"}}return _endianness}function hostname(){return void 0!==global.location?global.location.hostname:""}function loadavg(){return[]}function uptime(){return 0}function freemem(){return Number.MAX_VALUE}function totalmem(){return Number.MAX_VALUE}function cpus(){return[]}function type(){return"Browser"}function release(){return void 0!==global.navigator?global.navigator.appVersion:""}function networkInterfaces(){}function getNetworkInterfaces(){}function arch(){return"javascript"}function platform(){return"browser"}function tmpDir(){return"/tmp"}timestamp.Timestamp=Timestamp_1;var tmpdir=tmpDir,EOL="\n",os={EOL:EOL,tmpdir:tmpdir,tmpDir:tmpDir,networkInterfaces:networkInterfaces,getNetworkInterfaces:getNetworkInterfaces,release:release,type:type,cpus:cpus,totalmem:totalmem,freemem:freemem,uptime:uptime,loadavg:loadavg,hostname:hostname,endianness:endianness},os$1=Object.freeze({endianness:endianness,hostname:hostname,loadavg:loadavg,uptime:uptime,freemem:freemem,totalmem:totalmem,cpus:cpus,type:type,release:release,networkInterfaces:networkInterfaces,getNetworkInterfaces:getNetworkInterfaces,arch:arch,platform:platform,tmpDir:tmpDir,tmpdir:tmpdir,EOL:EOL,default:os}),Buffer=buffer__WEBPACK_IMPORTED_MODULE_0___default.a.Buffer,MASK_8=255,MASK_24=16777215,MASK_32=4294967295,FNV_PRIME=new long_1(16777619,0),OFFSET_BASIS=new long_1(2166136261,0),FNV_MASK=new long_1(MASK_32,0);function fnv1a32(e,t){t=t||"utf8";for(var r=Buffer.from(e,t),n=OFFSET_BASIS,i=0;i<r.length;i+=1)n=(n=(n=n.xor(new long_1(r[i],0))).multiply(FNV_PRIME)).and(FNV_MASK);return n.getLowBitsUnsigned()}function fnv1a24(e,t){var r=fnv1a32(e,t);return(r&MASK_24^r>>>24&MASK_8)&MASK_24}var fnv1a={fnv1a24:fnv1a24,fnv1a32:fnv1a32},require$$1=os$1&&os||os$1,Buffer$1=buffer__WEBPACK_IMPORTED_MODULE_0___default.a.Buffer,hostname$1=require$$1.hostname,fnv1a24$1=fnv1a.fnv1a24,MACHINE_ID=fnv1a24$1(hostname$1),checkForHexRegExp=new RegExp("^[0-9a-fA-F]{24}$"),hasBufferType=!1;try{Buffer$1&&Buffer$1.from&&(hasBufferType=!0)}catch(e){hasBufferType=!1}function ObjectID(e){if(e instanceof ObjectID)return e;if(!(this instanceof ObjectID))return new ObjectID(e);if(this._bsontype="ObjectID",null==e||"number"==typeof e)return this.id=this.generate(e),void(ObjectID.cacheHexString&&(this.__id=this.toString("hex")));var t=ObjectID.isValid(e);if(!t&&null!=e)throw new TypeError("Argument passed in must be a single String of 12 bytes or a string of 24 hex characters");if(t&&"string"==typeof e&&24===e.length&&hasBufferType)return new ObjectID(new Buffer$1(e,"hex"));if(t&&"string"==typeof e&&24===e.length)return ObjectID.createFromHexString(e);if(null==e||12!==e.length){if(null!=e&&e.toHexString)return e;throw new TypeError("Argument passed in must be a single String of 12 bytes or a string of 24 hex characters")}this.id=e,ObjectID.cacheHexString&&(this.__id=this.toString("hex"))}for(var hexTable=[],i=0;i<256;i++)hexTable[i]=(i<=15?"0":"")+i.toString(16);ObjectID.prototype.toHexString=function(){if(ObjectID.cacheHexString&&this.__id)return this.__id;var e="";if(!this.id||!this.id.length)throw new TypeError("invalid ObjectId, ObjectId.id must be either a string or a Buffer, but is ["+JSON.stringify(this.id)+"]");if(this.id instanceof _Buffer)return e=convertToHex(this.id),ObjectID.cacheHexString&&(this.__id=e),e;for(var t=0;t<this.id.length;t++)e+=hexTable[this.id.charCodeAt(t)];return ObjectID.cacheHexString&&(this.__id=e),e},ObjectID.prototype.get_inc=function(){return ObjectID.index=(ObjectID.index+1)%16777215},ObjectID.prototype.getInc=function(){return this.get_inc()},ObjectID.prototype.generate=function(e){"number"!=typeof e&&(e=~~(Date.now()/1e3));var t=(void 0===process||1===process.pid?Math.floor(1e5*Math.random()):process.pid)%65535,r=this.get_inc(),n=new Buffer$1(12);return n[3]=255&e,n[2]=e>>8&255,n[1]=e>>16&255,n[0]=e>>24&255,n[6]=255&MACHINE_ID,n[5]=MACHINE_ID>>8&255,n[4]=MACHINE_ID>>16&255,n[8]=255&t,n[7]=t>>8&255,n[11]=255&r,n[10]=r>>8&255,n[9]=r>>16&255,n},ObjectID.prototype.toString=function(e){return this.id&&this.id.copy?this.id.toString("string"==typeof e?e:"hex"):this.toHexString()},ObjectID.prototype.inspect=ObjectID.prototype.toString,ObjectID.prototype.toJSON=function(){return this.toHexString()},ObjectID.prototype.equals=function(e){return e instanceof ObjectID?this.toString()===e.toString():"string"==typeof e&&ObjectID.isValid(e)&&12===e.length&&this.id instanceof _Buffer?e===this.id.toString("binary"):"string"==typeof e&&ObjectID.isValid(e)&&24===e.length?e.toLowerCase()===this.toHexString():"string"==typeof e&&ObjectID.isValid(e)&&12===e.length?e===this.id:!(null==e||!(e instanceof ObjectID||e.toHexString))&&e.toHexString()===this.toHexString()},ObjectID.prototype.getTimestamp=function(){var e=new Date,t=this.id[3]|this.id[2]<<8|this.id[1]<<16|this.id[0]<<24;return e.setTime(1e3*Math.floor(t)),e},ObjectID.index=~~(16777215*Math.random()),ObjectID.createPk=function(){return new ObjectID},ObjectID.createFromTime=function(e){var t=new Buffer$1([0,0,0,0,0,0,0,0,0,0,0,0]);return t[3]=255&e,t[2]=e>>8&255,t[1]=e>>16&255,t[0]=e>>24&255,new ObjectID(t)};var decodeLookup=[];for(i=0;i<10;)decodeLookup[48+i]=i++;for(;i<16;)decodeLookup[55+i]=decodeLookup[87+i]=i++;var _Buffer=Buffer$1,convertToHex=function(e){return e.toString("hex")};ObjectID.createFromHexString=function(e){if(void 0===e||null!=e&&24!==e.length)throw new TypeError("Argument passed in must be a single String of 12 bytes or a string of 24 hex characters");if(hasBufferType)return new ObjectID(new Buffer$1(e,"hex"));for(var t=new _Buffer(12),r=0,n=0;n<24;)t[r++]=decodeLookup[e.charCodeAt(n++)]<<4|decodeLookup[e.charCodeAt(n++)];return new ObjectID(t)},ObjectID.isValid=function(e){return null!=e&&("number"==typeof e||("string"==typeof e?12===e.length||24===e.length&&checkForHexRegExp.test(e):e instanceof ObjectID||(e instanceof _Buffer||!!e.toHexString&&(12===e.id.length||24===e.id.length&&checkForHexRegExp.test(e.id)))))},Object.defineProperty(ObjectID.prototype,"generationTime",{enumerable:!0,get:function(){return this.id[3]|this.id[2]<<8|this.id[1]<<16|this.id[0]<<24},set:function(e){this.id[3]=255&e,this.id[2]=e>>8&255,this.id[1]=e>>16&255,this.id[0]=e>>24&255}});var objectid=ObjectID,ObjectID_1=ObjectID,ObjectId=ObjectID;function alphabetize(e){return e.split("").sort().join("")}function BSONRegExp(e,t){if(!(this instanceof BSONRegExp))return new BSONRegExp(e,t);this._bsontype="BSONRegExp",this.pattern=e||"",this.options=t?alphabetize(t):"";for(var r=0;r<this.options.length;r++)if("i"!==this.options[r]&&"m"!==this.options[r]&&"x"!==this.options[r]&&"l"!==this.options[r]&&"s"!==this.options[r]&&"u"!==this.options[r])throw new Error("the regular expression options ["+this.options[r]+"] is not supported")}objectid.ObjectID=ObjectID_1,objectid.ObjectId=ObjectId;var regexp=BSONRegExp,BSONRegExp_1=BSONRegExp;function _Symbol(e){if(!(this instanceof _Symbol))return new _Symbol(e);this._bsontype="Symbol",this.value=e}regexp.BSONRegExp=BSONRegExp_1,_Symbol.prototype.valueOf=function(){return this.value},_Symbol.prototype.toString=function(){return this.value},_Symbol.prototype.inspect=function(){return this.value},_Symbol.prototype.toJSON=function(){return this.value};var symbol=_Symbol,Symbol_1=_Symbol;function Int32(e){if(!(this instanceof Int32))return new Int32(e);this._bsontype="Int32",this.value=e}symbol.Symbol=Symbol_1,Int32.prototype.valueOf=function(){return this.value},Int32.prototype.toJSON=function(){return this.value};var int_32=Int32,Int32_1=Int32;function Code(e,t){if(!(this instanceof Code))return new Code(e,t);this._bsontype="Code",this.code=e,this.scope=t}int_32.Int32=Int32_1,Code.prototype.toJSON=function(){return{scope:this.scope,code:this.code}};var code=Code,Code_1=Code;code.Code=Code_1;var Buffer$2=buffer__WEBPACK_IMPORTED_MODULE_0___default.a.Buffer,PARSE_STRING_REGEXP=/^(\+|-)?(\d+|(\d*\.\d*))?(E|e)?([-+])?(\d+)?$/,PARSE_INF_REGEXP=/^(\+|-)?(Infinity|inf)$/i,PARSE_NAN_REGEXP=/^(\+|-)?NaN$/i,EXPONENT_MAX=6111,EXPONENT_MIN=-6176,EXPONENT_BIAS=6176,MAX_DIGITS=34,NAN_BUFFER=[124,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse(),INF_NEGATIVE_BUFFER=[248,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse(),INF_POSITIVE_BUFFER=[120,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse(),EXPONENT_REGEX=/^([-+])?(\d+)?$/,isDigit=function(e){return!isNaN(parseInt(e,10))},divideu128=function(e){var t=long_1.fromNumber(1e9),r=long_1.fromNumber(0);if(!(e.parts[0]||e.parts[1]||e.parts[2]||e.parts[3]))return{quotient:e,rem:r};for(var n=0;n<=3;n++)r=(r=r.shiftLeft(32)).add(new long_1(e.parts[n],0)),e.parts[n]=r.div(t).low_,r=r.modulo(t);return{quotient:e,rem:r}},multiply64x2=function(e,t){if(!e&&!t)return{high:long_1.fromNumber(0),low:long_1.fromNumber(0)};var r=e.shiftRightUnsigned(32),n=new long_1(e.getLowBits(),0),i=t.shiftRightUnsigned(32),o=new long_1(t.getLowBits(),0),s=r.multiply(i),u=r.multiply(o),a=n.multiply(i),f=n.multiply(o);return s=s.add(u.shiftRightUnsigned(32)),u=new long_1(u.getLowBits(),0).add(a).add(f.shiftRightUnsigned(32)),{high:s=s.add(u.shiftRightUnsigned(32)),low:f=u.shiftLeft(32).add(new long_1(f.getLowBits(),0))}},lessThan=function(e,t){var r=e.high_>>>0,n=t.high_>>>0;return r<n||r===n&&e.low_>>>0<t.low_>>>0},invalidErr=function(e,t){throw new TypeError('"${string}" not a valid Decimal128 string - '+t)};function Decimal128(e){this._bsontype="Decimal128",this.bytes=e}Decimal128.fromString=function(e){var t,r=!1,n=!1,i=!1,o=0,s=0,u=0,a=0,f=0,c=[0],l=0,h=0,p=0,_=0,d=0,y=0,g=[0,0],b=[0,0],N=0;if(e.length>=7e3)throw new TypeError(e+" not a valid Decimal128 string");var B=e.match(PARSE_STRING_REGEXP),O=e.match(PARSE_INF_REGEXP),m=e.match(PARSE_NAN_REGEXP);if(!B&&!O&&!m||0===e.length)throw new TypeError(e+" not a valid Decimal128 string");if(B){var E=B[2],S=B[4],A=B[5],w=B[6];S&&void 0===w&&invalidErr(e,"missing exponent power"),S&&void 0===E&&invalidErr(e,"missing exponent base"),void 0===S&&(A||w)&&invalidErr(e,"missing e before exponent")}if("+"!==e[N]&&"-"!==e[N]||(r="-"===e[N++]),!isDigit(e[N])&&"."!==e[N]){if("i"===e[N]||"I"===e[N])return new Decimal128(new Buffer$2(r?INF_NEGATIVE_BUFFER:INF_POSITIVE_BUFFER));if("N"===e[N])return new Decimal128(new Buffer$2(NAN_BUFFER))}for(;isDigit(e[N])||"."===e[N];)"."!==e[N]?(l<34&&("0"!==e[N]||i)&&(i||(f=s),i=!0,c[h++]=parseInt(e[N],10),l+=1),i&&(u+=1),n&&(a+=1),s+=1,N+=1):(n&&invalidErr(e,"contains multiple periods"),n=!0,N+=1);if(n&&!s)throw new TypeError(e+" not a valid Decimal128 string");if("e"===e[N]||"E"===e[N]){var v=e.substr(++N).match(EXPONENT_REGEX);if(!v||!v[2])return new Decimal128(new Buffer$2(NAN_BUFFER));d=parseInt(v[0],10),N+=v[0].length}if(e[N])return new Decimal128(new Buffer$2(NAN_BUFFER));if(p=0,l){if(_=l-1,1!==(o=u))for(;"0"===e[f+o-1];)o-=1}else p=0,_=0,c[0]=0,u=1,l=1,o=0;for(d<=a&&a-d>16384?d=EXPONENT_MIN:d-=a;d>EXPONENT_MAX;){if((_+=1)-p>MAX_DIGITS){var T=c.join("");if(T.match(/^0+$/)){d=EXPONENT_MAX;break}invalidErr(e,"overflow")}d-=1}for(;d<EXPONENT_MIN||l<u;){if(0===_&&o<l){d=EXPONENT_MIN,o=0;break}if(l<u?u-=1:_-=1,d<EXPONENT_MAX)d+=1;else{if((T=c.join("")).match(/^0+$/)){d=EXPONENT_MAX;break}invalidErr(e,"overflow")}}if(_-p+1<o){var I=s;n&&(f+=1,I+=1),r&&(f+=1,I+=1);var D=parseInt(e[f+_+1],10),R=0;if(D>=5&&(R=1,5===D))for(R=c[_]%2==1,y=f+_+2;y<I;y++)if(parseInt(e[y],10)){R=1;break}if(R)for(var L=_;L>=0;L--)if(++c[L]>9&&(c[L]=0,0===L)){if(!(d<EXPONENT_MAX))return new Decimal128(new Buffer$2(r?INF_NEGATIVE_BUFFER:INF_POSITIVE_BUFFER));d+=1,c[L]=1}}if(g=long_1.fromNumber(0),b=long_1.fromNumber(0),0===o)g=long_1.fromNumber(0),b=long_1.fromNumber(0);else if(_-p<17)for(L=p,b=long_1.fromNumber(c[L++]),g=new long_1(0,0);L<=_;L++)b=(b=b.multiply(long_1.fromNumber(10))).add(long_1.fromNumber(c[L]));else{for(L=p,g=long_1.fromNumber(c[L++]);L<=_-17;L++)g=(g=g.multiply(long_1.fromNumber(10))).add(long_1.fromNumber(c[L]));for(b=long_1.fromNumber(c[L++]);L<=_;L++)b=(b=b.multiply(long_1.fromNumber(10))).add(long_1.fromNumber(c[L]))}var $=multiply64x2(g,long_1.fromString("100000000000000000"));$.low=$.low.add(b),lessThan($.low,b)&&($.high=$.high.add(long_1.fromNumber(1))),t=d+EXPONENT_BIAS;var M={low:long_1.fromNumber(0),high:long_1.fromNumber(0)};$.high.shiftRightUnsigned(49).and(long_1.fromNumber(1)).equals(long_1.fromNumber)?(M.high=M.high.or(long_1.fromNumber(3).shiftLeft(61)),M.high=M.high.or(long_1.fromNumber(t).and(long_1.fromNumber(16383).shiftLeft(47))),M.high=M.high.or($.high.and(long_1.fromNumber(0x7fffffffffff)))):(M.high=M.high.or(long_1.fromNumber(16383&t).shiftLeft(49)),M.high=M.high.or($.high.and(long_1.fromNumber(562949953421311)))),M.low=$.low,r&&(M.high=M.high.or(long_1.fromString("9223372036854775808")));var P=new Buffer$2(16);return N=0,P[N++]=255&M.low.low_,P[N++]=M.low.low_>>8&255,P[N++]=M.low.low_>>16&255,P[N++]=M.low.low_>>24&255,P[N++]=255&M.low.high_,P[N++]=M.low.high_>>8&255,P[N++]=M.low.high_>>16&255,P[N++]=M.low.high_>>24&255,P[N++]=255&M.high.low_,P[N++]=M.high.low_>>8&255,P[N++]=M.high.low_>>16&255,P[N++]=M.high.low_>>24&255,P[N++]=255&M.high.high_,P[N++]=M.high.high_>>8&255,P[N++]=M.high.high_>>16&255,P[N++]=M.high.high_>>24&255,new Decimal128(P)};var COMBINATION_MASK=31,EXPONENT_MASK=16383,COMBINATION_INFINITY=30,COMBINATION_NAN=31;EXPONENT_BIAS=6176,Decimal128.prototype.toString=function(){for(var e,t,r,n,i,o,s=0,u=new Array(36),a=0;a<u.length;a++)u[a]=0;var f,c,l,h,p,_=0,d=!1,y={parts:new Array(4)},g=[];_=0;var b=this.bytes;if(n=b[_++]|b[_++]<<8|b[_++]<<16|b[_++]<<24,r=b[_++]|b[_++]<<8|b[_++]<<16|b[_++]<<24,t=b[_++]|b[_++]<<8|b[_++]<<16|b[_++]<<24,e=b[_++]|b[_++]<<8|b[_++]<<16|b[_++]<<24,_=0,{low:new long_1(n,r),high:new long_1(t,e)}.high.lessThan(long_1.ZERO)&&g.push("-"),(i=e>>26&COMBINATION_MASK)>>3==3){if(i===COMBINATION_INFINITY)return g.join("")+"Infinity";if(i===COMBINATION_NAN)return"NaN";o=e>>15&EXPONENT_MASK,l=8+(e>>14&1)}else l=e>>14&7,o=e>>17&EXPONENT_MASK;if(f=o-EXPONENT_BIAS,y.parts[0]=(16383&e)+((15&l)<<14),y.parts[1]=t,y.parts[2]=r,y.parts[3]=n,0===y.parts[0]&&0===y.parts[1]&&0===y.parts[2]&&0===y.parts[3])d=!0;else for(p=3;p>=0;p--){var N=0,B=divideu128(y);if(y=B.quotient,N=B.rem.low_)for(h=8;h>=0;h--)u[9*p+h]=N%10,N=Math.floor(N/10)}if(d)s=1,u[_]=0;else for(s=36,a=0;!u[_];)a++,s-=1,_+=1;if((c=s-1+f)>=34||c<=-7||f>0){if(s>34)return g.push(0),f>0?g.push("E+"+f):f<0&&g.push("E"+f),g.join("");for(g.push(u[_++]),(s-=1)&&g.push("."),a=0;a<s;a++)g.push(u[_++]);g.push("E"),c>0?g.push("+"+c):g.push(c)}else if(f>=0)for(a=0;a<s;a++)g.push(u[_++]);else{var O=s+f;if(O>0)for(a=0;a<O;a++)g.push(u[_++]);else g.push("0");for(g.push(".");O++<0;)g.push("0");for(a=0;a<s-Math.max(O-1,0);a++)g.push(u[_++])}return g.join("")},Decimal128.prototype.toJSON=function(){return{$numberDecimal:this.toString()}};var decimal128=Decimal128,Decimal128_1=Decimal128;function MinKey(){if(!(this instanceof MinKey))return new MinKey;this._bsontype="MinKey"}decimal128.Decimal128=Decimal128_1;var min_key=MinKey,MinKey_1=MinKey;function MaxKey(){if(!(this instanceof MaxKey))return new MaxKey;this._bsontype="MaxKey"}min_key.MinKey=MinKey_1;var max_key=MaxKey,MaxKey_1=MaxKey;function DBRef(e,t,r,n){if(!(this instanceof DBRef))return new DBRef(e,t,r,n);var i=e.split(".");2===i.length&&(r=i.shift(),e=i.shift()),this._bsontype="DBRef",this.collection=e,this.oid=t,this.db=r,this.fields=n||{}}max_key.MaxKey=MaxKey_1,DBRef.prototype.toJSON=function(){var e={$ref:this.collection,$id:this.oid};return null!=this.db&&(e.$db=this.db),e=Object.assign(e,this.fields)};var db_ref=DBRef,DBRef_1=DBRef;db_ref.DBRef=DBRef_1;var Buffer$3=buffer__WEBPACK_IMPORTED_MODULE_0___default.a.Buffer;function Binary(e,t){if(!(this instanceof Binary))return new Binary(e,t);if(!(null==e||"string"==typeof e||Buffer$3.isBuffer(e)||e instanceof Uint8Array||Array.isArray(e)))throw new Error("only String, Buffer, Uint8Array or Array accepted");if(this._bsontype="Binary",e instanceof Number?(this.sub_type=e,this.position=0):(this.sub_type=null==t?BSON_BINARY_SUBTYPE_DEFAULT:t,this.position=0),null==e||e instanceof Number)void 0!==Buffer$3?this.buffer=new Buffer$3(Binary.BUFFER_SIZE):"undefined"!=typeof Uint8Array?this.buffer=new Uint8Array(new ArrayBuffer(Binary.BUFFER_SIZE)):this.buffer=new Array(Binary.BUFFER_SIZE),this.position=0;else{if("string"==typeof e)if(void 0!==Buffer$3)this.buffer=new Buffer$3(e);else{if("undefined"==typeof Uint8Array&&"[object Array]"!==Object.prototype.toString.call(e))throw new TypeError("only String, Buffer, Uint8Array or Array accepted");this.buffer=writeStringToArray(e)}else this.buffer=e;this.position=e.length}}Binary.prototype.put=function(e){if(null!=e.length&&"number"!=typeof e&&1!==e.length)throw new TypeError("only accepts single character String, Uint8Array or Array");if("number"!=typeof e&&e<0||e>255)throw new TypeError("only accepts number in a valid unsigned byte range 0-255");var t=null;if(t="string"==typeof e?e.charCodeAt(0):null!=e.length?e[0]:e,this.buffer.length>this.position)this.buffer[this.position++]=t;else if(void 0!==Buffer$3&&Buffer$3.isBuffer(this.buffer)){var r=new Buffer$3(Binary.BUFFER_SIZE+this.buffer.length);this.buffer.copy(r,0,0,this.buffer.length),this.buffer=r,this.buffer[this.position++]=t}else{r=null,r="[object Uint8Array]"===Object.prototype.toString.call(this.buffer)?new Uint8Array(new ArrayBuffer(Binary.BUFFER_SIZE+this.buffer.length)):new Array(Binary.BUFFER_SIZE+this.buffer.length);for(var n=0;n<this.buffer.length;n++)r[n]=this.buffer[n];this.buffer=r,this.buffer[this.position++]=t}},Binary.prototype.write=function(e,t){if(t="number"==typeof t?t:this.position,this.buffer.length<t+e.length){var r=null;if(void 0!==Buffer$3&&Buffer$3.isBuffer(this.buffer))r=new Buffer$3(this.buffer.length+e.length),this.buffer.copy(r,0,0,this.buffer.length);else if("[object Uint8Array]"===Object.prototype.toString.call(this.buffer)){r=new Uint8Array(new ArrayBuffer(this.buffer.length+e.length));for(var n=0;n<this.position;n++)r[n]=this.buffer[n]}this.buffer=r}if(void 0!==Buffer$3&&Buffer$3.isBuffer(e)&&Buffer$3.isBuffer(this.buffer))e.copy(this.buffer,t,0,e.length),this.position=t+e.length>this.position?t+e.length:this.position;else if(void 0!==Buffer$3&&"string"==typeof e&&Buffer$3.isBuffer(this.buffer))this.buffer.write(e,t,"binary"),this.position=t+e.length>this.position?t+e.length:this.position;else if("[object Uint8Array]"===Object.prototype.toString.call(e)||"[object Array]"===Object.prototype.toString.call(e)&&"string"!=typeof e){for(n=0;n<e.length;n++)this.buffer[t++]=e[n];this.position=t>this.position?t:this.position}else if("string"==typeof e){for(n=0;n<e.length;n++)this.buffer[t++]=e.charCodeAt(n);this.position=t>this.position?t:this.position}},Binary.prototype.read=function(e,t){if(t=t&&t>0?t:this.position,this.buffer.slice)return this.buffer.slice(e,e+t);for(var r="undefined"!=typeof Uint8Array?new Uint8Array(new ArrayBuffer(t)):new Array(t),n=0;n<t;n++)r[n]=this.buffer[e++];return r},Binary.prototype.value=function(e){if((e=null!=e&&e)&&void 0!==Buffer$3&&Buffer$3.isBuffer(this.buffer)&&this.buffer.length===this.position)return this.buffer;if(void 0!==Buffer$3&&Buffer$3.isBuffer(this.buffer))return e?this.buffer.slice(0,this.position):this.buffer.toString("binary",0,this.position);if(e){if(null!=this.buffer.slice)return this.buffer.slice(0,this.position);for(var t="[object Uint8Array]"===Object.prototype.toString.call(this.buffer)?new Uint8Array(new ArrayBuffer(this.position)):new Array(this.position),r=0;r<this.position;r++)t[r]=this.buffer[r];return t}return convertArraytoUtf8BinaryString(this.buffer,0,this.position)},Binary.prototype.length=function(){return this.position},Binary.prototype.toJSON=function(){return null!=this.buffer?this.buffer.toString("base64"):""},Binary.prototype.toString=function(e){return null!=this.buffer?this.buffer.slice(0,this.position).toString(e):""};var BSON_BINARY_SUBTYPE_DEFAULT=0,writeStringToArray=function(e){for(var t="undefined"!=typeof Uint8Array?new Uint8Array(new ArrayBuffer(e.length)):new Array(e.length),r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t},convertArraytoUtf8BinaryString=function(e,t,r){for(var n="",i=t;i<r;i++)n+=String.fromCharCode(e[i]);return n};Binary.BUFFER_SIZE=256,Binary.SUBTYPE_DEFAULT=0,Binary.SUBTYPE_FUNCTION=1,Binary.SUBTYPE_BYTE_ARRAY=2,Binary.SUBTYPE_UUID_OLD=3,Binary.SUBTYPE_UUID=4,Binary.SUBTYPE_MD5=5,Binary.SUBTYPE_USER_DEFINED=128;var binary=Binary,Binary_1=Binary;binary.Binary=Binary_1;var Buffer$4=buffer__WEBPACK_IMPORTED_MODULE_0___default.a.Buffer,Long$1=long_1.Long,Double$1=double_1.Double,Timestamp$1=timestamp.Timestamp,ObjectID$1=objectid.ObjectID,Code$1=code.Code,MinKey$1=min_key.MinKey,MaxKey$1=max_key.MaxKey,DBRef$1=db_ref.DBRef,BSONRegExp$1=regexp.BSONRegExp,Binary$1=binary.Binary,deserialize=function(e,t,r){var n=(t=null==t?{}:t)&&t.index?t.index:0,i=e[n]|e[n+1]<<8|e[n+2]<<16|e[n+3]<<24;if(i<5)throw new Error("bson size must be >= 5, is "+i);if(t.allowObjectSmallerThanBufferSize&&Buffer$4.byteLength(e)<i)throw new Error("buffer length "+Buffer$4.byteLength(e)+" must be >= bson size "+i);if(!t.allowObjectSmallerThanBufferSize&&Buffer$4.byteLength(e)!==i)throw new Error("buffer length "+Buffer$4.byteLength(e)+" must === bson size "+i);if(i+n>Buffer$4.byteLength(e))throw new Error("(bson size "+i+" + options.index "+n+" must be <= buffer length "+Buffer$4.byteLength(e)+")");if(0!==e[n+i-1])throw new Error("One object, sized correctly, with a spot for an EOO, but the EOO isn't 0x00");return deserializeObject(e,n,t,r)},deserializeObject=function e(t,r,n,i){var o=null!=n.evalFunctions&&n.evalFunctions,s=null!=n.cacheFunctions&&n.cacheFunctions,u=null!=n.cacheFunctionsCrc32&&n.cacheFunctionsCrc32;if(!u)var a=null;var f=null==n.fieldsAsRaw?null:n.fieldsAsRaw,c=null!=n.raw&&n.raw,l="boolean"==typeof n.bsonRegExp&&n.bsonRegExp,h=null!=n.promoteBuffers&&n.promoteBuffers,p=null==n.promoteLongs||n.promoteLongs,_=null==n.promoteValues||n.promoteValues,d=r;if(Buffer$4.byteLength(t)<5)throw new Error("corrupt bson message < 5 bytes long");var y=t[r++]|t[r++]<<8|t[r++]<<16|t[r++]<<24;if(y<5||y>Buffer$4.byteLength(t))throw new Error("corrupt bson message");for(var g=i?[]:{},b=0;;){var N=t[r++];if(0===N)break;for(var B=r;0!==t[B]&&B<Buffer$4.byteLength(t);)B++;if(B>=Buffer$4.byteLength(t))throw new Error("Bad BSON Document: illegal CString");var O=i?b++:t.toString("utf8",r,B);if(r=B+1,N===BSON.BSON_DATA_STRING){var m=t[r++]|t[r++]<<8|t[r++]<<16|t[r++]<<24;if(m<=0||m>Buffer$4.byteLength(t)-r||0!==t[r+m-1])throw new Error("bad string length in bson");var E=t.toString("utf8",r,r+m-1);for(B=0;B<E.length;B++)if(65533===E.charCodeAt(B))throw new Error("Invalid UTF-8 string in BSON document");g[O]=E,r+=m}else if(N===BSON.BSON_DATA_OID){var S=new Buffer$4(12);t.copy(S,0,r,r+12),g[O]=new ObjectID$1(S),r+=12}else if(N===BSON.BSON_DATA_INT&&!1===_)g[O]=new int_32(t[r++]|t[r++]<<8|t[r++]<<16|t[r++]<<24);else if(N===BSON.BSON_DATA_INT)g[O]=t[r++]|t[r++]<<8|t[r++]<<16|t[r++]<<24;else if(N===BSON.BSON_DATA_NUMBER&&!1===_)g[O]=new Double$1(t.readDoubleLE(r)),r+=8;else if(N===BSON.BSON_DATA_NUMBER)g[O]=t.readDoubleLE(r),r+=8;else if(N===BSON.BSON_DATA_DATE){var A=t[r++]|t[r++]<<8|t[r++]<<16|t[r++]<<24,w=t[r++]|t[r++]<<8|t[r++]<<16|t[r++]<<24;g[O]=new Date(new Long$1(A,w).toNumber())}else if(N===BSON.BSON_DATA_BOOLEAN){if(0!==t[r]&&1!==t[r])throw new Error("illegal boolean type value");g[O]=1===t[r++]}else if(N===BSON.BSON_DATA_OBJECT){var v=r,T=t[r]|t[r+1]<<8|t[r+2]<<16|t[r+3]<<24;if(T<=0||T>Buffer$4.byteLength(t)-r)throw new Error("bad embedded document length in bson");g[O]=c?t.slice(r,r+T):e(t,v,n,!1),r+=T}else if(N===BSON.BSON_DATA_ARRAY){v=r;var I=n,D=r+(T=t[r]|t[r+1]<<8|t[r+2]<<16|t[r+3]<<24);if(f&&f[O]){for(var R in I={},n)I[R]=n[R];I.raw=!0}if(g[O]=e(t,v,I,!0),0!==t[(r+=T)-1])throw new Error("invalid array terminator byte");if(r!==D)throw new Error("corrupted array bson")}else if(N===BSON.BSON_DATA_UNDEFINED)g[O]=void 0;else if(N===BSON.BSON_DATA_NULL)g[O]=null;else if(N===BSON.BSON_DATA_LONG){A=t[r++]|t[r++]<<8|t[r++]<<16|t[r++]<<24,w=t[r++]|t[r++]<<8|t[r++]<<16|t[r++]<<24;var L=new Long$1(A,w);g[O]=p&&!0===_&&L.lessThanOrEqual(JS_INT_MAX_LONG)&&L.greaterThanOrEqual(JS_INT_MIN_LONG)?L.toNumber():L}else if(N===BSON.BSON_DATA_DECIMAL128){var $=new Buffer$4(16);t.copy($,0,r,r+16),r+=16;var M=new decimal128($);g[O]=M.toObject?M.toObject():M}else if(N===BSON.BSON_DATA_BINARY){var P=t[r++]|t[r++]<<8|t[r++]<<16|t[r++]<<24,x=P,U=t[r++];if(P<0)throw new Error("Negative binary type element size found");if(P>Buffer$4.byteLength(t))throw new Error("Binary type size larger than document size");if(null!=t.slice){if(U===Binary$1.SUBTYPE_BYTE_ARRAY){if((P=t[r++]|t[r++]<<8|t[r++]<<16|t[r++]<<24)<0)throw new Error("Negative binary type element size found for subtype 0x02");if(P>x-4)throw new Error("Binary type with subtype 0x02 contains to long binary size");if(P<x-4)throw new Error("Binary type with subtype 0x02 contains to short binary size")}g[O]=h&&_?t.slice(r,r+P):new Binary$1(t.slice(r,r+P),U)}else{var j="undefined"!=typeof Uint8Array?new Uint8Array(new ArrayBuffer(P)):new Array(P);if(U===Binary$1.SUBTYPE_BYTE_ARRAY){if((P=t[r++]|t[r++]<<8|t[r++]<<16|t[r++]<<24)<0)throw new Error("Negative binary type element size found for subtype 0x02");if(P>x-4)throw new Error("Binary type with subtype 0x02 contains to long binary size");if(P<x-4)throw new Error("Binary type with subtype 0x02 contains to short binary size")}for(B=0;B<P;B++)j[B]=t[r+B];g[O]=h&&_?j:new Binary$1(j,U)}r+=P}else if(N===BSON.BSON_DATA_REGEXP&&!1===l){for(B=r;0!==t[B]&&B<Buffer$4.byteLength(t);)B++;if(B>=Buffer$4.byteLength(t))throw new Error("Bad BSON Document: illegal CString");var C=t.toString("utf8",r,B);for(B=r=B+1;0!==t[B]&&B<Buffer$4.byteLength(t);)B++;if(B>=Buffer$4.byteLength(t))throw new Error("Bad BSON Document: illegal CString");var F=t.toString("utf8",r,B);r=B+1;var k=new Array(F.length);for(B=0;B<F.length;B++)switch(F[B]){case"m":k[B]="m";break;case"s":k[B]="g";break;case"i":k[B]="i"}g[O]=new RegExp(C,k.join(""))}else if(N===BSON.BSON_DATA_REGEXP&&!0===l){for(B=r;0!==t[B]&&B<Buffer$4.byteLength(t);)B++;if(B>=Buffer$4.byteLength(t))throw new Error("Bad BSON Document: illegal CString");for(C=t.toString("utf8",r,B),B=r=B+1;0!==t[B]&&B<Buffer$4.byteLength(t);)B++;if(B>=Buffer$4.byteLength(t))throw new Error("Bad BSON Document: illegal CString");F=t.toString("utf8",r,B),r=B+1,g[O]=new BSONRegExp$1(C,F)}else if(N===BSON.BSON_DATA_SYMBOL){if((m=t[r++]|t[r++]<<8|t[r++]<<16|t[r++]<<24)<=0||m>Buffer$4.byteLength(t)-r||0!==t[r+m-1])throw new Error("bad string length in bson");g[O]=t.toString("utf8",r,r+m-1),r+=m}else if(N===BSON.BSON_DATA_TIMESTAMP)A=t[r++]|t[r++]<<8|t[r++]<<16|t[r++]<<24,w=t[r++]|t[r++]<<8|t[r++]<<16|t[r++]<<24,g[O]=new Timestamp$1(A,w);else if(N===BSON.BSON_DATA_MIN_KEY)g[O]=new MinKey$1;else if(N===BSON.BSON_DATA_MAX_KEY)g[O]=new MaxKey$1;else if(N===BSON.BSON_DATA_CODE){if((m=t[r++]|t[r++]<<8|t[r++]<<16|t[r++]<<24)<=0||m>Buffer$4.byteLength(t)-r||0!==t[r+m-1])throw new Error("bad string length in bson");var z=t.toString("utf8",r,r+m-1);if(o)if(s){var Y=u?a(z):z;g[O]=isolateEvalWithHash(functionCache,Y,z,g)}else g[O]=isolateEval(z);else g[O]=new Code$1(z);r+=m}else if(N===BSON.BSON_DATA_CODE_W_SCOPE){var K=t[r++]|t[r++]<<8|t[r++]<<16|t[r++]<<24;if(K<13)throw new Error("code_w_scope total size shorter minimum expected length");if((m=t[r++]|t[r++]<<8|t[r++]<<16|t[r++]<<24)<=0||m>Buffer$4.byteLength(t)-r||0!==t[r+m-1])throw new Error("bad string length in bson");z=t.toString("utf8",r,r+m-1),v=r+=m,T=t[r]|t[r+1]<<8|t[r+2]<<16|t[r+3]<<24;var W=e(t,v,n,!1);if(r+=T,K<8+T+m)throw new Error("code_w_scope total size is to short, truncating scope");if(K>8+T+m)throw new Error("code_w_scope total size is to long, clips outer document");o?(s?(Y=u?a(z):z,g[O]=isolateEvalWithHash(functionCache,Y,z,g)):g[O]=isolateEval(z),g[O].scope=W):g[O]=new Code$1(z,W)}else{if(N!==BSON.BSON_DATA_DBPOINTER)throw new Error("Detected unknown BSON type "+N.toString(16)+' for fieldname "'+O+'", are you using the latest BSON parser?');if((m=t[r++]|t[r++]<<8|t[r++]<<16|t[r++]<<24)<=0||m>Buffer$4.byteLength(t)-r||0!==t[r+m-1])throw new Error("bad string length in bson");var X=t.toString("utf8",r,r+m-1);r+=m;var V=new Buffer$4(12);for(t.copy(V,0,r,r+12),S=new ObjectID$1(V),r+=12,B=0;B<X.length;B++)if(65533===X.charCodeAt(B))throw new Error("Invalid UTF-8 string in BSON document");g[O]=new DBRef$1(X,S)}}if(y!==r-d){if(i)throw new Error("corrupt array bson");throw new Error("corrupt object bson")}var J=!0;if(Object.keys(g).filter(function(e){return e.startsWith("$")}).forEach(function(e){-1===["$ref","$id","$db"].indexOf(e)&&(J=!1)}),!J)return g;if(null!=g.$id&&null!=g.$ref){var q=Object.assign({},g);return delete q.$ref,delete q.$id,delete q.$db,new DBRef$1(g.$ref,g.$id,g.$db||null,q)}return g},isolateEvalWithHash=function isolateEvalWithHash(functionCache,hash,functionString,object){var value=null;return null==functionCache[hash]&&(eval("value = "+functionString),functionCache[hash]=value),functionCache[hash].bind(object)},isolateEval=function isolateEval(functionString){var value=null;return eval("value = "+functionString),value},BSON={},functionCache=BSON.functionCache={};BSON.BSON_DATA_NUMBER=1,BSON.BSON_DATA_STRING=2,BSON.BSON_DATA_OBJECT=3,BSON.BSON_DATA_ARRAY=4,BSON.BSON_DATA_BINARY=5,BSON.BSON_DATA_UNDEFINED=6,BSON.BSON_DATA_OID=7,BSON.BSON_DATA_BOOLEAN=8,BSON.BSON_DATA_DATE=9,BSON.BSON_DATA_NULL=10,BSON.BSON_DATA_REGEXP=11,BSON.BSON_DATA_DBPOINTER=12,BSON.BSON_DATA_CODE=13,BSON.BSON_DATA_SYMBOL=14,BSON.BSON_DATA_CODE_W_SCOPE=15,BSON.BSON_DATA_INT=16,BSON.BSON_DATA_TIMESTAMP=17,BSON.BSON_DATA_LONG=18,BSON.BSON_DATA_DECIMAL128=19,BSON.BSON_DATA_MIN_KEY=255,BSON.BSON_DATA_MAX_KEY=127,BSON.BSON_BINARY_SUBTYPE_DEFAULT=0,BSON.BSON_BINARY_SUBTYPE_FUNCTION=1,BSON.BSON_BINARY_SUBTYPE_BYTE_ARRAY=2,BSON.BSON_BINARY_SUBTYPE_UUID=3,BSON.BSON_BINARY_SUBTYPE_MD5=4,BSON.BSON_BINARY_SUBTYPE_USER_DEFINED=128,BSON.BSON_INT32_MAX=2147483647,BSON.BSON_INT32_MIN=-2147483648,BSON.BSON_INT64_MAX=Math.pow(2,63)-1,BSON.BSON_INT64_MIN=-Math.pow(2,63),BSON.JS_INT_MAX=9007199254740992,BSON.JS_INT_MIN=-9007199254740992;var JS_INT_MAX_LONG=Long$1.fromNumber(9007199254740992),JS_INT_MIN_LONG=Long$1.fromNumber(-9007199254740992),deserializer=deserialize,readIEEE754=function(e,t,r,n,i){var o,s,u="big"===r,a=8*i-n-1,f=(1<<a)-1,c=f>>1,l=-7,h=u?0:i-1,p=u?1:-1,_=e[t+h];for(h+=p,o=_&(1<<-l)-1,_>>=-l,l+=a;l>0;o=256*o+e[t+h],h+=p,l-=8);for(s=o&(1<<-l)-1,o>>=-l,l+=n;l>0;s=256*s+e[t+h],h+=p,l-=8);if(0===o)o=1-c;else{if(o===f)return s?NaN:1/0*(_?-1:1);s+=Math.pow(2,n),o-=c}return(_?-1:1)*s*Math.pow(2,o-n)},writeIEEE754=function(e,t,r,n,i,o){var s,u,a,f="big"===n,c=8*o-i-1,l=(1<<c)-1,h=l>>1,p=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,_=f?o-1:0,d=f?-1:1,y=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(u=isNaN(t)?1:0,s=l):(s=Math.floor(Math.log(t)/Math.LN2),t*(a=Math.pow(2,-s))<1&&(s--,a*=2),(t+=s+h>=1?p/a:p*Math.pow(2,1-h))*a>=2&&(s++,a/=2),s+h>=l?(u=0,s=l):s+h>=1?(u=(t*a-1)*Math.pow(2,i),s+=h):(u=t*Math.pow(2,h-1)*Math.pow(2,i),s=0)),isNaN(t)&&(u=0);i>=8;)e[r+_]=255&u,_+=d,u/=256,i-=8;for(s=s<<i|u,isNaN(t)&&(s+=8),c+=i;c>0;)e[r+_]=255&s,_+=d,s/=256,c-=8;e[r+_-d]|=128*y},readIEEE754_1=readIEEE754,writeIEEE754_1=writeIEEE754,float_parser={readIEEE754:readIEEE754_1,writeIEEE754:writeIEEE754_1};function normalizedFunctionString(e){return e.toString().replace(/function(.*)\(/,"function (")}var utils={normalizedFunctionString:normalizedFunctionString},_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Buffer$5=buffer__WEBPACK_IMPORTED_MODULE_0___default.a.Buffer,writeIEEE754$1=float_parser.writeIEEE754,Long$2=long_1.Long,MinKey$2=min_key.MinKey,Binary$2=binary.Binary,normalizedFunctionString$1=utils.normalizedFunctionString,regexp$1=/\x00/,isDate=function(e){return"object"===(void 0===e?"undefined":_typeof(e))&&"[object Date]"===Object.prototype.toString.call(e)},isRegExp=function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},serializeString=function(e,t,r,n,i){e[n++]=BSON$1.BSON_DATA_STRING,e[(n=n+(i?e.write(t,n,"ascii"):e.write(t,n,"utf8"))+1)-1]=0;var o=e.write(r,n+4,"utf8");return e[n+3]=o+1>>24&255,e[n+2]=o+1>>16&255,e[n+1]=o+1>>8&255,e[n]=o+1&255,n=n+4+o,e[n++]=0,n},serializeNumber=function(e,t,r,n,i){if(Math.floor(r)===r&&r>=BSON$1.JS_INT_MIN&&r<=BSON$1.JS_INT_MAX)if(r>=BSON$1.BSON_INT32_MIN&&r<=BSON$1.BSON_INT32_MAX){e[n++]=BSON$1.BSON_DATA_INT;var o=i?e.write(t,n,"ascii"):e.write(t,n,"utf8");n+=o,e[n++]=0,e[n++]=255&r,e[n++]=r>>8&255,e[n++]=r>>16&255,e[n++]=r>>24&255}else if(r>=BSON$1.JS_INT_MIN&&r<=BSON$1.JS_INT_MAX)e[n++]=BSON$1.BSON_DATA_NUMBER,n+=o=i?e.write(t,n,"ascii"):e.write(t,n,"utf8"),e[n++]=0,writeIEEE754$1(e,r,n,"little",52,8),n+=8;else{e[n++]=BSON$1.BSON_DATA_LONG,n+=o=i?e.write(t,n,"ascii"):e.write(t,n,"utf8"),e[n++]=0;var s=Long$2.fromNumber(r),u=s.getLowBits(),a=s.getHighBits();e[n++]=255&u,e[n++]=u>>8&255,e[n++]=u>>16&255,e[n++]=u>>24&255,e[n++]=255&a,e[n++]=a>>8&255,e[n++]=a>>16&255,e[n++]=a>>24&255}else e[n++]=BSON$1.BSON_DATA_NUMBER,n+=o=i?e.write(t,n,"ascii"):e.write(t,n,"utf8"),e[n++]=0,writeIEEE754$1(e,r,n,"little",52,8),n+=8;return n},serializeNull=function(e,t,r,n,i){return e[n++]=BSON$1.BSON_DATA_NULL,n+=i?e.write(t,n,"ascii"):e.write(t,n,"utf8"),e[n++]=0,n},serializeBoolean=function(e,t,r,n,i){return e[n++]=BSON$1.BSON_DATA_BOOLEAN,n+=i?e.write(t,n,"ascii"):e.write(t,n,"utf8"),e[n++]=0,e[n++]=r?1:0,n},serializeDate=function(e,t,r,n,i){e[n++]=BSON$1.BSON_DATA_DATE,n+=i?e.write(t,n,"ascii"):e.write(t,n,"utf8"),e[n++]=0;var o=Long$2.fromNumber(r.getTime()),s=o.getLowBits(),u=o.getHighBits();return e[n++]=255&s,e[n++]=s>>8&255,e[n++]=s>>16&255,e[n++]=s>>24&255,e[n++]=255&u,e[n++]=u>>8&255,e[n++]=u>>16&255,e[n++]=u>>24&255,n},serializeRegExp=function(e,t,r,n,i){if(e[n++]=BSON$1.BSON_DATA_REGEXP,n+=i?e.write(t,n,"ascii"):e.write(t,n,"utf8"),e[n++]=0,r.source&&null!=r.source.match(regexp$1))throw Error("value "+r.source+" must not contain null bytes");return n+=e.write(r.source,n,"utf8"),e[n++]=0,r.ignoreCase&&(e[n++]=105),r.global&&(e[n++]=115),r.multiline&&(e[n++]=109),e[n++]=0,n},serializeBSONRegExp=function(e,t,r,n,i){if(e[n++]=BSON$1.BSON_DATA_REGEXP,n+=i?e.write(t,n,"ascii"):e.write(t,n,"utf8"),e[n++]=0,null!=r.pattern.match(regexp$1))throw Error("pattern "+r.pattern+" must not contain null bytes");return n+=e.write(r.pattern,n,"utf8"),e[n++]=0,n+=e.write(r.options.split("").sort().join(""),n,"utf8"),e[n++]=0,n},serializeMinMax=function(e,t,r,n,i){return e[n++]=null===r?BSON$1.BSON_DATA_NULL:r instanceof MinKey$2?BSON$1.BSON_DATA_MIN_KEY:BSON$1.BSON_DATA_MAX_KEY,n+=i?e.write(t,n,"ascii"):e.write(t,n,"utf8"),e[n++]=0,n},serializeObjectId=function(e,t,r,n,i){if(e[n++]=BSON$1.BSON_DATA_OID,n+=i?e.write(t,n,"ascii"):e.write(t,n,"utf8"),e[n++]=0,"string"==typeof r.id)e.write(r.id,n,"binary");else{if(!r.id||!r.id.copy)throw new TypeError("object ["+JSON.stringify(r)+"] is not a valid ObjectId");r.id.copy(e,n,0,12)}return n+12},serializeBuffer=function(e,t,r,n,i){e[n++]=BSON$1.BSON_DATA_BINARY,n+=i?e.write(t,n,"ascii"):e.write(t,n,"utf8"),e[n++]=0;var o=r.length;return e[n++]=255&o,e[n++]=o>>8&255,e[n++]=o>>16&255,e[n++]=o>>24&255,e[n++]=BSON$1.BSON_BINARY_SUBTYPE_DEFAULT,r.copy(e,n,0,o),n+=o},serializeObject=function(e,t,r,n,i,o,s,u,a,f){for(var c=0;c<f.length;c++)if(f[c]===r)throw new Error("cyclic dependency detected");f.push(r),e[n++]=Array.isArray(r)?BSON$1.BSON_DATA_ARRAY:BSON$1.BSON_DATA_OBJECT,n+=a?e.write(t,n,"ascii"):e.write(t,n,"utf8"),e[n++]=0;var l=serializeInto(e,r,i,n,o+1,s,u,f);return f.pop(),l},serializeDecimal128=function(e,t,r,n,i){return e[n++]=BSON$1.BSON_DATA_DECIMAL128,n+=i?e.write(t,n,"ascii"):e.write(t,n,"utf8"),e[n++]=0,r.bytes.copy(e,n,0,16),n+16},serializeLong=function(e,t,r,n,i){e[n++]="Long"===r._bsontype?BSON$1.BSON_DATA_LONG:BSON$1.BSON_DATA_TIMESTAMP,n+=i?e.write(t,n,"ascii"):e.write(t,n,"utf8"),e[n++]=0;var o=r.getLowBits(),s=r.getHighBits();return e[n++]=255&o,e[n++]=o>>8&255,e[n++]=o>>16&255,e[n++]=o>>24&255,e[n++]=255&s,e[n++]=s>>8&255,e[n++]=s>>16&255,e[n++]=s>>24&255,n},serializeInt32=function(e,t,r,n,i){return e[n++]=BSON$1.BSON_DATA_INT,n+=i?e.write(t,n,"ascii"):e.write(t,n,"utf8"),e[n++]=0,e[n++]=255&r,e[n++]=r>>8&255,e[n++]=r>>16&255,e[n++]=r>>24&255,n},serializeDouble=function(e,t,r,n,i){return e[n++]=BSON$1.BSON_DATA_NUMBER,n+=i?e.write(t,n,"ascii"):e.write(t,n,"utf8"),e[n++]=0,writeIEEE754$1(e,r.value,n,"little",52,8),n+=8},serializeFunction=function(e,t,r,n,i,o,s){e[n++]=BSON$1.BSON_DATA_CODE,n+=s?e.write(t,n,"ascii"):e.write(t,n,"utf8"),e[n++]=0;var u=normalizedFunctionString$1(r),a=e.write(u,n+4,"utf8")+1;return e[n]=255&a,e[n+1]=a>>8&255,e[n+2]=a>>16&255,e[n+3]=a>>24&255,n=n+4+a-1,e[n++]=0,n},serializeCode=function(e,t,r,n,i,o,s,u,a){if(r.scope&&"object"===_typeof(r.scope)){e[n++]=BSON$1.BSON_DATA_CODE_W_SCOPE;var f=a?e.write(t,n,"ascii"):e.write(t,n,"utf8");n+=f,e[n++]=0;var c=n,l="string"==typeof r.code?r.code:r.code.toString();n+=4;var h=e.write(l,n+4,"utf8")+1;e[n]=255&h,e[n+1]=h>>8&255,e[n+2]=h>>16&255,e[n+3]=h>>24&255,e[n+4+h-1]=0,n=n+h+4;var p=serializeInto(e,r.scope,i,n,o+1,s,u);n=p-1;var _=p-c;e[c++]=255&_,e[c++]=_>>8&255,e[c++]=_>>16&255,e[c++]=_>>24&255,e[n++]=0}else{e[n++]=BSON$1.BSON_DATA_CODE,n+=f=a?e.write(t,n,"ascii"):e.write(t,n,"utf8"),e[n++]=0,l=r.code.toString();var d=e.write(l,n+4,"utf8")+1;e[n]=255&d,e[n+1]=d>>8&255,e[n+2]=d>>16&255,e[n+3]=d>>24&255,n=n+4+d-1,e[n++]=0}return n},serializeBinary=function(e,t,r,n,i){e[n++]=BSON$1.BSON_DATA_BINARY,n+=i?e.write(t,n,"ascii"):e.write(t,n,"utf8"),e[n++]=0;var o=r.value(!0),s=r.position;return r.sub_type===Binary$2.SUBTYPE_BYTE_ARRAY&&(s+=4),e[n++]=255&s,e[n++]=s>>8&255,e[n++]=s>>16&255,e[n++]=s>>24&255,e[n++]=r.sub_type,r.sub_type===Binary$2.SUBTYPE_BYTE_ARRAY&&(s-=4,e[n++]=255&s,e[n++]=s>>8&255,e[n++]=s>>16&255,e[n++]=s>>24&255),o.copy(e,n,0,r.position),n+=r.position},serializeSymbol=function(e,t,r,n,i){e[n++]=BSON$1.BSON_DATA_SYMBOL,n+=i?e.write(t,n,"ascii"):e.write(t,n,"utf8"),e[n++]=0;var o=e.write(r.value,n+4,"utf8")+1;return e[n]=255&o,e[n+1]=o>>8&255,e[n+2]=o>>16&255,e[n+3]=o>>24&255,n=n+4+o-1,e[n++]=0,n},serializeDBRef=function(e,t,r,n,i,o,s){e[n++]=BSON$1.BSON_DATA_OBJECT,n+=s?e.write(t,n,"ascii"):e.write(t,n,"utf8"),e[n++]=0;var u,a=n,f={$ref:r.collection,$id:r.oid};null!=r.db&&(f.$db=r.db),f=Object.assign(f,r.fields);var c=(u=serializeInto(e,f,!1,n,i+1,o))-a;return e[a++]=255&c,e[a++]=c>>8&255,e[a++]=c>>16&255,e[a++]=c>>24&255,u},serializeInto=function(e,t,r,n,i,o,s,u){n=n||0,(u=u||[]).push(t);var a=n+4;if(Array.isArray(t))for(var f=0;f<t.length;f++){var c=""+f,l=t[f];if(l&&l.toBSON){if("function"!=typeof l.toBSON)throw new TypeError("toBSON is not a function");l=l.toBSON()}var h=void 0===l?"undefined":_typeof(l);"string"===h?a=serializeString(e,c,l,a,!0):"number"===h?a=serializeNumber(e,c,l,a,!0):"boolean"===h?a=serializeBoolean(e,c,l,a,!0):l instanceof Date||isDate(l)?a=serializeDate(e,c,l,a,!0):void 0===l?a=serializeNull(e,c,l,a,!0):null===l?a=serializeNull(e,c,l,a,!0):"ObjectID"===l._bsontype?a=serializeObjectId(e,c,l,a,!0):Buffer$5.isBuffer(l)?a=serializeBuffer(e,c,l,a,!0):l instanceof RegExp||isRegExp(l)?a=serializeRegExp(e,c,l,a,!0):"object"===h&&null==l._bsontype?a=serializeObject(e,c,l,a,r,i,o,s,!0,u):"object"===h&&"Decimal128"===l._bsontype?a=serializeDecimal128(e,c,l,a,!0):"Long"===l._bsontype||"Timestamp"===l._bsontype?a=serializeLong(e,c,l,a,!0):"Double"===l._bsontype?a=serializeDouble(e,c,l,a,!0):"function"==typeof l&&o?a=serializeFunction(e,c,l,a,r,i,o,!0):"Code"===l._bsontype?a=serializeCode(e,c,l,a,r,i,o,s,!0):"Binary"===l._bsontype?a=serializeBinary(e,c,l,a,!0):"Symbol"===l._bsontype?a=serializeSymbol(e,c,l,a,!0):"DBRef"===l._bsontype?a=serializeDBRef(e,c,l,a,i,o,!0):"BSONRegExp"===l._bsontype?a=serializeBSONRegExp(e,c,l,a,!0):"Int32"===l._bsontype?a=serializeInt32(e,c,l,a,!0):"MinKey"!==l._bsontype&&"MaxKey"!==l._bsontype||(a=serializeMinMax(e,c,l,a,!0))}else if(t instanceof map)for(var p=t.entries(),_=!1;!_;){var d=p.next();if(!(_=d.done)){if(c=d.value[0],h=void 0===(l=d.value[1])?"undefined":_typeof(l),"$db"!==c&&"$ref"!==c&&"$id"!==c){if(null!=c.match(regexp$1))throw Error("key "+c+" must not contain null bytes");if(r){if("$"===c[0])throw Error("key "+c+" must not start with '$'");if(~c.indexOf("."))throw Error("key "+c+" must not contain '.'")}}"string"===h?a=serializeString(e,c,l,a):"number"===h?a=serializeNumber(e,c,l,a):"boolean"===h?a=serializeBoolean(e,c,l,a):l instanceof Date||isDate(l)?a=serializeDate(e,c,l,a):null===l||void 0===l&&!1===s?a=serializeNull(e,c,l,a):"ObjectID"===l._bsontype?a=serializeObjectId(e,c,l,a):Buffer$5.isBuffer(l)?a=serializeBuffer(e,c,l,a):l instanceof RegExp||isRegExp(l)?a=serializeRegExp(e,c,l,a):"object"===h&&null==l._bsontype?a=serializeObject(e,c,l,a,r,i,o,s,!1,u):"object"===h&&"Decimal128"===l._bsontype?a=serializeDecimal128(e,c,l,a):"Long"===l._bsontype||"Timestamp"===l._bsontype?a=serializeLong(e,c,l,a):"Double"===l._bsontype?a=serializeDouble(e,c,l,a):"Code"===l._bsontype?a=serializeCode(e,c,l,a,r,i,o,s):"function"==typeof l&&o?a=serializeFunction(e,c,l,a,r,i,o):"Binary"===l._bsontype?a=serializeBinary(e,c,l,a):"Symbol"===l._bsontype?a=serializeSymbol(e,c,l,a):"DBRef"===l._bsontype?a=serializeDBRef(e,c,l,a,i,o):"BSONRegExp"===l._bsontype?a=serializeBSONRegExp(e,c,l,a):"Int32"===l._bsontype?a=serializeInt32(e,c,l,a):"MinKey"!==l._bsontype&&"MaxKey"!==l._bsontype||(a=serializeMinMax(e,c,l,a))}}else{if(t.toBSON){if("function"!=typeof t.toBSON)throw new TypeError("toBSON is not a function");if(null!=(t=t.toBSON())&&"object"!==(void 0===t?"undefined":_typeof(t)))throw new TypeError("toBSON function did not return an object")}for(c in t){if((l=t[c])&&l.toBSON){if("function"!=typeof l.toBSON)throw new TypeError("toBSON is not a function");l=l.toBSON()}if(h=void 0===l?"undefined":_typeof(l),"$db"!==c&&"$ref"!==c&&"$id"!==c){if(null!=c.match(regexp$1))throw Error("key "+c+" must not contain null bytes");if(r){if("$"===c[0])throw Error("key "+c+" must not start with '$'");if(~c.indexOf("."))throw Error("key "+c+" must not contain '.'")}}"string"===h?a=serializeString(e,c,l,a):"number"===h?a=serializeNumber(e,c,l,a):"boolean"===h?a=serializeBoolean(e,c,l,a):l instanceof Date||isDate(l)?a=serializeDate(e,c,l,a):void 0===l?!1===s&&(a=serializeNull(e,c,l,a)):null===l?a=serializeNull(e,c,l,a):"ObjectID"===l._bsontype?a=serializeObjectId(e,c,l,a):Buffer$5.isBuffer(l)?a=serializeBuffer(e,c,l,a):l instanceof RegExp||isRegExp(l)?a=serializeRegExp(e,c,l,a):"object"===h&&null==l._bsontype?a=serializeObject(e,c,l,a,r,i,o,s,!1,u):"object"===h&&"Decimal128"===l._bsontype?a=serializeDecimal128(e,c,l,a):"Long"===l._bsontype||"Timestamp"===l._bsontype?a=serializeLong(e,c,l,a):"Double"===l._bsontype?a=serializeDouble(e,c,l,a):"Code"===l._bsontype?a=serializeCode(e,c,l,a,r,i,o,s):"function"==typeof l&&o?a=serializeFunction(e,c,l,a,r,i,o):"Binary"===l._bsontype?a=serializeBinary(e,c,l,a):"Symbol"===l._bsontype?a=serializeSymbol(e,c,l,a):"DBRef"===l._bsontype?a=serializeDBRef(e,c,l,a,i,o):"BSONRegExp"===l._bsontype?a=serializeBSONRegExp(e,c,l,a):"Int32"===l._bsontype?a=serializeInt32(e,c,l,a):"MinKey"!==l._bsontype&&"MaxKey"!==l._bsontype||(a=serializeMinMax(e,c,l,a))}}u.pop(),e[a++]=0;var y=a-n;return e[n++]=255&y,e[n++]=y>>8&255,e[n++]=y>>16&255,e[n++]=y>>24&255,a},BSON$1={BSON_DATA_NUMBER:1,BSON_DATA_STRING:2,BSON_DATA_OBJECT:3,BSON_DATA_ARRAY:4,BSON_DATA_BINARY:5,BSON_DATA_UNDEFINED:6,BSON_DATA_OID:7,BSON_DATA_BOOLEAN:8,BSON_DATA_DATE:9,BSON_DATA_NULL:10,BSON_DATA_REGEXP:11,BSON_DATA_CODE:13,BSON_DATA_SYMBOL:14,BSON_DATA_CODE_W_SCOPE:15,BSON_DATA_INT:16,BSON_DATA_TIMESTAMP:17,BSON_DATA_LONG:18,BSON_DATA_DECIMAL128:19,BSON_DATA_MIN_KEY:255,BSON_DATA_MAX_KEY:127,BSON_BINARY_SUBTYPE_DEFAULT:0,BSON_BINARY_SUBTYPE_FUNCTION:1,BSON_BINARY_SUBTYPE_BYTE_ARRAY:2,BSON_BINARY_SUBTYPE_UUID:3,BSON_BINARY_SUBTYPE_MD5:4,BSON_BINARY_SUBTYPE_USER_DEFINED:128,BSON_INT32_MAX:2147483647,BSON_INT32_MIN:-2147483648};BSON$1.BSON_INT64_MAX=Math.pow(2,63)-1,BSON$1.BSON_INT64_MIN=-Math.pow(2,63),BSON$1.JS_INT_MAX=9007199254740992,BSON$1.JS_INT_MIN=-9007199254740992;var serializer=serializeInto,Buffer$6=buffer__WEBPACK_IMPORTED_MODULE_0___default.a.Buffer,Long$3=long_1.Long,Double$2=double_1.Double,Timestamp$2=timestamp.Timestamp,ObjectID$2=objectid.ObjectID,_Symbol$1=symbol.Symbol,BSONRegExp$2=regexp.BSONRegExp,Code$2=code.Code,MinKey$3=min_key.MinKey,MaxKey$2=max_key.MaxKey,DBRef$2=db_ref.DBRef,Binary$3=binary.Binary,normalizedFunctionString$2=utils.normalizedFunctionString,isDate$1=function(e){return"object"===(void 0===e?"undefined":_typeof(e))&&"[object Date]"===Object.prototype.toString.call(e)},calculateObjectSize=function(e,t,r){var n=5;if(Array.isArray(e))for(var i=0;i<e.length;i++)n+=calculateElement(i.toString(),e[i],t,!0,r);else for(var o in e.toBSON&&(e=e.toBSON()),e)n+=calculateElement(o,e[o],t,!1,r);return n};function calculateElement(e,t,r,n,i){switch(t&&t.toBSON&&(t=t.toBSON()),void 0===t?"undefined":_typeof(t)){case"string":return 1+Buffer$6.byteLength(e,"utf8")+1+4+Buffer$6.byteLength(t,"utf8")+1;case"number":return Math.floor(t)===t&&t>=BSON$2.JS_INT_MIN&&t<=BSON$2.JS_INT_MAX&&t>=BSON$2.BSON_INT32_MIN&&t<=BSON$2.BSON_INT32_MAX?(null!=e?Buffer$6.byteLength(e,"utf8")+1:0)+5:(null!=e?Buffer$6.byteLength(e,"utf8")+1:0)+9;case"undefined":return n||!i?(null!=e?Buffer$6.byteLength(e,"utf8")+1:0)+1:0;case"boolean":return(null!=e?Buffer$6.byteLength(e,"utf8")+1:0)+2;case"object":if(null==t||t instanceof MinKey$3||t instanceof MaxKey$2||"MinKey"===t._bsontype||"MaxKey"===t._bsontype)return(null!=e?Buffer$6.byteLength(e,"utf8")+1:0)+1;if(t instanceof ObjectID$2||"ObjectID"===t._bsontype)return(null!=e?Buffer$6.byteLength(e,"utf8")+1:0)+13;if(t instanceof Date||isDate$1(t))return(null!=e?Buffer$6.byteLength(e,"utf8")+1:0)+9;if(void 0!==Buffer$6&&Buffer$6.isBuffer(t))return(null!=e?Buffer$6.byteLength(e,"utf8")+1:0)+6+t.length;if(t instanceof Long$3||t instanceof Double$2||t instanceof Timestamp$2||"Long"===t._bsontype||"Double"===t._bsontype||"Timestamp"===t._bsontype)return(null!=e?Buffer$6.byteLength(e,"utf8")+1:0)+9;if(t instanceof decimal128||"Decimal128"===t._bsontype)return(null!=e?Buffer$6.byteLength(e,"utf8")+1:0)+17;if(t instanceof Code$2||"Code"===t._bsontype)return null!=t.scope&&Object.keys(t.scope).length>0?(null!=e?Buffer$6.byteLength(e,"utf8")+1:0)+1+4+4+Buffer$6.byteLength(t.code.toString(),"utf8")+1+calculateObjectSize(t.scope,r,i):(null!=e?Buffer$6.byteLength(e,"utf8")+1:0)+1+4+Buffer$6.byteLength(t.code.toString(),"utf8")+1;if(t instanceof Binary$3||"Binary"===t._bsontype)return t.sub_type===Binary$3.SUBTYPE_BYTE_ARRAY?(null!=e?Buffer$6.byteLength(e,"utf8")+1:0)+(t.position+1+4+1+4):(null!=e?Buffer$6.byteLength(e,"utf8")+1:0)+(t.position+1+4+1);if(t instanceof _Symbol$1||"Symbol"===t._bsontype)return(null!=e?Buffer$6.byteLength(e,"utf8")+1:0)+Buffer$6.byteLength(t.value,"utf8")+4+1+1;if(t instanceof DBRef$2||"DBRef"===t._bsontype){var o={$ref:t.collection,$id:t.oid};return null!=t.db&&(o.$db=t.db),o=Object.assign(o,t.fields),(null!=e?Buffer$6.byteLength(e,"utf8")+1:0)+1+calculateObjectSize(o,r,i)}return t instanceof RegExp||"[object RegExp]"===Object.prototype.toString.call(t)?(null!=e?Buffer$6.byteLength(e,"utf8")+1:0)+1+Buffer$6.byteLength(t.source,"utf8")+1+(t.global?1:0)+(t.ignoreCase?1:0)+(t.multiline?1:0)+1:t instanceof BSONRegExp$2||"BSONRegExp"===t._bsontype?(null!=e?Buffer$6.byteLength(e,"utf8")+1:0)+1+Buffer$6.byteLength(t.pattern,"utf8")+1+Buffer$6.byteLength(t.options,"utf8")+1:(null!=e?Buffer$6.byteLength(e,"utf8")+1:0)+calculateObjectSize(t,r,i)+1;case"function":if(t instanceof RegExp||"[object RegExp]"===Object.prototype.toString.call(t)||"[object RegExp]"===String.call(t))return(null!=e?Buffer$6.byteLength(e,"utf8")+1:0)+1+Buffer$6.byteLength(t.source,"utf8")+1+(t.global?1:0)+(t.ignoreCase?1:0)+(t.multiline?1:0)+1;if(r&&null!=t.scope&&Object.keys(t.scope).length>0)return(null!=e?Buffer$6.byteLength(e,"utf8")+1:0)+1+4+4+Buffer$6.byteLength(normalizedFunctionString$2(t),"utf8")+1+calculateObjectSize(t.scope,r,i);if(r)return(null!=e?Buffer$6.byteLength(e,"utf8")+1:0)+1+4+Buffer$6.byteLength(normalizedFunctionString$2(t),"utf8")+1}return 0}var BSON$2={BSON_INT32_MAX:2147483647,BSON_INT32_MIN:-2147483648,JS_INT_MAX:9007199254740992,JS_INT_MIN:-9007199254740992},calculate_size=calculateObjectSize,Buffer$7=buffer__WEBPACK_IMPORTED_MODULE_0___default.a.Buffer,ensure_buffer=function(e){if(e instanceof Buffer$7)return e;if(e instanceof Uint8Array)return new Buffer$7(e.buffer);throw new TypeError("Must use either Buffer or Uint8Array")},Buffer$8=buffer__WEBPACK_IMPORTED_MODULE_0___default.a.Buffer,MAXSIZE=17825792,buffer=new Buffer$8(MAXSIZE),BSON$3=function(){};BSON$3.prototype.serialize=function(e,t){var r="boolean"==typeof(t=t||{}).checkKeys&&t.checkKeys,n="boolean"==typeof t.serializeFunctions&&t.serializeFunctions,i="boolean"!=typeof t.ignoreUndefined||t.ignoreUndefined,o="number"==typeof t.minInternalBufferSize?t.minInternalBufferSize:MAXSIZE;buffer.length<o&&(buffer=new Buffer$8(o));var s=serializer(buffer,e,r,0,0,n,i,[]),u=new Buffer$8(s);return buffer.copy(u,0,0,u.length),u},BSON$3.prototype.serializeWithBufferAndIndex=function(e,t,r){var n="boolean"==typeof(r=r||{}).checkKeys&&r.checkKeys,i="boolean"==typeof r.serializeFunctions&&r.serializeFunctions,o="boolean"!=typeof r.ignoreUndefined||r.ignoreUndefined,s="number"==typeof r.index?r.index:0,u=serializer(buffer,e,n,0,0,i,o);return t=ensure_buffer(t),buffer.copy(t,s,0,u),s+u-1},BSON$3.prototype.deserialize=function(e,t){return e=ensure_buffer(e),deserializer(e,t)},BSON$3.prototype.calculateObjectSize=function(e,t){var r="boolean"==typeof(t=t||{}).serializeFunctions&&t.serializeFunctions,n="boolean"!=typeof t.ignoreUndefined||t.ignoreUndefined;return calculate_size(e,r,n)},BSON$3.prototype.deserializeStream=function(e,t,r,n,i,o){o=Object.assign({allowObjectSmallerThanBufferSize:!0},o),e=ensure_buffer(e);for(var s=t,u=0;u<r;u++){var a=e[s]|e[s+1]<<8|e[s+2]<<16|e[s+3]<<24;o.index=s,n[i+u]=this.deserialize(e,o),s+=a}return s},BSON$3.BSON_INT32_MAX=2147483647,BSON$3.BSON_INT32_MIN=-2147483648,BSON$3.BSON_INT64_MAX=Math.pow(2,63)-1,BSON$3.BSON_INT64_MIN=-Math.pow(2,63),BSON$3.JS_INT_MAX=9007199254740992,BSON$3.JS_INT_MIN=-9007199254740992,BSON$3.BSON_DATA_NUMBER=1,BSON$3.BSON_DATA_STRING=2,BSON$3.BSON_DATA_OBJECT=3,BSON$3.BSON_DATA_ARRAY=4,BSON$3.BSON_DATA_BINARY=5,BSON$3.BSON_DATA_OID=7,BSON$3.BSON_DATA_BOOLEAN=8,BSON$3.BSON_DATA_DATE=9,BSON$3.BSON_DATA_NULL=10,BSON$3.BSON_DATA_REGEXP=11,BSON$3.BSON_DATA_CODE=13,BSON$3.BSON_DATA_SYMBOL=14,BSON$3.BSON_DATA_CODE_W_SCOPE=15,BSON$3.BSON_DATA_INT=16,BSON$3.BSON_DATA_TIMESTAMP=17,BSON$3.BSON_DATA_LONG=18,BSON$3.BSON_DATA_MIN_KEY=255,BSON$3.BSON_DATA_MAX_KEY=127,BSON$3.BSON_BINARY_SUBTYPE_DEFAULT=0,BSON$3.BSON_BINARY_SUBTYPE_FUNCTION=1,BSON$3.BSON_BINARY_SUBTYPE_BYTE_ARRAY=2,BSON$3.BSON_BINARY_SUBTYPE_UUID=3,BSON$3.BSON_BINARY_SUBTYPE_MD5=4,BSON$3.BSON_BINARY_SUBTYPE_USER_DEFINED=128;var bson=BSON$3,Code_1$1=code,Map_1=map,Symbol_1$1=symbol,BSON_1=BSON$3,DBRef_1$1=db_ref,Binary_1$1=binary,ObjectId$1=objectid,ObjectID_1$1=objectid,Long_1$1=long_1,Timestamp_1$1=timestamp,Double_1$1=double_1,Int32_1$1=int_32,MinKey_1$1=min_key,MaxKey_1$1=max_key,BSONRegExp_1$1=regexp,Decimal128_1$1=decimal128;bson.Code=Code_1$1,bson.Map=Map_1,bson.Symbol=Symbol_1$1,bson.BSON=BSON_1,bson.DBRef=DBRef_1$1,bson.Binary=Binary_1$1,bson.ObjectId=ObjectId$1,bson.ObjectID=ObjectID_1$1,bson.Long=Long_1$1,bson.Timestamp=Timestamp_1$1,bson.Double=Double_1$1,bson.Int32=Int32_1$1,bson.MinKey=MinKey_1$1,bson.MaxKey=MaxKey_1$1,bson.BSONRegExp=BSONRegExp_1$1,bson.Decimal128=Decimal128_1$1;var jsBson=bson;__webpack_exports__.a=jsBson}).call(this,__webpack_require__(3),__webpack_require__(4))},function(e,t){var r;r=function(){return this}();try{r=r||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(r=window)}e.exports=r},function(e,t){var r,n,i=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function u(e){if(r===setTimeout)return setTimeout(e,0);if((r===o||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:o}catch(e){r=o}try{n="function"==typeof clearTimeout?clearTimeout:s}catch(e){n=s}}();var a,f=[],c=!1,l=-1;function h(){c&&a&&(c=!1,a.length?f=a.concat(f):l=-1,f.length&&p())}function p(){if(!c){var e=u(h);c=!0;for(var t=f.length;t;){for(a=f,f=[];++l<t;)a&&a[l].run();l=-1,t=f.length}a=null,c=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===s||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function _(e,t){this.fun=e,this.array=t}function d(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];f.push(new _(e,t)),1!==f.length||c||u(p)},_.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=d,i.addListener=d,i.once=d,i.off=d,i.removeListener=d,i.removeAllListeners=d,i.emit=d,i.prependListener=d,i.prependOnceListener=d,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(module,__webpack_exports__,__webpack_require__){"use strict";(function(global,process){var buffer__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),buffer__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(buffer__WEBPACK_IMPORTED_MODULE_0__),commonjsGlobal="undefined"!=typeof window?window:void 0!==global?global:"undefined"!=typeof self?self:{};function createCommonjsModule(e,t){return e(t={exports:{}},t.exports),t.exports}var map=createCommonjsModule(function(e){buffer__WEBPACK_IMPORTED_MODULE_0___default.a.Buffer;if(void 0!==commonjsGlobal.Map)e.exports=commonjsGlobal.Map,e.exports.Map=commonjsGlobal.Map;else{var t=function(e){this._keys=[],this._values={};for(var t=0;t<e.length;t++)if(null!=e[t]){var r=e[t],n=r[0],i=r[1];this._keys.push(n),this._values[n]={v:i,i:this._keys.length-1}}};t.prototype.clear=function(){this._keys=[],this._values={}},t.prototype.delete=function(e){var t=this._values[e];return null!=t&&(delete this._values[e],this._keys.splice(t.i,1),!0)},t.prototype.entries=function(){var e=this,t=0;return{next:function(){var r=e._keys[t++];return{value:void 0!==r?[r,e._values[r].v]:void 0,done:void 0===r}}}},t.prototype.forEach=function(e,t){t=t||this;for(var r=0;r<this._keys.length;r++){var n=this._keys[r];e.call(t,this._values[n].v,n,t)}},t.prototype.get=function(e){return this._values[e]?this._values[e].v:void 0},t.prototype.has=function(e){return null!=this._values[e]},t.prototype.keys=function(){var e=this,t=0;return{next:function(){var r=e._keys[t++];return{value:void 0!==r?r:void 0,done:void 0===r}}}},t.prototype.set=function(e,t){return this._values[e]?(this._values[e].v=t,this):(this._keys.push(e),this._values[e]={v:t,i:this._keys.length-1},this)},t.prototype.values=function(){var e=this,t=0;return{next:function(){var r=e._keys[t++];return{value:void 0!==r?e._values[r].v:void 0,done:void 0===r}}}},Object.defineProperty(t.prototype,"size",{enumerable:!0,get:function(){return this._keys.length}}),e.exports=t,e.exports.Map=t}}),map_1=map.Map;function Long(e,t){if(!(this instanceof Long))return new Long(e,t);this._bsontype="Long",this.low_=0|e,this.high_=0|t}Long.prototype.toInt=function(){return this.low_},Long.prototype.toNumber=function(){return this.high_*Long.TWO_PWR_32_DBL_+this.getLowBitsUnsigned()},Long.prototype.toJSON=function(){return this.toString()},Long.prototype.toString=function(e){var t=e||10;if(t<2||36<t)throw Error("radix out of range: "+t);if(this.isZero())return"0";if(this.isNegative()){if(this.equals(Long.MIN_VALUE)){var r=Long.fromNumber(t),n=this.div(r),i=n.multiply(r).subtract(this);return n.toString(t)+i.toInt().toString(t)}return"-"+this.negate().toString(t)}var o=Long.fromNumber(Math.pow(t,6));i=this;for(var s="";!i.isZero();){var u=i.div(o),a=i.subtract(u.multiply(o)).toInt().toString(t);if((i=u).isZero())return a+s;for(;a.length<6;)a="0"+a;s=""+a+s}},Long.prototype.getHighBits=function(){return this.high_},Long.prototype.getLowBits=function(){return this.low_},Long.prototype.getLowBitsUnsigned=function(){return this.low_>=0?this.low_:Long.TWO_PWR_32_DBL_+this.low_},Long.prototype.getNumBitsAbs=function(){if(this.isNegative())return this.equals(Long.MIN_VALUE)?64:this.negate().getNumBitsAbs();for(var e=0!==this.high_?this.high_:this.low_,t=31;t>0&&0==(e&1<<t);t--);return 0!==this.high_?t+33:t+1},Long.prototype.isZero=function(){return 0===this.high_&&0===this.low_},Long.prototype.isNegative=function(){return this.high_<0},Long.prototype.isOdd=function(){return 1==(1&this.low_)},Long.prototype.equals=function(e){return this.high_===e.high_&&this.low_===e.low_},Long.prototype.notEquals=function(e){return this.high_!==e.high_||this.low_!==e.low_},Long.prototype.lessThan=function(e){return this.compare(e)<0},Long.prototype.lessThanOrEqual=function(e){return this.compare(e)<=0},Long.prototype.greaterThan=function(e){return this.compare(e)>0},Long.prototype.greaterThanOrEqual=function(e){return this.compare(e)>=0},Long.prototype.compare=function(e){if(this.equals(e))return 0;var t=this.isNegative(),r=e.isNegative();return t&&!r?-1:!t&&r?1:this.subtract(e).isNegative()?-1:1},Long.prototype.negate=function(){return this.equals(Long.MIN_VALUE)?Long.MIN_VALUE:this.not().add(Long.ONE)},Long.prototype.add=function(e){var t=this.high_>>>16,r=65535&this.high_,n=this.low_>>>16,i=65535&this.low_,o=e.high_>>>16,s=65535&e.high_,u=e.low_>>>16,a=0,f=0,c=0,l=0;return c+=(l+=i+(65535&e.low_))>>>16,l&=65535,f+=(c+=n+u)>>>16,c&=65535,a+=(f+=r+s)>>>16,f&=65535,a+=t+o,a&=65535,Long.fromBits(c<<16|l,a<<16|f)},Long.prototype.subtract=function(e){return this.add(e.negate())},Long.prototype.multiply=function(e){if(this.isZero())return Long.ZERO;if(e.isZero())return Long.ZERO;if(this.equals(Long.MIN_VALUE))return e.isOdd()?Long.MIN_VALUE:Long.ZERO;if(e.equals(Long.MIN_VALUE))return this.isOdd()?Long.MIN_VALUE:Long.ZERO;if(this.isNegative())return e.isNegative()?this.negate().multiply(e.negate()):this.negate().multiply(e).negate();if(e.isNegative())return this.multiply(e.negate()).negate();if(this.lessThan(Long.TWO_PWR_24_)&&e.lessThan(Long.TWO_PWR_24_))return Long.fromNumber(this.toNumber()*e.toNumber());var t=this.high_>>>16,r=65535&this.high_,n=this.low_>>>16,i=65535&this.low_,o=e.high_>>>16,s=65535&e.high_,u=e.low_>>>16,a=65535&e.low_,f=0,c=0,l=0,h=0;return l+=(h+=i*a)>>>16,h&=65535,c+=(l+=n*a)>>>16,l&=65535,c+=(l+=i*u)>>>16,l&=65535,f+=(c+=r*a)>>>16,c&=65535,f+=(c+=n*u)>>>16,c&=65535,f+=(c+=i*s)>>>16,c&=65535,f+=t*a+r*u+n*s+i*o,f&=65535,Long.fromBits(l<<16|h,f<<16|c)},Long.prototype.div=function(e){if(e.isZero())throw Error("division by zero");if(this.isZero())return Long.ZERO;if(this.equals(Long.MIN_VALUE)){if(e.equals(Long.ONE)||e.equals(Long.NEG_ONE))return Long.MIN_VALUE;if(e.equals(Long.MIN_VALUE))return Long.ONE;var t=this.shiftRight(1).div(e).shiftLeft(1);if(t.equals(Long.ZERO))return e.isNegative()?Long.ONE:Long.NEG_ONE;var r=this.subtract(e.multiply(t));return t.add(r.div(e))}if(e.equals(Long.MIN_VALUE))return Long.ZERO;if(this.isNegative())return e.isNegative()?this.negate().div(e.negate()):this.negate().div(e).negate();if(e.isNegative())return this.div(e.negate()).negate();var n=Long.ZERO;for(r=this;r.greaterThanOrEqual(e);){t=Math.max(1,Math.floor(r.toNumber()/e.toNumber()));for(var i=Math.ceil(Math.log(t)/Math.LN2),o=i<=48?1:Math.pow(2,i-48),s=Long.fromNumber(t),u=s.multiply(e);u.isNegative()||u.greaterThan(r);)t-=o,u=(s=Long.fromNumber(t)).multiply(e);s.isZero()&&(s=Long.ONE),n=n.add(s),r=r.subtract(u)}return n},Long.prototype.modulo=function(e){return this.subtract(this.div(e).multiply(e))},Long.prototype.not=function(){return Long.fromBits(~this.low_,~this.high_)},Long.prototype.and=function(e){return Long.fromBits(this.low_&e.low_,this.high_&e.high_)},Long.prototype.or=function(e){return Long.fromBits(this.low_|e.low_,this.high_|e.high_)},Long.prototype.xor=function(e){return Long.fromBits(this.low_^e.low_,this.high_^e.high_)},Long.prototype.shiftLeft=function(e){if(0===(e&=63))return this;var t=this.low_;if(e<32){var r=this.high_;return Long.fromBits(t<<e,r<<e|t>>>32-e)}return Long.fromBits(0,t<<e-32)},Long.prototype.shiftRight=function(e){if(0===(e&=63))return this;var t=this.high_;if(e<32){var r=this.low_;return Long.fromBits(r>>>e|t<<32-e,t>>e)}return Long.fromBits(t>>e-32,t>=0?0:-1)},Long.prototype.shiftRightUnsigned=function(e){if(0===(e&=63))return this;var t=this.high_;if(e<32){var r=this.low_;return Long.fromBits(r>>>e|t<<32-e,t>>>e)}return 32===e?Long.fromBits(t,0):Long.fromBits(t>>>e-32,0)},Long.fromInt=function(e){if(-128<=e&&e<128){var t=Long.INT_CACHE_[e];if(t)return t}var r=new Long(0|e,e<0?-1:0);return-128<=e&&e<128&&(Long.INT_CACHE_[e]=r),r},Long.fromNumber=function(e){return isNaN(e)||!isFinite(e)?Long.ZERO:e<=-Long.TWO_PWR_63_DBL_?Long.MIN_VALUE:e+1>=Long.TWO_PWR_63_DBL_?Long.MAX_VALUE:e<0?Long.fromNumber(-e).negate():new Long(e%Long.TWO_PWR_32_DBL_|0,e/Long.TWO_PWR_32_DBL_|0)},Long.fromBits=function(e,t){return new Long(e,t)},Long.fromString=function(e,t){if(0===e.length)throw Error("number format error: empty string");var r=t||10;if(r<2||36<r)throw Error("radix out of range: "+r);if("-"===e.charAt(0))return Long.fromString(e.substring(1),r).negate();if(e.indexOf("-")>=0)throw Error('number format error: interior "-" character: '+e);for(var n=Long.fromNumber(Math.pow(r,8)),i=Long.ZERO,o=0;o<e.length;o+=8){var s=Math.min(8,e.length-o),u=parseInt(e.substring(o,o+s),r);if(s<8){var a=Long.fromNumber(Math.pow(r,s));i=i.multiply(a).add(Long.fromNumber(u))}else i=(i=i.multiply(n)).add(Long.fromNumber(u))}return i},Long.INT_CACHE_={},Long.TWO_PWR_16_DBL_=65536,Long.TWO_PWR_24_DBL_=1<<24,Long.TWO_PWR_32_DBL_=Long.TWO_PWR_16_DBL_*Long.TWO_PWR_16_DBL_,Long.TWO_PWR_31_DBL_=Long.TWO_PWR_32_DBL_/2,Long.TWO_PWR_48_DBL_=Long.TWO_PWR_32_DBL_*Long.TWO_PWR_16_DBL_,Long.TWO_PWR_64_DBL_=Long.TWO_PWR_32_DBL_*Long.TWO_PWR_32_DBL_,Long.TWO_PWR_63_DBL_=Long.TWO_PWR_64_DBL_/2,Long.ZERO=Long.fromInt(0),Long.ONE=Long.fromInt(1),Long.NEG_ONE=Long.fromInt(-1),Long.MAX_VALUE=Long.fromBits(-1,2147483647),Long.MIN_VALUE=Long.fromBits(0,-2147483648),Long.TWO_PWR_24_=Long.fromInt(1<<24);var long_1=Long,Long_1=Long;function Double(e){if(!(this instanceof Double))return new Double(e);this._bsontype="Double",this.value=e}long_1.Long=Long_1,Double.prototype.valueOf=function(){return this.value},Double.prototype.toJSON=function(){return this.value};var double_1=Double,Double_1=Double;function Timestamp(e,t){e instanceof long_1?long_1.call(this,e.low_,e.high_):long_1.call(this,e,t),this._bsontype="Timestamp"}double_1.Double=Double_1,Timestamp.prototype=Object.create(long_1.prototype),Timestamp.prototype.constructor=Timestamp,Timestamp.prototype.toJSON=function(){return{$timestamp:this.toString()}},Timestamp.fromInt=function(e){return new Timestamp(long_1.fromInt(e))},Timestamp.fromNumber=function(e){return new Timestamp(long_1.fromNumber(e))},Timestamp.fromBits=function(e,t){return new Timestamp(e,t)},Timestamp.fromString=function(e,t){return new Timestamp(long_1.fromString(e,t))};var timestamp=Timestamp,Timestamp_1=Timestamp,_endianness;function endianness(){if(void 0===_endianness){var e=new ArrayBuffer(2),t=new Uint8Array(e),r=new Uint16Array(e);if(t[0]=1,t[1]=2,258===r[0])_endianness="BE";else{if(513!==r[0])throw new Error("unable to figure out endianess");_endianness="LE"}}return _endianness}function hostname(){return void 0!==global.location?global.location.hostname:""}function loadavg(){return[]}function uptime(){return 0}function freemem(){return Number.MAX_VALUE}function totalmem(){return Number.MAX_VALUE}function cpus(){return[]}function type(){return"Browser"}function release(){return void 0!==global.navigator?global.navigator.appVersion:""}function networkInterfaces(){}function getNetworkInterfaces(){}function arch(){return"javascript"}function platform(){return"browser"}function tmpDir(){return"/tmp"}timestamp.Timestamp=Timestamp_1;var tmpdir=tmpDir,EOL="\n",os={EOL:EOL,tmpdir:tmpdir,tmpDir:tmpDir,networkInterfaces:networkInterfaces,getNetworkInterfaces:getNetworkInterfaces,release:release,type:type,cpus:cpus,totalmem:totalmem,freemem:freemem,uptime:uptime,loadavg:loadavg,hostname:hostname,endianness:endianness},os$1=Object.freeze({endianness:endianness,hostname:hostname,loadavg:loadavg,uptime:uptime,freemem:freemem,totalmem:totalmem,cpus:cpus,type:type,release:release,networkInterfaces:networkInterfaces,getNetworkInterfaces:getNetworkInterfaces,arch:arch,platform:platform,tmpDir:tmpDir,tmpdir:tmpdir,EOL:EOL,default:os}),Buffer=buffer__WEBPACK_IMPORTED_MODULE_0___default.a.Buffer,MASK_8=255,MASK_24=16777215,MASK_32=4294967295,FNV_PRIME=new long_1(16777619,0),OFFSET_BASIS=new long_1(2166136261,0),FNV_MASK=new long_1(MASK_32,0);function fnv1a32(e,t){t=t||"utf8";for(var r=Buffer.from(e,t),n=OFFSET_BASIS,i=0;i<r.length;i+=1)n=(n=(n=n.xor(new long_1(r[i],0))).multiply(FNV_PRIME)).and(FNV_MASK);return n.getLowBitsUnsigned()}function fnv1a24(e,t){var r=fnv1a32(e,t);return(r&MASK_24^r>>>24&MASK_8)&MASK_24}var fnv1a={fnv1a24:fnv1a24,fnv1a32:fnv1a32},require$$1=os$1&&os||os$1,Buffer$1=buffer__WEBPACK_IMPORTED_MODULE_0___default.a.Buffer,hostname$1=require$$1.hostname,fnv1a24$1=fnv1a.fnv1a24,MACHINE_ID=fnv1a24$1(hostname$1),checkForHexRegExp=new RegExp("^[0-9a-fA-F]{24}$"),hasBufferType=!1;try{Buffer$1&&Buffer$1.from&&(hasBufferType=!0)}catch(e){hasBufferType=!1}function ObjectID(e){if(e instanceof ObjectID)return e;if(!(this instanceof ObjectID))return new ObjectID(e);if(this._bsontype="ObjectID",null==e||"number"==typeof e)return this.id=this.generate(e),void(ObjectID.cacheHexString&&(this.__id=this.toString("hex")));var t=ObjectID.isValid(e);if(!t&&null!=e)throw new TypeError("Argument passed in must be a single String of 12 bytes or a string of 24 hex characters");if(t&&"string"==typeof e&&24===e.length&&hasBufferType)return new ObjectID(new Buffer$1(e,"hex"));if(t&&"string"==typeof e&&24===e.length)return ObjectID.createFromHexString(e);if(null==e||12!==e.length){if(null!=e&&e.toHexString)return e;throw new TypeError("Argument passed in must be a single String of 12 bytes or a string of 24 hex characters")}this.id=e,ObjectID.cacheHexString&&(this.__id=this.toString("hex"))}for(var hexTable=[],i=0;i<256;i++)hexTable[i]=(i<=15?"0":"")+i.toString(16);ObjectID.prototype.toHexString=function(){if(ObjectID.cacheHexString&&this.__id)return this.__id;var e="";if(!this.id||!this.id.length)throw new TypeError("invalid ObjectId, ObjectId.id must be either a string or a Buffer, but is ["+JSON.stringify(this.id)+"]");if(this.id instanceof _Buffer)return e=convertToHex(this.id),ObjectID.cacheHexString&&(this.__id=e),e;for(var t=0;t<this.id.length;t++)e+=hexTable[this.id.charCodeAt(t)];return ObjectID.cacheHexString&&(this.__id=e),e},ObjectID.prototype.get_inc=function(){return ObjectID.index=(ObjectID.index+1)%16777215},ObjectID.prototype.getInc=function(){return this.get_inc()},ObjectID.prototype.generate=function(e){"number"!=typeof e&&(e=~~(Date.now()/1e3));var t=(void 0===process||1===process.pid?Math.floor(1e5*Math.random()):process.pid)%65535,r=this.get_inc(),n=new Buffer$1(12);return n[3]=255&e,n[2]=e>>8&255,n[1]=e>>16&255,n[0]=e>>24&255,n[6]=255&MACHINE_ID,n[5]=MACHINE_ID>>8&255,n[4]=MACHINE_ID>>16&255,n[8]=255&t,n[7]=t>>8&255,n[11]=255&r,n[10]=r>>8&255,n[9]=r>>16&255,n},ObjectID.prototype.toString=function(e){return this.id&&this.id.copy?this.id.toString("string"==typeof e?e:"hex"):this.toHexString()},ObjectID.prototype.inspect=ObjectID.prototype.toString,ObjectID.prototype.toJSON=function(){return this.toHexString()},ObjectID.prototype.equals=function(e){return e instanceof ObjectID?this.toString()===e.toString():"string"==typeof e&&ObjectID.isValid(e)&&12===e.length&&this.id instanceof _Buffer?e===this.id.toString("binary"):"string"==typeof e&&ObjectID.isValid(e)&&24===e.length?e.toLowerCase()===this.toHexString():"string"==typeof e&&ObjectID.isValid(e)&&12===e.length?e===this.id:!(null==e||!(e instanceof ObjectID||e.toHexString))&&e.toHexString()===this.toHexString()},ObjectID.prototype.getTimestamp=function(){var e=new Date,t=this.id[3]|this.id[2]<<8|this.id[1]<<16|this.id[0]<<24;return e.setTime(1e3*Math.floor(t)),e},ObjectID.index=~~(16777215*Math.random()),ObjectID.createPk=function(){return new ObjectID},ObjectID.createFromTime=function(e){var t=new Buffer$1([0,0,0,0,0,0,0,0,0,0,0,0]);return t[3]=255&e,t[2]=e>>8&255,t[1]=e>>16&255,t[0]=e>>24&255,new ObjectID(t)};var decodeLookup=[];for(i=0;i<10;)decodeLookup[48+i]=i++;for(;i<16;)decodeLookup[55+i]=decodeLookup[87+i]=i++;var _Buffer=Buffer$1,convertToHex=function(e){return e.toString("hex")};ObjectID.createFromHexString=function(e){if(void 0===e||null!=e&&24!==e.length)throw new TypeError("Argument passed in must be a single String of 12 bytes or a string of 24 hex characters");if(hasBufferType)return new ObjectID(new Buffer$1(e,"hex"));for(var t=new _Buffer(12),r=0,n=0;n<24;)t[r++]=decodeLookup[e.charCodeAt(n++)]<<4|decodeLookup[e.charCodeAt(n++)];return new ObjectID(t)},ObjectID.isValid=function(e){return null!=e&&("number"==typeof e||("string"==typeof e?12===e.length||24===e.length&&checkForHexRegExp.test(e):e instanceof ObjectID||(e instanceof _Buffer||!!e.toHexString&&(12===e.id.length||24===e.id.length&&checkForHexRegExp.test(e.id)))))},Object.defineProperty(ObjectID.prototype,"generationTime",{enumerable:!0,get:function(){return this.id[3]|this.id[2]<<8|this.id[1]<<16|this.id[0]<<24},set:function(e){this.id[3]=255&e,this.id[2]=e>>8&255,this.id[1]=e>>16&255,this.id[0]=e>>24&255}});var objectid=ObjectID,ObjectID_1=ObjectID,ObjectId=ObjectID;function alphabetize(e){return e.split("").sort().join("")}function BSONRegExp(e,t){if(!(this instanceof BSONRegExp))return new BSONRegExp(e,t);this._bsontype="BSONRegExp",this.pattern=e||"",this.options=t?alphabetize(t):"";for(var r=0;r<this.options.length;r++)if("i"!==this.options[r]&&"m"!==this.options[r]&&"x"!==this.options[r]&&"l"!==this.options[r]&&"s"!==this.options[r]&&"u"!==this.options[r])throw new Error("the regular expression options ["+this.options[r]+"] is not supported")}objectid.ObjectID=ObjectID_1,objectid.ObjectId=ObjectId;var regexp=BSONRegExp,BSONRegExp_1=BSONRegExp;function _Symbol(e){if(!(this instanceof _Symbol))return new _Symbol(e);this._bsontype="Symbol",this.value=e}regexp.BSONRegExp=BSONRegExp_1,_Symbol.prototype.valueOf=function(){return this.value},_Symbol.prototype.toString=function(){return this.value},_Symbol.prototype.inspect=function(){return this.value},_Symbol.prototype.toJSON=function(){return this.value};var symbol=_Symbol,Symbol_1=_Symbol;function Int32(e){if(!(this instanceof Int32))return new Int32(e);this._bsontype="Int32",this.value=e}symbol.Symbol=Symbol_1,Int32.prototype.valueOf=function(){return this.value},Int32.prototype.toJSON=function(){return this.value};var int_32=Int32,Int32_1=Int32;function Code(e,t){if(!(this instanceof Code))return new Code(e,t);this._bsontype="Code",this.code=e,this.scope=t}int_32.Int32=Int32_1,Code.prototype.toJSON=function(){return{scope:this.scope,code:this.code}};var code=Code,Code_1=Code;code.Code=Code_1;var Buffer$2=buffer__WEBPACK_IMPORTED_MODULE_0___default.a.Buffer,PARSE_STRING_REGEXP=/^(\+|-)?(\d+|(\d*\.\d*))?(E|e)?([-+])?(\d+)?$/,PARSE_INF_REGEXP=/^(\+|-)?(Infinity|inf)$/i,PARSE_NAN_REGEXP=/^(\+|-)?NaN$/i,EXPONENT_MAX=6111,EXPONENT_MIN=-6176,EXPONENT_BIAS=6176,MAX_DIGITS=34,NAN_BUFFER=[124,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse(),INF_NEGATIVE_BUFFER=[248,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse(),INF_POSITIVE_BUFFER=[120,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse(),EXPONENT_REGEX=/^([-+])?(\d+)?$/,isDigit=function(e){return!isNaN(parseInt(e,10))},divideu128=function(e){var t=long_1.fromNumber(1e9),r=long_1.fromNumber(0);if(!(e.parts[0]||e.parts[1]||e.parts[2]||e.parts[3]))return{quotient:e,rem:r};for(var n=0;n<=3;n++)r=(r=r.shiftLeft(32)).add(new long_1(e.parts[n],0)),e.parts[n]=r.div(t).low_,r=r.modulo(t);return{quotient:e,rem:r}},multiply64x2=function(e,t){if(!e&&!t)return{high:long_1.fromNumber(0),low:long_1.fromNumber(0)};var r=e.shiftRightUnsigned(32),n=new long_1(e.getLowBits(),0),i=t.shiftRightUnsigned(32),o=new long_1(t.getLowBits(),0),s=r.multiply(i),u=r.multiply(o),a=n.multiply(i),f=n.multiply(o);return s=s.add(u.shiftRightUnsigned(32)),u=new long_1(u.getLowBits(),0).add(a).add(f.shiftRightUnsigned(32)),{high:s=s.add(u.shiftRightUnsigned(32)),low:f=u.shiftLeft(32).add(new long_1(f.getLowBits(),0))}},lessThan=function(e,t){var r=e.high_>>>0,n=t.high_>>>0;return r<n||r===n&&e.low_>>>0<t.low_>>>0},invalidErr=function(e,t){throw new TypeError('"${string}" not a valid Decimal128 string - '+t)};function Decimal128(e){this._bsontype="Decimal128",this.bytes=e}Decimal128.fromString=function(e){var t,r=!1,n=!1,i=!1,o=0,s=0,u=0,a=0,f=0,c=[0],l=0,h=0,p=0,_=0,d=0,y=0,g=[0,0],b=[0,0],N=0;if(e.length>=7e3)throw new TypeError(e+" not a valid Decimal128 string");var B=e.match(PARSE_STRING_REGEXP),O=e.match(PARSE_INF_REGEXP),m=e.match(PARSE_NAN_REGEXP);if(!B&&!O&&!m||0===e.length)throw new TypeError(e+" not a valid Decimal128 string");if(B){var E=B[2],S=B[4],A=B[5],w=B[6];S&&void 0===w&&invalidErr(e,"missing exponent power"),S&&void 0===E&&invalidErr(e,"missing exponent base"),void 0===S&&(A||w)&&invalidErr(e,"missing e before exponent")}if("+"!==e[N]&&"-"!==e[N]||(r="-"===e[N++]),!isDigit(e[N])&&"."!==e[N]){if("i"===e[N]||"I"===e[N])return new Decimal128(new Buffer$2(r?INF_NEGATIVE_BUFFER:INF_POSITIVE_BUFFER));if("N"===e[N])return new Decimal128(new Buffer$2(NAN_BUFFER))}for(;isDigit(e[N])||"."===e[N];)"."!==e[N]?(l<34&&("0"!==e[N]||i)&&(i||(f=s),i=!0,c[h++]=parseInt(e[N],10),l+=1),i&&(u+=1),n&&(a+=1),s+=1,N+=1):(n&&invalidErr(e,"contains multiple periods"),n=!0,N+=1);if(n&&!s)throw new TypeError(e+" not a valid Decimal128 string");if("e"===e[N]||"E"===e[N]){var v=e.substr(++N).match(EXPONENT_REGEX);if(!v||!v[2])return new Decimal128(new Buffer$2(NAN_BUFFER));d=parseInt(v[0],10),N+=v[0].length}if(e[N])return new Decimal128(new Buffer$2(NAN_BUFFER));if(p=0,l){if(_=l-1,1!==(o=u))for(;"0"===e[f+o-1];)o-=1}else p=0,_=0,c[0]=0,u=1,l=1,o=0;for(d<=a&&a-d>16384?d=EXPONENT_MIN:d-=a;d>EXPONENT_MAX;){if((_+=1)-p>MAX_DIGITS){var T=c.join("");if(T.match(/^0+$/)){d=EXPONENT_MAX;break}invalidErr(e,"overflow")}d-=1}for(;d<EXPONENT_MIN||l<u;){if(0===_&&o<l){d=EXPONENT_MIN,o=0;break}if(l<u?u-=1:_-=1,d<EXPONENT_MAX)d+=1;else{if((T=c.join("")).match(/^0+$/)){d=EXPONENT_MAX;break}invalidErr(e,"overflow")}}if(_-p+1<o){var I=s;n&&(f+=1,I+=1),r&&(f+=1,I+=1);var D=parseInt(e[f+_+1],10),R=0;if(D>=5&&(R=1,5===D))for(R=c[_]%2==1,y=f+_+2;y<I;y++)if(parseInt(e[y],10)){R=1;break}if(R)for(var L=_;L>=0;L--)if(++c[L]>9&&(c[L]=0,0===L)){if(!(d<EXPONENT_MAX))return new Decimal128(new Buffer$2(r?INF_NEGATIVE_BUFFER:INF_POSITIVE_BUFFER));d+=1,c[L]=1}}if(g=long_1.fromNumber(0),b=long_1.fromNumber(0),0===o)g=long_1.fromNumber(0),b=long_1.fromNumber(0);else if(_-p<17)for(L=p,b=long_1.fromNumber(c[L++]),g=new long_1(0,0);L<=_;L++)b=(b=b.multiply(long_1.fromNumber(10))).add(long_1.fromNumber(c[L]));else{for(L=p,g=long_1.fromNumber(c[L++]);L<=_-17;L++)g=(g=g.multiply(long_1.fromNumber(10))).add(long_1.fromNumber(c[L]));for(b=long_1.fromNumber(c[L++]);L<=_;L++)b=(b=b.multiply(long_1.fromNumber(10))).add(long_1.fromNumber(c[L]))}var $=multiply64x2(g,long_1.fromString("100000000000000000"));$.low=$.low.add(b),lessThan($.low,b)&&($.high=$.high.add(long_1.fromNumber(1))),t=d+EXPONENT_BIAS;var M={low:long_1.fromNumber(0),high:long_1.fromNumber(0)};$.high.shiftRightUnsigned(49).and(long_1.fromNumber(1)).equals(long_1.fromNumber)?(M.high=M.high.or(long_1.fromNumber(3).shiftLeft(61)),M.high=M.high.or(long_1.fromNumber(t).and(long_1.fromNumber(16383).shiftLeft(47))),M.high=M.high.or($.high.and(long_1.fromNumber(0x7fffffffffff)))):(M.high=M.high.or(long_1.fromNumber(16383&t).shiftLeft(49)),M.high=M.high.or($.high.and(long_1.fromNumber(562949953421311)))),M.low=$.low,r&&(M.high=M.high.or(long_1.fromString("9223372036854775808")));var P=new Buffer$2(16);return N=0,P[N++]=255&M.low.low_,P[N++]=M.low.low_>>8&255,P[N++]=M.low.low_>>16&255,P[N++]=M.low.low_>>24&255,P[N++]=255&M.low.high_,P[N++]=M.low.high_>>8&255,P[N++]=M.low.high_>>16&255,P[N++]=M.low.high_>>24&255,P[N++]=255&M.high.low_,P[N++]=M.high.low_>>8&255,P[N++]=M.high.low_>>16&255,P[N++]=M.high.low_>>24&255,P[N++]=255&M.high.high_,P[N++]=M.high.high_>>8&255,P[N++]=M.high.high_>>16&255,P[N++]=M.high.high_>>24&255,new Decimal128(P)};var COMBINATION_MASK=31,EXPONENT_MASK=16383,COMBINATION_INFINITY=30,COMBINATION_NAN=31;EXPONENT_BIAS=6176,Decimal128.prototype.toString=function(){for(var e,t,r,n,i,o,s=0,u=new Array(36),a=0;a<u.length;a++)u[a]=0;var f,c,l,h,p,_=0,d=!1,y={parts:new Array(4)},g=[];_=0;var b=this.bytes;if(n=b[_++]|b[_++]<<8|b[_++]<<16|b[_++]<<24,r=b[_++]|b[_++]<<8|b[_++]<<16|b[_++]<<24,t=b[_++]|b[_++]<<8|b[_++]<<16|b[_++]<<24,e=b[_++]|b[_++]<<8|b[_++]<<16|b[_++]<<24,_=0,{low:new long_1(n,r),high:new long_1(t,e)}.high.lessThan(long_1.ZERO)&&g.push("-"),(i=e>>26&COMBINATION_MASK)>>3==3){if(i===COMBINATION_INFINITY)return g.join("")+"Infinity";if(i===COMBINATION_NAN)return"NaN";o=e>>15&EXPONENT_MASK,l=8+(e>>14&1)}else l=e>>14&7,o=e>>17&EXPONENT_MASK;if(f=o-EXPONENT_BIAS,y.parts[0]=(16383&e)+((15&l)<<14),y.parts[1]=t,y.parts[2]=r,y.parts[3]=n,0===y.parts[0]&&0===y.parts[1]&&0===y.parts[2]&&0===y.parts[3])d=!0;else for(p=3;p>=0;p--){var N=0,B=divideu128(y);if(y=B.quotient,N=B.rem.low_)for(h=8;h>=0;h--)u[9*p+h]=N%10,N=Math.floor(N/10)}if(d)s=1,u[_]=0;else for(s=36,a=0;!u[_];)a++,s-=1,_+=1;if((c=s-1+f)>=34||c<=-7||f>0){if(s>34)return g.push(0),f>0?g.push("E+"+f):f<0&&g.push("E"+f),g.join("");for(g.push(u[_++]),(s-=1)&&g.push("."),a=0;a<s;a++)g.push(u[_++]);g.push("E"),c>0?g.push("+"+c):g.push(c)}else if(f>=0)for(a=0;a<s;a++)g.push(u[_++]);else{var O=s+f;if(O>0)for(a=0;a<O;a++)g.push(u[_++]);else g.push("0");for(g.push(".");O++<0;)g.push("0");for(a=0;a<s-Math.max(O-1,0);a++)g.push(u[_++])}return g.join("")},Decimal128.prototype.toJSON=function(){return{$numberDecimal:this.toString()}};var decimal128=Decimal128,Decimal128_1=Decimal128;function MinKey(){if(!(this instanceof MinKey))return new MinKey;this._bsontype="MinKey"}decimal128.Decimal128=Decimal128_1;var min_key=MinKey,MinKey_1=MinKey;function MaxKey(){if(!(this instanceof MaxKey))return new MaxKey;this._bsontype="MaxKey"}min_key.MinKey=MinKey_1;var max_key=MaxKey,MaxKey_1=MaxKey;function DBRef(e,t,r,n){if(!(this instanceof DBRef))return new DBRef(e,t,r,n);var i=e.split(".");2===i.length&&(r=i.shift(),e=i.shift()),this._bsontype="DBRef",this.collection=e,this.oid=t,this.db=r,this.fields=n||{}}max_key.MaxKey=MaxKey_1,DBRef.prototype.toJSON=function(){var e={$ref:this.collection,$id:this.oid};return null!=this.db&&(e.$db=this.db),e=Object.assign(e,this.fields)};var db_ref=DBRef,DBRef_1=DBRef;db_ref.DBRef=DBRef_1;var Buffer$3=buffer__WEBPACK_IMPORTED_MODULE_0___default.a.Buffer;function Binary(e,t){if(!(this instanceof Binary))return new Binary(e,t);if(!(null==e||"string"==typeof e||Buffer$3.isBuffer(e)||e instanceof Uint8Array||Array.isArray(e)))throw new Error("only String, Buffer, Uint8Array or Array accepted");if(this._bsontype="Binary",e instanceof Number?(this.sub_type=e,this.position=0):(this.sub_type=null==t?BSON_BINARY_SUBTYPE_DEFAULT:t,this.position=0),null==e||e instanceof Number)void 0!==Buffer$3?this.buffer=new Buffer$3(Binary.BUFFER_SIZE):"undefined"!=typeof Uint8Array?this.buffer=new Uint8Array(new ArrayBuffer(Binary.BUFFER_SIZE)):this.buffer=new Array(Binary.BUFFER_SIZE),this.position=0;else{if("string"==typeof e)if(void 0!==Buffer$3)this.buffer=new Buffer$3(e);else{if("undefined"==typeof Uint8Array&&"[object Array]"!==Object.prototype.toString.call(e))throw new TypeError("only String, Buffer, Uint8Array or Array accepted");this.buffer=writeStringToArray(e)}else this.buffer=e;this.position=e.length}}Binary.prototype.put=function(e){if(null!=e.length&&"number"!=typeof e&&1!==e.length)throw new TypeError("only accepts single character String, Uint8Array or Array");if("number"!=typeof e&&e<0||e>255)throw new TypeError("only accepts number in a valid unsigned byte range 0-255");var t=null;if(t="string"==typeof e?e.charCodeAt(0):null!=e.length?e[0]:e,this.buffer.length>this.position)this.buffer[this.position++]=t;else if(void 0!==Buffer$3&&Buffer$3.isBuffer(this.buffer)){var r=new Buffer$3(Binary.BUFFER_SIZE+this.buffer.length);this.buffer.copy(r,0,0,this.buffer.length),this.buffer=r,this.buffer[this.position++]=t}else{r=null,r="[object Uint8Array]"===Object.prototype.toString.call(this.buffer)?new Uint8Array(new ArrayBuffer(Binary.BUFFER_SIZE+this.buffer.length)):new Array(Binary.BUFFER_SIZE+this.buffer.length);for(var n=0;n<this.buffer.length;n++)r[n]=this.buffer[n];this.buffer=r,this.buffer[this.position++]=t}},Binary.prototype.write=function(e,t){if(t="number"==typeof t?t:this.position,this.buffer.length<t+e.length){var r=null;if(void 0!==Buffer$3&&Buffer$3.isBuffer(this.buffer))r=new Buffer$3(this.buffer.length+e.length),this.buffer.copy(r,0,0,this.buffer.length);else if("[object Uint8Array]"===Object.prototype.toString.call(this.buffer)){r=new Uint8Array(new ArrayBuffer(this.buffer.length+e.length));for(var n=0;n<this.position;n++)r[n]=this.buffer[n]}this.buffer=r}if(void 0!==Buffer$3&&Buffer$3.isBuffer(e)&&Buffer$3.isBuffer(this.buffer))e.copy(this.buffer,t,0,e.length),this.position=t+e.length>this.position?t+e.length:this.position;else if(void 0!==Buffer$3&&"string"==typeof e&&Buffer$3.isBuffer(this.buffer))this.buffer.write(e,t,"binary"),this.position=t+e.length>this.position?t+e.length:this.position;else if("[object Uint8Array]"===Object.prototype.toString.call(e)||"[object Array]"===Object.prototype.toString.call(e)&&"string"!=typeof e){for(n=0;n<e.length;n++)this.buffer[t++]=e[n];this.position=t>this.position?t:this.position}else if("string"==typeof e){for(n=0;n<e.length;n++)this.buffer[t++]=e.charCodeAt(n);this.position=t>this.position?t:this.position}},Binary.prototype.read=function(e,t){if(t=t&&t>0?t:this.position,this.buffer.slice)return this.buffer.slice(e,e+t);for(var r="undefined"!=typeof Uint8Array?new Uint8Array(new ArrayBuffer(t)):new Array(t),n=0;n<t;n++)r[n]=this.buffer[e++];return r},Binary.prototype.value=function(e){if((e=null!=e&&e)&&void 0!==Buffer$3&&Buffer$3.isBuffer(this.buffer)&&this.buffer.length===this.position)return this.buffer;if(void 0!==Buffer$3&&Buffer$3.isBuffer(this.buffer))return e?this.buffer.slice(0,this.position):this.buffer.toString("binary",0,this.position);if(e){if(null!=this.buffer.slice)return this.buffer.slice(0,this.position);for(var t="[object Uint8Array]"===Object.prototype.toString.call(this.buffer)?new Uint8Array(new ArrayBuffer(this.position)):new Array(this.position),r=0;r<this.position;r++)t[r]=this.buffer[r];return t}return convertArraytoUtf8BinaryString(this.buffer,0,this.position)},Binary.prototype.length=function(){return this.position},Binary.prototype.toJSON=function(){return null!=this.buffer?this.buffer.toString("base64"):""},Binary.prototype.toString=function(e){return null!=this.buffer?this.buffer.slice(0,this.position).toString(e):""};var BSON_BINARY_SUBTYPE_DEFAULT=0,writeStringToArray=function(e){for(var t="undefined"!=typeof Uint8Array?new Uint8Array(new ArrayBuffer(e.length)):new Array(e.length),r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t},convertArraytoUtf8BinaryString=function(e,t,r){for(var n="",i=t;i<r;i++)n+=String.fromCharCode(e[i]);return n};Binary.BUFFER_SIZE=256,Binary.SUBTYPE_DEFAULT=0,Binary.SUBTYPE_FUNCTION=1,Binary.SUBTYPE_BYTE_ARRAY=2,Binary.SUBTYPE_UUID_OLD=3,Binary.SUBTYPE_UUID=4,Binary.SUBTYPE_MD5=5,Binary.SUBTYPE_USER_DEFINED=128;var binary=Binary,Binary_1=Binary;binary.Binary=Binary_1;var Buffer$4=buffer__WEBPACK_IMPORTED_MODULE_0___default.a.Buffer,Long$1=long_1.Long,Double$1=double_1.Double,Timestamp$1=timestamp.Timestamp,ObjectID$1=objectid.ObjectID,Code$1=code.Code,MinKey$1=min_key.MinKey,MaxKey$1=max_key.MaxKey,DBRef$1=db_ref.DBRef,BSONRegExp$1=regexp.BSONRegExp,Binary$1=binary.Binary,deserialize=function(e,t,r){var n=(t=null==t?{}:t)&&t.index?t.index:0,i=e[n]|e[n+1]<<8|e[n+2]<<16|e[n+3]<<24;if(i<5)throw new Error("bson size must be >= 5, is "+i);if(t.allowObjectSmallerThanBufferSize&&Buffer$4.byteLength(e)<i)throw new Error("buffer length "+Buffer$4.byteLength(e)+" must be >= bson size "+i);if(!t.allowObjectSmallerThanBufferSize&&Buffer$4.byteLength(e)!==i)throw new Error("buffer length "+Buffer$4.byteLength(e)+" must === bson size "+i);if(i+n>Buffer$4.byteLength(e))throw new Error("(bson size "+i+" + options.index "+n+" must be <= buffer length "+Buffer$4.byteLength(e)+")");if(0!==e[n+i-1])throw new Error("One object, sized correctly, with a spot for an EOO, but the EOO isn't 0x00");return deserializeObject(e,n,t,r)},deserializeObject=function e(t,r,n,i){var o=null!=n.evalFunctions&&n.evalFunctions,s=null!=n.cacheFunctions&&n.cacheFunctions,u=null!=n.cacheFunctionsCrc32&&n.cacheFunctionsCrc32;if(!u)var a=null;var f=null==n.fieldsAsRaw?null:n.fieldsAsRaw,c=null!=n.raw&&n.raw,l="boolean"==typeof n.bsonRegExp&&n.bsonRegExp,h=null!=n.promoteBuffers&&n.promoteBuffers,p=null==n.promoteLongs||n.promoteLongs,_=null==n.promoteValues||n.promoteValues,d=r;if(Buffer$4.byteLength(t)<5)throw new Error("corrupt bson message < 5 bytes long");var y=t[r++]|t[r++]<<8|t[r++]<<16|t[r++]<<24;if(y<5||y>Buffer$4.byteLength(t))throw new Error("corrupt bson message");for(var g=i?[]:{},b=0;;){var N=t[r++];if(0===N)break;for(var B=r;0!==t[B]&&B<Buffer$4.byteLength(t);)B++;if(B>=Buffer$4.byteLength(t))throw new Error("Bad BSON Document: illegal CString");var O=i?b++:t.toString("utf8",r,B);if(r=B+1,N===BSON.BSON_DATA_STRING){var m=t[r++]|t[r++]<<8|t[r++]<<16|t[r++]<<24;if(m<=0||m>Buffer$4.byteLength(t)-r||0!==t[r+m-1])throw new Error("bad string length in bson");var E=t.toString("utf8",r,r+m-1);for(B=0;B<E.length;B++)if(65533===E.charCodeAt(B))throw new Error("Invalid UTF-8 string in BSON document");g[O]=E,r+=m}else if(N===BSON.BSON_DATA_OID){var S=new Buffer$4(12);t.copy(S,0,r,r+12),g[O]=new ObjectID$1(S),r+=12}else if(N===BSON.BSON_DATA_INT&&!1===_)g[O]=new int_32(t[r++]|t[r++]<<8|t[r++]<<16|t[r++]<<24);else if(N===BSON.BSON_DATA_INT)g[O]=t[r++]|t[r++]<<8|t[r++]<<16|t[r++]<<24;else if(N===BSON.BSON_DATA_NUMBER&&!1===_)g[O]=new Double$1(t.readDoubleLE(r)),r+=8;else if(N===BSON.BSON_DATA_NUMBER)g[O]=t.readDoubleLE(r),r+=8;else if(N===BSON.BSON_DATA_DATE){var A=t[r++]|t[r++]<<8|t[r++]<<16|t[r++]<<24,w=t[r++]|t[r++]<<8|t[r++]<<16|t[r++]<<24;g[O]=new Date(new Long$1(A,w).toNumber())}else if(N===BSON.BSON_DATA_BOOLEAN){if(0!==t[r]&&1!==t[r])throw new Error("illegal boolean type value");g[O]=1===t[r++]}else if(N===BSON.BSON_DATA_OBJECT){var v=r,T=t[r]|t[r+1]<<8|t[r+2]<<16|t[r+3]<<24;if(T<=0||T>Buffer$4.byteLength(t)-r)throw new Error("bad embedded document length in bson");g[O]=c?t.slice(r,r+T):e(t,v,n,!1),r+=T}else if(N===BSON.BSON_DATA_ARRAY){v=r;var I=n,D=r+(T=t[r]|t[r+1]<<8|t[r+2]<<16|t[r+3]<<24);if(f&&f[O]){for(var R in I={},n)I[R]=n[R];I.raw=!0}if(g[O]=e(t,v,I,!0),0!==t[(r+=T)-1])throw new Error("invalid array terminator byte");if(r!==D)throw new Error("corrupted array bson")}else if(N===BSON.BSON_DATA_UNDEFINED)g[O]=void 0;else if(N===BSON.BSON_DATA_NULL)g[O]=null;else if(N===BSON.BSON_DATA_LONG){A=t[r++]|t[r++]<<8|t[r++]<<16|t[r++]<<24,w=t[r++]|t[r++]<<8|t[r++]<<16|t[r++]<<24;var L=new Long$1(A,w);g[O]=p&&!0===_&&L.lessThanOrEqual(JS_INT_MAX_LONG)&&L.greaterThanOrEqual(JS_INT_MIN_LONG)?L.toNumber():L}else if(N===BSON.BSON_DATA_DECIMAL128){var $=new Buffer$4(16);t.copy($,0,r,r+16),r+=16;var M=new decimal128($);g[O]=M.toObject?M.toObject():M}else if(N===BSON.BSON_DATA_BINARY){var P=t[r++]|t[r++]<<8|t[r++]<<16|t[r++]<<24,x=P,U=t[r++];if(P<0)throw new Error("Negative binary type element size found");if(P>Buffer$4.byteLength(t))throw new Error("Binary type size larger than document size");if(null!=t.slice){if(U===Binary$1.SUBTYPE_BYTE_ARRAY){if((P=t[r++]|t[r++]<<8|t[r++]<<16|t[r++]<<24)<0)throw new Error("Negative binary type element size found for subtype 0x02");if(P>x-4)throw new Error("Binary type with subtype 0x02 contains to long binary size");if(P<x-4)throw new Error("Binary type with subtype 0x02 contains to short binary size")}g[O]=h&&_?t.slice(r,r+P):new Binary$1(t.slice(r,r+P),U)}else{var j="undefined"!=typeof Uint8Array?new Uint8Array(new ArrayBuffer(P)):new Array(P);if(U===Binary$1.SUBTYPE_BYTE_ARRAY){if((P=t[r++]|t[r++]<<8|t[r++]<<16|t[r++]<<24)<0)throw new Error("Negative binary type element size found for subtype 0x02");if(P>x-4)throw new Error("Binary type with subtype 0x02 contains to long binary size");if(P<x-4)throw new Error("Binary type with subtype 0x02 contains to short binary size")}for(B=0;B<P;B++)j[B]=t[r+B];g[O]=h&&_?j:new Binary$1(j,U)}r+=P}else if(N===BSON.BSON_DATA_REGEXP&&!1===l){for(B=r;0!==t[B]&&B<Buffer$4.byteLength(t);)B++;if(B>=Buffer$4.byteLength(t))throw new Error("Bad BSON Document: illegal CString");var C=t.toString("utf8",r,B);for(B=r=B+1;0!==t[B]&&B<Buffer$4.byteLength(t);)B++;if(B>=Buffer$4.byteLength(t))throw new Error("Bad BSON Document: illegal CString");var F=t.toString("utf8",r,B);r=B+1;var k=new Array(F.length);for(B=0;B<F.length;B++)switch(F[B]){case"m":k[B]="m";break;case"s":k[B]="g";break;case"i":k[B]="i"}g[O]=new RegExp(C,k.join(""))}else if(N===BSON.BSON_DATA_REGEXP&&!0===l){for(B=r;0!==t[B]&&B<Buffer$4.byteLength(t);)B++;if(B>=Buffer$4.byteLength(t))throw new Error("Bad BSON Document: illegal CString");for(C=t.toString("utf8",r,B),B=r=B+1;0!==t[B]&&B<Buffer$4.byteLength(t);)B++;if(B>=Buffer$4.byteLength(t))throw new Error("Bad BSON Document: illegal CString");F=t.toString("utf8",r,B),r=B+1,g[O]=new BSONRegExp$1(C,F)}else if(N===BSON.BSON_DATA_SYMBOL){if((m=t[r++]|t[r++]<<8|t[r++]<<16|t[r++]<<24)<=0||m>Buffer$4.byteLength(t)-r||0!==t[r+m-1])throw new Error("bad string length in bson");g[O]=t.toString("utf8",r,r+m-1),r+=m}else if(N===BSON.BSON_DATA_TIMESTAMP)A=t[r++]|t[r++]<<8|t[r++]<<16|t[r++]<<24,w=t[r++]|t[r++]<<8|t[r++]<<16|t[r++]<<24,g[O]=new Timestamp$1(A,w);else if(N===BSON.BSON_DATA_MIN_KEY)g[O]=new MinKey$1;else if(N===BSON.BSON_DATA_MAX_KEY)g[O]=new MaxKey$1;else if(N===BSON.BSON_DATA_CODE){if((m=t[r++]|t[r++]<<8|t[r++]<<16|t[r++]<<24)<=0||m>Buffer$4.byteLength(t)-r||0!==t[r+m-1])throw new Error("bad string length in bson");var z=t.toString("utf8",r,r+m-1);if(o)if(s){var Y=u?a(z):z;g[O]=isolateEvalWithHash(functionCache,Y,z,g)}else g[O]=isolateEval(z);else g[O]=new Code$1(z);r+=m}else if(N===BSON.BSON_DATA_CODE_W_SCOPE){var K=t[r++]|t[r++]<<8|t[r++]<<16|t[r++]<<24;if(K<13)throw new Error("code_w_scope total size shorter minimum expected length");if((m=t[r++]|t[r++]<<8|t[r++]<<16|t[r++]<<24)<=0||m>Buffer$4.byteLength(t)-r||0!==t[r+m-1])throw new Error("bad string length in bson");z=t.toString("utf8",r,r+m-1),v=r+=m,T=t[r]|t[r+1]<<8|t[r+2]<<16|t[r+3]<<24;var W=e(t,v,n,!1);if(r+=T,K<8+T+m)throw new Error("code_w_scope total size is to short, truncating scope");if(K>8+T+m)throw new Error("code_w_scope total size is to long, clips outer document");o?(s?(Y=u?a(z):z,g[O]=isolateEvalWithHash(functionCache,Y,z,g)):g[O]=isolateEval(z),g[O].scope=W):g[O]=new Code$1(z,W)}else{if(N!==BSON.BSON_DATA_DBPOINTER)throw new Error("Detected unknown BSON type "+N.toString(16)+' for fieldname "'+O+'", are you using the latest BSON parser?');if((m=t[r++]|t[r++]<<8|t[r++]<<16|t[r++]<<24)<=0||m>Buffer$4.byteLength(t)-r||0!==t[r+m-1])throw new Error("bad string length in bson");var X=t.toString("utf8",r,r+m-1);r+=m;var V=new Buffer$4(12);for(t.copy(V,0,r,r+12),S=new ObjectID$1(V),r+=12,B=0;B<X.length;B++)if(65533===X.charCodeAt(B))throw new Error("Invalid UTF-8 string in BSON document");g[O]=new DBRef$1(X,S)}}if(y!==r-d){if(i)throw new Error("corrupt array bson");throw new Error("corrupt object bson")}var J=!0;if(Object.keys(g).filter(function(e){return e.startsWith("$")}).forEach(function(e){-1===["$ref","$id","$db"].indexOf(e)&&(J=!1)}),!J)return g;if(null!=g.$id&&null!=g.$ref){var q=Object.assign({},g);return delete q.$ref,delete q.$id,delete q.$db,new DBRef$1(g.$ref,g.$id,g.$db||null,q)}return g},isolateEvalWithHash=function isolateEvalWithHash(functionCache,hash,functionString,object){var value=null;return null==functionCache[hash]&&(eval("value = "+functionString),functionCache[hash]=value),functionCache[hash].bind(object)},isolateEval=function isolateEval(functionString){var value=null;return eval("value = "+functionString),value},BSON={},functionCache=BSON.functionCache={};BSON.BSON_DATA_NUMBER=1,BSON.BSON_DATA_STRING=2,BSON.BSON_DATA_OBJECT=3,BSON.BSON_DATA_ARRAY=4,BSON.BSON_DATA_BINARY=5,BSON.BSON_DATA_UNDEFINED=6,BSON.BSON_DATA_OID=7,BSON.BSON_DATA_BOOLEAN=8,BSON.BSON_DATA_DATE=9,BSON.BSON_DATA_NULL=10,BSON.BSON_DATA_REGEXP=11,BSON.BSON_DATA_DBPOINTER=12,BSON.BSON_DATA_CODE=13,BSON.BSON_DATA_SYMBOL=14,BSON.BSON_DATA_CODE_W_SCOPE=15,BSON.BSON_DATA_INT=16,BSON.BSON_DATA_TIMESTAMP=17,BSON.BSON_DATA_LONG=18,BSON.BSON_DATA_DECIMAL128=19,BSON.BSON_DATA_MIN_KEY=255,BSON.BSON_DATA_MAX_KEY=127,BSON.BSON_BINARY_SUBTYPE_DEFAULT=0,BSON.BSON_BINARY_SUBTYPE_FUNCTION=1,BSON.BSON_BINARY_SUBTYPE_BYTE_ARRAY=2,BSON.BSON_BINARY_SUBTYPE_UUID=3,BSON.BSON_BINARY_SUBTYPE_MD5=4,BSON.BSON_BINARY_SUBTYPE_USER_DEFINED=128,BSON.BSON_INT32_MAX=2147483647,BSON.BSON_INT32_MIN=-2147483648,BSON.BSON_INT64_MAX=Math.pow(2,63)-1,BSON.BSON_INT64_MIN=-Math.pow(2,63),BSON.JS_INT_MAX=9007199254740992,BSON.JS_INT_MIN=-9007199254740992;var JS_INT_MAX_LONG=Long$1.fromNumber(9007199254740992),JS_INT_MIN_LONG=Long$1.fromNumber(-9007199254740992),deserializer=deserialize,readIEEE754=function(e,t,r,n,i){var o,s,u="big"===r,a=8*i-n-1,f=(1<<a)-1,c=f>>1,l=-7,h=u?0:i-1,p=u?1:-1,_=e[t+h];for(h+=p,o=_&(1<<-l)-1,_>>=-l,l+=a;l>0;o=256*o+e[t+h],h+=p,l-=8);for(s=o&(1<<-l)-1,o>>=-l,l+=n;l>0;s=256*s+e[t+h],h+=p,l-=8);if(0===o)o=1-c;else{if(o===f)return s?NaN:1/0*(_?-1:1);s+=Math.pow(2,n),o-=c}return(_?-1:1)*s*Math.pow(2,o-n)},writeIEEE754=function(e,t,r,n,i,o){var s,u,a,f="big"===n,c=8*o-i-1,l=(1<<c)-1,h=l>>1,p=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,_=f?o-1:0,d=f?-1:1,y=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(u=isNaN(t)?1:0,s=l):(s=Math.floor(Math.log(t)/Math.LN2),t*(a=Math.pow(2,-s))<1&&(s--,a*=2),(t+=s+h>=1?p/a:p*Math.pow(2,1-h))*a>=2&&(s++,a/=2),s+h>=l?(u=0,s=l):s+h>=1?(u=(t*a-1)*Math.pow(2,i),s+=h):(u=t*Math.pow(2,h-1)*Math.pow(2,i),s=0)),isNaN(t)&&(u=0);i>=8;)e[r+_]=255&u,_+=d,u/=256,i-=8;for(s=s<<i|u,isNaN(t)&&(s+=8),c+=i;c>0;)e[r+_]=255&s,_+=d,s/=256,c-=8;e[r+_-d]|=128*y},readIEEE754_1=readIEEE754,writeIEEE754_1=writeIEEE754,float_parser={readIEEE754:readIEEE754_1,writeIEEE754:writeIEEE754_1};function normalizedFunctionString(e){return e.toString().replace(/function(.*)\(/,"function (")}var utils={normalizedFunctionString:normalizedFunctionString},_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Buffer$5=buffer__WEBPACK_IMPORTED_MODULE_0___default.a.Buffer,writeIEEE754$1=float_parser.writeIEEE754,Long$2=long_1.Long,MinKey$2=min_key.MinKey,Binary$2=binary.Binary,normalizedFunctionString$1=utils.normalizedFunctionString,regexp$1=/\x00/,isDate=function(e){return"object"===(void 0===e?"undefined":_typeof(e))&&"[object Date]"===Object.prototype.toString.call(e)},isRegExp=function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},serializeString=function(e,t,r,n,i){e[n++]=BSON$1.BSON_DATA_STRING,e[(n=n+(i?e.write(t,n,"ascii"):e.write(t,n,"utf8"))+1)-1]=0;var o=e.write(r,n+4,"utf8");return e[n+3]=o+1>>24&255,e[n+2]=o+1>>16&255,e[n+1]=o+1>>8&255,e[n]=o+1&255,n=n+4+o,e[n++]=0,n},serializeNumber=function(e,t,r,n,i){if(Math.floor(r)===r&&r>=BSON$1.JS_INT_MIN&&r<=BSON$1.JS_INT_MAX)if(r>=BSON$1.BSON_INT32_MIN&&r<=BSON$1.BSON_INT32_MAX){e[n++]=BSON$1.BSON_DATA_INT;var o=i?e.write(t,n,"ascii"):e.write(t,n,"utf8");n+=o,e[n++]=0,e[n++]=255&r,e[n++]=r>>8&255,e[n++]=r>>16&255,e[n++]=r>>24&255}else if(r>=BSON$1.JS_INT_MIN&&r<=BSON$1.JS_INT_MAX)e[n++]=BSON$1.BSON_DATA_NUMBER,n+=o=i?e.write(t,n,"ascii"):e.write(t,n,"utf8"),e[n++]=0,writeIEEE754$1(e,r,n,"little",52,8),n+=8;else{e[n++]=BSON$1.BSON_DATA_LONG,n+=o=i?e.write(t,n,"ascii"):e.write(t,n,"utf8"),e[n++]=0;var s=Long$2.fromNumber(r),u=s.getLowBits(),a=s.getHighBits();e[n++]=255&u,e[n++]=u>>8&255,e[n++]=u>>16&255,e[n++]=u>>24&255,e[n++]=255&a,e[n++]=a>>8&255,e[n++]=a>>16&255,e[n++]=a>>24&255}else e[n++]=BSON$1.BSON_DATA_NUMBER,n+=o=i?e.write(t,n,"ascii"):e.write(t,n,"utf8"),e[n++]=0,writeIEEE754$1(e,r,n,"little",52,8),n+=8;return n},serializeNull=function(e,t,r,n,i){return e[n++]=BSON$1.BSON_DATA_NULL,n+=i?e.write(t,n,"ascii"):e.write(t,n,"utf8"),e[n++]=0,n},serializeBoolean=function(e,t,r,n,i){return e[n++]=BSON$1.BSON_DATA_BOOLEAN,n+=i?e.write(t,n,"ascii"):e.write(t,n,"utf8"),e[n++]=0,e[n++]=r?1:0,n},serializeDate=function(e,t,r,n,i){e[n++]=BSON$1.BSON_DATA_DATE,n+=i?e.write(t,n,"ascii"):e.write(t,n,"utf8"),e[n++]=0;var o=Long$2.fromNumber(r.getTime()),s=o.getLowBits(),u=o.getHighBits();return e[n++]=255&s,e[n++]=s>>8&255,e[n++]=s>>16&255,e[n++]=s>>24&255,e[n++]=255&u,e[n++]=u>>8&255,e[n++]=u>>16&255,e[n++]=u>>24&255,n},serializeRegExp=function(e,t,r,n,i){if(e[n++]=BSON$1.BSON_DATA_REGEXP,n+=i?e.write(t,n,"ascii"):e.write(t,n,"utf8"),e[n++]=0,r.source&&null!=r.source.match(regexp$1))throw Error("value "+r.source+" must not contain null bytes");return n+=e.write(r.source,n,"utf8"),e[n++]=0,r.ignoreCase&&(e[n++]=105),r.global&&(e[n++]=115),r.multiline&&(e[n++]=109),e[n++]=0,n},serializeBSONRegExp=function(e,t,r,n,i){if(e[n++]=BSON$1.BSON_DATA_REGEXP,n+=i?e.write(t,n,"ascii"):e.write(t,n,"utf8"),e[n++]=0,null!=r.pattern.match(regexp$1))throw Error("pattern "+r.pattern+" must not contain null bytes");return n+=e.write(r.pattern,n,"utf8"),e[n++]=0,n+=e.write(r.options.split("").sort().join(""),n,"utf8"),e[n++]=0,n},serializeMinMax=function(e,t,r,n,i){return e[n++]=null===r?BSON$1.BSON_DATA_NULL:r instanceof MinKey$2?BSON$1.BSON_DATA_MIN_KEY:BSON$1.BSON_DATA_MAX_KEY,n+=i?e.write(t,n,"ascii"):e.write(t,n,"utf8"),e[n++]=0,n},serializeObjectId=function(e,t,r,n,i){if(e[n++]=BSON$1.BSON_DATA_OID,n+=i?e.write(t,n,"ascii"):e.write(t,n,"utf8"),e[n++]=0,"string"==typeof r.id)e.write(r.id,n,"binary");else{if(!r.id||!r.id.copy)throw new TypeError("object ["+JSON.stringify(r)+"] is not a valid ObjectId");r.id.copy(e,n,0,12)}return n+12},serializeBuffer=function(e,t,r,n,i){e[n++]=BSON$1.BSON_DATA_BINARY,n+=i?e.write(t,n,"ascii"):e.write(t,n,"utf8"),e[n++]=0;var o=r.length;return e[n++]=255&o,e[n++]=o>>8&255,e[n++]=o>>16&255,e[n++]=o>>24&255,e[n++]=BSON$1.BSON_BINARY_SUBTYPE_DEFAULT,r.copy(e,n,0,o),n+=o},serializeObject=function(e,t,r,n,i,o,s,u,a,f){for(var c=0;c<f.length;c++)if(f[c]===r)throw new Error("cyclic dependency detected");f.push(r),e[n++]=Array.isArray(r)?BSON$1.BSON_DATA_ARRAY:BSON$1.BSON_DATA_OBJECT,n+=a?e.write(t,n,"ascii"):e.write(t,n,"utf8"),e[n++]=0;var l=serializeInto(e,r,i,n,o+1,s,u,f);return f.pop(),l},serializeDecimal128=function(e,t,r,n,i){return e[n++]=BSON$1.BSON_DATA_DECIMAL128,n+=i?e.write(t,n,"ascii"):e.write(t,n,"utf8"),e[n++]=0,r.bytes.copy(e,n,0,16),n+16},serializeLong=function(e,t,r,n,i){e[n++]="Long"===r._bsontype?BSON$1.BSON_DATA_LONG:BSON$1.BSON_DATA_TIMESTAMP,n+=i?e.write(t,n,"ascii"):e.write(t,n,"utf8"),e[n++]=0;var o=r.getLowBits(),s=r.getHighBits();return e[n++]=255&o,e[n++]=o>>8&255,e[n++]=o>>16&255,e[n++]=o>>24&255,e[n++]=255&s,e[n++]=s>>8&255,e[n++]=s>>16&255,e[n++]=s>>24&255,n},serializeInt32=function(e,t,r,n,i){return e[n++]=BSON$1.BSON_DATA_INT,n+=i?e.write(t,n,"ascii"):e.write(t,n,"utf8"),e[n++]=0,e[n++]=255&r,e[n++]=r>>8&255,e[n++]=r>>16&255,e[n++]=r>>24&255,n},serializeDouble=function(e,t,r,n,i){return e[n++]=BSON$1.BSON_DATA_NUMBER,n+=i?e.write(t,n,"ascii"):e.write(t,n,"utf8"),e[n++]=0,writeIEEE754$1(e,r.value,n,"little",52,8),n+=8},serializeFunction=function(e,t,r,n,i,o,s){e[n++]=BSON$1.BSON_DATA_CODE,n+=s?e.write(t,n,"ascii"):e.write(t,n,"utf8"),e[n++]=0;var u=normalizedFunctionString$1(r),a=e.write(u,n+4,"utf8")+1;return e[n]=255&a,e[n+1]=a>>8&255,e[n+2]=a>>16&255,e[n+3]=a>>24&255,n=n+4+a-1,e[n++]=0,n},serializeCode=function(e,t,r,n,i,o,s,u,a){if(r.scope&&"object"===_typeof(r.scope)){e[n++]=BSON$1.BSON_DATA_CODE_W_SCOPE;var f=a?e.write(t,n,"ascii"):e.write(t,n,"utf8");n+=f,e[n++]=0;var c=n,l="string"==typeof r.code?r.code:r.code.toString();n+=4;var h=e.write(l,n+4,"utf8")+1;e[n]=255&h,e[n+1]=h>>8&255,e[n+2]=h>>16&255,e[n+3]=h>>24&255,e[n+4+h-1]=0,n=n+h+4;var p=serializeInto(e,r.scope,i,n,o+1,s,u);n=p-1;var _=p-c;e[c++]=255&_,e[c++]=_>>8&255,e[c++]=_>>16&255,e[c++]=_>>24&255,e[n++]=0}else{e[n++]=BSON$1.BSON_DATA_CODE,n+=f=a?e.write(t,n,"ascii"):e.write(t,n,"utf8"),e[n++]=0,l=r.code.toString();var d=e.write(l,n+4,"utf8")+1;e[n]=255&d,e[n+1]=d>>8&255,e[n+2]=d>>16&255,e[n+3]=d>>24&255,n=n+4+d-1,e[n++]=0}return n},serializeBinary=function(e,t,r,n,i){e[n++]=BSON$1.BSON_DATA_BINARY,n+=i?e.write(t,n,"ascii"):e.write(t,n,"utf8"),e[n++]=0;var o=r.value(!0),s=r.position;return r.sub_type===Binary$2.SUBTYPE_BYTE_ARRAY&&(s+=4),e[n++]=255&s,e[n++]=s>>8&255,e[n++]=s>>16&255,e[n++]=s>>24&255,e[n++]=r.sub_type,r.sub_type===Binary$2.SUBTYPE_BYTE_ARRAY&&(s-=4,e[n++]=255&s,e[n++]=s>>8&255,e[n++]=s>>16&255,e[n++]=s>>24&255),o.copy(e,n,0,r.position),n+=r.position},serializeSymbol=function(e,t,r,n,i){e[n++]=BSON$1.BSON_DATA_SYMBOL,n+=i?e.write(t,n,"ascii"):e.write(t,n,"utf8"),e[n++]=0;var o=e.write(r.value,n+4,"utf8")+1;return e[n]=255&o,e[n+1]=o>>8&255,e[n+2]=o>>16&255,e[n+3]=o>>24&255,n=n+4+o-1,e[n++]=0,n},serializeDBRef=function(e,t,r,n,i,o,s){e[n++]=BSON$1.BSON_DATA_OBJECT,n+=s?e.write(t,n,"ascii"):e.write(t,n,"utf8"),e[n++]=0;var u,a=n,f={$ref:r.collection,$id:r.oid};null!=r.db&&(f.$db=r.db),f=Object.assign(f,r.fields);var c=(u=serializeInto(e,f,!1,n,i+1,o))-a;return e[a++]=255&c,e[a++]=c>>8&255,e[a++]=c>>16&255,e[a++]=c>>24&255,u},serializeInto=function(e,t,r,n,i,o,s,u){n=n||0,(u=u||[]).push(t);var a=n+4;if(Array.isArray(t))for(var f=0;f<t.length;f++){var c=""+f,l=t[f];if(l&&l.toBSON){if("function"!=typeof l.toBSON)throw new TypeError("toBSON is not a function");l=l.toBSON()}var h=void 0===l?"undefined":_typeof(l);"string"===h?a=serializeString(e,c,l,a,!0):"number"===h?a=serializeNumber(e,c,l,a,!0):"boolean"===h?a=serializeBoolean(e,c,l,a,!0):l instanceof Date||isDate(l)?a=serializeDate(e,c,l,a,!0):void 0===l?a=serializeNull(e,c,l,a,!0):null===l?a=serializeNull(e,c,l,a,!0):"ObjectID"===l._bsontype?a=serializeObjectId(e,c,l,a,!0):Buffer$5.isBuffer(l)?a=serializeBuffer(e,c,l,a,!0):l instanceof RegExp||isRegExp(l)?a=serializeRegExp(e,c,l,a,!0):"object"===h&&null==l._bsontype?a=serializeObject(e,c,l,a,r,i,o,s,!0,u):"object"===h&&"Decimal128"===l._bsontype?a=serializeDecimal128(e,c,l,a,!0):"Long"===l._bsontype||"Timestamp"===l._bsontype?a=serializeLong(e,c,l,a,!0):"Double"===l._bsontype?a=serializeDouble(e,c,l,a,!0):"function"==typeof l&&o?a=serializeFunction(e,c,l,a,r,i,o,!0):"Code"===l._bsontype?a=serializeCode(e,c,l,a,r,i,o,s,!0):"Binary"===l._bsontype?a=serializeBinary(e,c,l,a,!0):"Symbol"===l._bsontype?a=serializeSymbol(e,c,l,a,!0):"DBRef"===l._bsontype?a=serializeDBRef(e,c,l,a,i,o,!0):"BSONRegExp"===l._bsontype?a=serializeBSONRegExp(e,c,l,a,!0):"Int32"===l._bsontype?a=serializeInt32(e,c,l,a,!0):"MinKey"!==l._bsontype&&"MaxKey"!==l._bsontype||(a=serializeMinMax(e,c,l,a,!0))}else if(t instanceof map)for(var p=t.entries(),_=!1;!_;){var d=p.next();if(!(_=d.done)){if(c=d.value[0],h=void 0===(l=d.value[1])?"undefined":_typeof(l),"$db"!==c&&"$ref"!==c&&"$id"!==c){if(null!=c.match(regexp$1))throw Error("key "+c+" must not contain null bytes");if(r){if("$"===c[0])throw Error("key "+c+" must not start with '$'");if(~c.indexOf("."))throw Error("key "+c+" must not contain '.'")}}"string"===h?a=serializeString(e,c,l,a):"number"===h?a=serializeNumber(e,c,l,a):"boolean"===h?a=serializeBoolean(e,c,l,a):l instanceof Date||isDate(l)?a=serializeDate(e,c,l,a):null===l||void 0===l&&!1===s?a=serializeNull(e,c,l,a):"ObjectID"===l._bsontype?a=serializeObjectId(e,c,l,a):Buffer$5.isBuffer(l)?a=serializeBuffer(e,c,l,a):l instanceof RegExp||isRegExp(l)?a=serializeRegExp(e,c,l,a):"object"===h&&null==l._bsontype?a=serializeObject(e,c,l,a,r,i,o,s,!1,u):"object"===h&&"Decimal128"===l._bsontype?a=serializeDecimal128(e,c,l,a):"Long"===l._bsontype||"Timestamp"===l._bsontype?a=serializeLong(e,c,l,a):"Double"===l._bsontype?a=serializeDouble(e,c,l,a):"Code"===l._bsontype?a=serializeCode(e,c,l,a,r,i,o,s):"function"==typeof l&&o?a=serializeFunction(e,c,l,a,r,i,o):"Binary"===l._bsontype?a=serializeBinary(e,c,l,a):"Symbol"===l._bsontype?a=serializeSymbol(e,c,l,a):"DBRef"===l._bsontype?a=serializeDBRef(e,c,l,a,i,o):"BSONRegExp"===l._bsontype?a=serializeBSONRegExp(e,c,l,a):"Int32"===l._bsontype?a=serializeInt32(e,c,l,a):"MinKey"!==l._bsontype&&"MaxKey"!==l._bsontype||(a=serializeMinMax(e,c,l,a))}}else{if(t.toBSON){if("function"!=typeof t.toBSON)throw new TypeError("toBSON is not a function");if(null!=(t=t.toBSON())&&"object"!==(void 0===t?"undefined":_typeof(t)))throw new TypeError("toBSON function did not return an object")}for(c in t){if((l=t[c])&&l.toBSON){if("function"!=typeof l.toBSON)throw new TypeError("toBSON is not a function");l=l.toBSON()}if(h=void 0===l?"undefined":_typeof(l),"$db"!==c&&"$ref"!==c&&"$id"!==c){if(null!=c.match(regexp$1))throw Error("key "+c+" must not contain null bytes");if(r){if("$"===c[0])throw Error("key "+c+" must not start with '$'");if(~c.indexOf("."))throw Error("key "+c+" must not contain '.'")}}"string"===h?a=serializeString(e,c,l,a):"number"===h?a=serializeNumber(e,c,l,a):"boolean"===h?a=serializeBoolean(e,c,l,a):l instanceof Date||isDate(l)?a=serializeDate(e,c,l,a):void 0===l?!1===s&&(a=serializeNull(e,c,l,a)):null===l?a=serializeNull(e,c,l,a):"ObjectID"===l._bsontype?a=serializeObjectId(e,c,l,a):Buffer$5.isBuffer(l)?a=serializeBuffer(e,c,l,a):l instanceof RegExp||isRegExp(l)?a=serializeRegExp(e,c,l,a):"object"===h&&null==l._bsontype?a=serializeObject(e,c,l,a,r,i,o,s,!1,u):"object"===h&&"Decimal128"===l._bsontype?a=serializeDecimal128(e,c,l,a):"Long"===l._bsontype||"Timestamp"===l._bsontype?a=serializeLong(e,c,l,a):"Double"===l._bsontype?a=serializeDouble(e,c,l,a):"Code"===l._bsontype?a=serializeCode(e,c,l,a,r,i,o,s):"function"==typeof l&&o?a=serializeFunction(e,c,l,a,r,i,o):"Binary"===l._bsontype?a=serializeBinary(e,c,l,a):"Symbol"===l._bsontype?a=serializeSymbol(e,c,l,a):"DBRef"===l._bsontype?a=serializeDBRef(e,c,l,a,i,o):"BSONRegExp"===l._bsontype?a=serializeBSONRegExp(e,c,l,a):"Int32"===l._bsontype?a=serializeInt32(e,c,l,a):"MinKey"!==l._bsontype&&"MaxKey"!==l._bsontype||(a=serializeMinMax(e,c,l,a))}}u.pop(),e[a++]=0;var y=a-n;return e[n++]=255&y,e[n++]=y>>8&255,e[n++]=y>>16&255,e[n++]=y>>24&255,a},BSON$1={BSON_DATA_NUMBER:1,BSON_DATA_STRING:2,BSON_DATA_OBJECT:3,BSON_DATA_ARRAY:4,BSON_DATA_BINARY:5,BSON_DATA_UNDEFINED:6,BSON_DATA_OID:7,BSON_DATA_BOOLEAN:8,BSON_DATA_DATE:9,BSON_DATA_NULL:10,BSON_DATA_REGEXP:11,BSON_DATA_CODE:13,BSON_DATA_SYMBOL:14,BSON_DATA_CODE_W_SCOPE:15,BSON_DATA_INT:16,BSON_DATA_TIMESTAMP:17,BSON_DATA_LONG:18,BSON_DATA_DECIMAL128:19,BSON_DATA_MIN_KEY:255,BSON_DATA_MAX_KEY:127,BSON_BINARY_SUBTYPE_DEFAULT:0,BSON_BINARY_SUBTYPE_FUNCTION:1,BSON_BINARY_SUBTYPE_BYTE_ARRAY:2,BSON_BINARY_SUBTYPE_UUID:3,BSON_BINARY_SUBTYPE_MD5:4,BSON_BINARY_SUBTYPE_USER_DEFINED:128,BSON_INT32_MAX:2147483647,BSON_INT32_MIN:-2147483648};BSON$1.BSON_INT64_MAX=Math.pow(2,63)-1,BSON$1.BSON_INT64_MIN=-Math.pow(2,63),BSON$1.JS_INT_MAX=9007199254740992,BSON$1.JS_INT_MIN=-9007199254740992;var serializer=serializeInto,Buffer$6=buffer__WEBPACK_IMPORTED_MODULE_0___default.a.Buffer,Long$3=long_1.Long,Double$2=double_1.Double,Timestamp$2=timestamp.Timestamp,ObjectID$2=objectid.ObjectID,_Symbol$1=symbol.Symbol,BSONRegExp$2=regexp.BSONRegExp,Code$2=code.Code,MinKey$3=min_key.MinKey,MaxKey$2=max_key.MaxKey,DBRef$2=db_ref.DBRef,Binary$3=binary.Binary,normalizedFunctionString$2=utils.normalizedFunctionString,isDate$1=function(e){return"object"===(void 0===e?"undefined":_typeof(e))&&"[object Date]"===Object.prototype.toString.call(e)},calculateObjectSize=function(e,t,r){var n=5;if(Array.isArray(e))for(var i=0;i<e.length;i++)n+=calculateElement(i.toString(),e[i],t,!0,r);else for(var o in e.toBSON&&(e=e.toBSON()),e)n+=calculateElement(o,e[o],t,!1,r);return n};function calculateElement(e,t,r,n,i){switch(t&&t.toBSON&&(t=t.toBSON()),void 0===t?"undefined":_typeof(t)){case"string":return 1+Buffer$6.byteLength(e,"utf8")+1+4+Buffer$6.byteLength(t,"utf8")+1;case"number":return Math.floor(t)===t&&t>=BSON$2.JS_INT_MIN&&t<=BSON$2.JS_INT_MAX&&t>=BSON$2.BSON_INT32_MIN&&t<=BSON$2.BSON_INT32_MAX?(null!=e?Buffer$6.byteLength(e,"utf8")+1:0)+5:(null!=e?Buffer$6.byteLength(e,"utf8")+1:0)+9;case"undefined":return n||!i?(null!=e?Buffer$6.byteLength(e,"utf8")+1:0)+1:0;case"boolean":return(null!=e?Buffer$6.byteLength(e,"utf8")+1:0)+2;case"object":if(null==t||t instanceof MinKey$3||t instanceof MaxKey$2||"MinKey"===t._bsontype||"MaxKey"===t._bsontype)return(null!=e?Buffer$6.byteLength(e,"utf8")+1:0)+1;if(t instanceof ObjectID$2||"ObjectID"===t._bsontype)return(null!=e?Buffer$6.byteLength(e,"utf8")+1:0)+13;if(t instanceof Date||isDate$1(t))return(null!=e?Buffer$6.byteLength(e,"utf8")+1:0)+9;if(void 0!==Buffer$6&&Buffer$6.isBuffer(t))return(null!=e?Buffer$6.byteLength(e,"utf8")+1:0)+6+t.length;if(t instanceof Long$3||t instanceof Double$2||t instanceof Timestamp$2||"Long"===t._bsontype||"Double"===t._bsontype||"Timestamp"===t._bsontype)return(null!=e?Buffer$6.byteLength(e,"utf8")+1:0)+9;if(t instanceof decimal128||"Decimal128"===t._bsontype)return(null!=e?Buffer$6.byteLength(e,"utf8")+1:0)+17;if(t instanceof Code$2||"Code"===t._bsontype)return null!=t.scope&&Object.keys(t.scope).length>0?(null!=e?Buffer$6.byteLength(e,"utf8")+1:0)+1+4+4+Buffer$6.byteLength(t.code.toString(),"utf8")+1+calculateObjectSize(t.scope,r,i):(null!=e?Buffer$6.byteLength(e,"utf8")+1:0)+1+4+Buffer$6.byteLength(t.code.toString(),"utf8")+1;if(t instanceof Binary$3||"Binary"===t._bsontype)return t.sub_type===Binary$3.SUBTYPE_BYTE_ARRAY?(null!=e?Buffer$6.byteLength(e,"utf8")+1:0)+(t.position+1+4+1+4):(null!=e?Buffer$6.byteLength(e,"utf8")+1:0)+(t.position+1+4+1);if(t instanceof _Symbol$1||"Symbol"===t._bsontype)return(null!=e?Buffer$6.byteLength(e,"utf8")+1:0)+Buffer$6.byteLength(t.value,"utf8")+4+1+1;if(t instanceof DBRef$2||"DBRef"===t._bsontype){var o={$ref:t.collection,$id:t.oid};return null!=t.db&&(o.$db=t.db),o=Object.assign(o,t.fields),(null!=e?Buffer$6.byteLength(e,"utf8")+1:0)+1+calculateObjectSize(o,r,i)}return t instanceof RegExp||"[object RegExp]"===Object.prototype.toString.call(t)?(null!=e?Buffer$6.byteLength(e,"utf8")+1:0)+1+Buffer$6.byteLength(t.source,"utf8")+1+(t.global?1:0)+(t.ignoreCase?1:0)+(t.multiline?1:0)+1:t instanceof BSONRegExp$2||"BSONRegExp"===t._bsontype?(null!=e?Buffer$6.byteLength(e,"utf8")+1:0)+1+Buffer$6.byteLength(t.pattern,"utf8")+1+Buffer$6.byteLength(t.options,"utf8")+1:(null!=e?Buffer$6.byteLength(e,"utf8")+1:0)+calculateObjectSize(t,r,i)+1;case"function":if(t instanceof RegExp||"[object RegExp]"===Object.prototype.toString.call(t)||"[object RegExp]"===String.call(t))return(null!=e?Buffer$6.byteLength(e,"utf8")+1:0)+1+Buffer$6.byteLength(t.source,"utf8")+1+(t.global?1:0)+(t.ignoreCase?1:0)+(t.multiline?1:0)+1;if(r&&null!=t.scope&&Object.keys(t.scope).length>0)return(null!=e?Buffer$6.byteLength(e,"utf8")+1:0)+1+4+4+Buffer$6.byteLength(normalizedFunctionString$2(t),"utf8")+1+calculateObjectSize(t.scope,r,i);if(r)return(null!=e?Buffer$6.byteLength(e,"utf8")+1:0)+1+4+Buffer$6.byteLength(normalizedFunctionString$2(t),"utf8")+1}return 0}var BSON$2={BSON_INT32_MAX:2147483647,BSON_INT32_MIN:-2147483648,JS_INT_MAX:9007199254740992,JS_INT_MIN:-9007199254740992},calculate_size=calculateObjectSize,Buffer$7=buffer__WEBPACK_IMPORTED_MODULE_0___default.a.Buffer,ensure_buffer=function(e){if(e instanceof Buffer$7)return e;if(e instanceof Uint8Array)return new Buffer$7(e.buffer);throw new TypeError("Must use either Buffer or Uint8Array")},Buffer$8=buffer__WEBPACK_IMPORTED_MODULE_0___default.a.Buffer,MAXSIZE=17825792,buffer=new Buffer$8(MAXSIZE),BSON$3=function(){};BSON$3.prototype.serialize=function(e,t){var r="boolean"==typeof(t=t||{}).checkKeys&&t.checkKeys,n="boolean"==typeof t.serializeFunctions&&t.serializeFunctions,i="boolean"!=typeof t.ignoreUndefined||t.ignoreUndefined,o="number"==typeof t.minInternalBufferSize?t.minInternalBufferSize:MAXSIZE;buffer.length<o&&(buffer=new Buffer$8(o));var s=serializer(buffer,e,r,0,0,n,i,[]),u=new Buffer$8(s);return buffer.copy(u,0,0,u.length),u},BSON$3.prototype.serializeWithBufferAndIndex=function(e,t,r){var n="boolean"==typeof(r=r||{}).checkKeys&&r.checkKeys,i="boolean"==typeof r.serializeFunctions&&r.serializeFunctions,o="boolean"!=typeof r.ignoreUndefined||r.ignoreUndefined,s="number"==typeof r.index?r.index:0,u=serializer(buffer,e,n,0,0,i,o);return t=ensure_buffer(t),buffer.copy(t,s,0,u),s+u-1},BSON$3.prototype.deserialize=function(e,t){return e=ensure_buffer(e),deserializer(e,t)},BSON$3.prototype.calculateObjectSize=function(e,t){var r="boolean"==typeof(t=t||{}).serializeFunctions&&t.serializeFunctions,n="boolean"!=typeof t.ignoreUndefined||t.ignoreUndefined;return calculate_size(e,r,n)},BSON$3.prototype.deserializeStream=function(e,t,r,n,i,o){o=Object.assign({allowObjectSmallerThanBufferSize:!0},o),e=ensure_buffer(e);for(var s=t,u=0;u<r;u++){var a=e[s]|e[s+1]<<8|e[s+2]<<16|e[s+3]<<24;o.index=s,n[i+u]=this.deserialize(e,o),s+=a}return s},BSON$3.BSON_INT32_MAX=2147483647,BSON$3.BSON_INT32_MIN=-2147483648,BSON$3.BSON_INT64_MAX=Math.pow(2,63)-1,BSON$3.BSON_INT64_MIN=-Math.pow(2,63),BSON$3.JS_INT_MAX=9007199254740992,BSON$3.JS_INT_MIN=-9007199254740992,BSON$3.BSON_DATA_NUMBER=1,BSON$3.BSON_DATA_STRING=2,BSON$3.BSON_DATA_OBJECT=3,BSON$3.BSON_DATA_ARRAY=4,BSON$3.BSON_DATA_BINARY=5,BSON$3.BSON_DATA_OID=7,BSON$3.BSON_DATA_BOOLEAN=8,BSON$3.BSON_DATA_DATE=9,BSON$3.BSON_DATA_NULL=10,BSON$3.BSON_DATA_REGEXP=11,BSON$3.BSON_DATA_CODE=13,BSON$3.BSON_DATA_SYMBOL=14,BSON$3.BSON_DATA_CODE_W_SCOPE=15,BSON$3.BSON_DATA_INT=16,BSON$3.BSON_DATA_TIMESTAMP=17,BSON$3.BSON_DATA_LONG=18,BSON$3.BSON_DATA_MIN_KEY=255,BSON$3.BSON_DATA_MAX_KEY=127,BSON$3.BSON_BINARY_SUBTYPE_DEFAULT=0,BSON$3.BSON_BINARY_SUBTYPE_FUNCTION=1,BSON$3.BSON_BINARY_SUBTYPE_BYTE_ARRAY=2,BSON$3.BSON_BINARY_SUBTYPE_UUID=3,BSON$3.BSON_BINARY_SUBTYPE_MD5=4,BSON$3.BSON_BINARY_SUBTYPE_USER_DEFINED=128;var bson=BSON$3,Code_1$1=code,Map_1=map,Symbol_1$1=symbol,BSON_1=BSON$3,DBRef_1$1=db_ref,Binary_1$1=binary,ObjectId$1=objectid,ObjectID_1$1=objectid,Long_1$1=long_1,Timestamp_1$1=timestamp,Double_1$1=double_1,Int32_1$1=int_32,MinKey_1$1=min_key,MaxKey_1$1=max_key,BSONRegExp_1$1=regexp,Decimal128_1$1=decimal128;bson.Code=Code_1$1,bson.Map=Map_1,bson.Symbol=Symbol_1$1,bson.BSON=BSON_1,bson.DBRef=DBRef_1$1,bson.Binary=Binary_1$1,bson.ObjectId=ObjectId$1,bson.ObjectID=ObjectID_1$1,bson.Long=Long_1$1,bson.Timestamp=Timestamp_1$1,bson.Double=Double_1$1,bson.Int32=Int32_1$1,bson.MinKey=MinKey_1$1,bson.MaxKey=MaxKey_1$1,bson.BSONRegExp=BSONRegExp_1$1,bson.Decimal128=Decimal128_1$1;var jsBson=bson;__webpack_exports__.a=jsBson}).call(this,__webpack_require__(3),__webpack_require__(4))},function(e,t,r){r(10);var n="undefined"!=typeof self&&self||this;e.exports=n.fetch.bind(n)},function(e,t,r){(function(t){function r(e){var t=o([["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/],["Search Bot",/(nuhk)|(Googlebot)|(Yammybot)|(Openbot)|(Slurp)|(MSNBot)|(Ask Jeeves\/Teoma)|(ia_archiver)/]]).filter(function(t){return t.rule&&t.rule.test(e)})[0];return t?t.name:null}function n(){return void 0!==t&&t.version&&{name:"node",version:t.version.slice(1),os:t.platform}}function i(e){var t=o([["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["vivaldi",/Vivaldi\/([0-9\.]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)$/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FBAV\/([0-9\.]+)/],["instagram",/Instagram\ ([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/]]);if(!e)return null;var n=t.map(function(t){var r=t.rule.exec(e),n=r&&r[1].split(/[._]/).slice(0,3);return n&&n.length<3&&(n=n.concat(1==n.length?[0,0]:[0])),r&&{name:t.name,version:n.join(".")}}).filter(Boolean)[0]||null;return n&&(n.os=r(e)),/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/i.test(e)&&((n=n||{}).bot=!0),n}function o(e){return e.map(function(e){return{name:e[0],rule:e[1]}})}e.exports={detect:function(){return"undefined"!=typeof navigator?i(navigator.userAgent):n()},detectOS:r,getNodeVersion:n,parseUserAgent:i}}).call(this,r(4))},function(e,t){t.read=function(e,t,r,n,i){var o,s,u=8*i-n-1,a=(1<<u)-1,f=a>>1,c=-7,l=r?i-1:0,h=r?-1:1,p=e[t+l];for(l+=h,o=p&(1<<-c)-1,p>>=-c,c+=u;c>0;o=256*o+e[t+l],l+=h,c-=8);for(s=o&(1<<-c)-1,o>>=-c,c+=n;c>0;s=256*s+e[t+l],l+=h,c-=8);if(0===o)o=1-f;else{if(o===a)return s?NaN:1/0*(p?-1:1);s+=Math.pow(2,n),o-=f}return(p?-1:1)*s*Math.pow(2,o-n)},t.write=function(e,t,r,n,i,o){var s,u,a,f=8*o-i-1,c=(1<<f)-1,l=c>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:o-1,_=n?1:-1,d=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(u=isNaN(t)?1:0,s=c):(s=Math.floor(Math.log(t)/Math.LN2),t*(a=Math.pow(2,-s))<1&&(s--,a*=2),(t+=s+l>=1?h/a:h*Math.pow(2,1-l))*a>=2&&(s++,a/=2),s+l>=c?(u=0,s=c):s+l>=1?(u=(t*a-1)*Math.pow(2,i),s+=l):(u=t*Math.pow(2,l-1)*Math.pow(2,i),s=0));i>=8;e[r+p]=255&u,p+=_,u/=256,i-=8);for(s=s<<i|u,f+=i;f>0;e[r+p]=255&s,p+=_,s/=256,f-=8);e[r+p-_]|=128*d}},function(e,t){var r={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==r.call(e)}},function(e,t){!function(e){"use strict";if(!e.fetch){var t={searchParams:"URLSearchParams"in e,iterable:"Symbol"in e&&"iterator"in Symbol,blob:"FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in e,arrayBuffer:"ArrayBuffer"in e};if(t.arrayBuffer)var r=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],n=function(e){return e&&DataView.prototype.isPrototypeOf(e)},i=ArrayBuffer.isView||function(e){return e&&r.indexOf(Object.prototype.toString.call(e))>-1};c.prototype.append=function(e,t){e=u(e),t=a(t);var r=this.map[e];this.map[e]=r?r+","+t:t},c.prototype.delete=function(e){delete this.map[u(e)]},c.prototype.get=function(e){return e=u(e),this.has(e)?this.map[e]:null},c.prototype.has=function(e){return this.map.hasOwnProperty(u(e))},c.prototype.set=function(e,t){this.map[u(e)]=a(t)},c.prototype.forEach=function(e,t){for(var r in this.map)this.map.hasOwnProperty(r)&&e.call(t,this.map[r],r,this)},c.prototype.keys=function(){var e=[];return this.forEach(function(t,r){e.push(r)}),f(e)},c.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),f(e)},c.prototype.entries=function(){var e=[];return this.forEach(function(t,r){e.push([r,t])}),f(e)},t.iterable&&(c.prototype[Symbol.iterator]=c.prototype.entries);var o=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];y.prototype.clone=function(){return new y(this,{body:this._bodyInit})},d.call(y.prototype),d.call(b.prototype),b.prototype.clone=function(){return new b(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new c(this.headers),url:this.url})},b.error=function(){var e=new b(null,{status:0,statusText:""});return e.type="error",e};var s=[301,302,303,307,308];b.redirect=function(e,t){if(-1===s.indexOf(t))throw new RangeError("Invalid status code");return new b(null,{status:t,headers:{location:e}})},e.Headers=c,e.Request=y,e.Response=b,e.fetch=function(e,r){return new Promise(function(n,i){var o=new y(e,r),s=new XMLHttpRequest;s.onload=function(){var e={status:s.status,statusText:s.statusText,headers:function(e){var t=new c;return e.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(e){var r=e.split(":"),n=r.shift().trim();if(n){var i=r.join(":").trim();t.append(n,i)}}),t}(s.getAllResponseHeaders()||"")};e.url="responseURL"in s?s.responseURL:e.headers.get("X-Request-URL");var t="response"in s?s.response:s.responseText;n(new b(t,e))},s.onerror=function(){i(new TypeError("Network request failed"))},s.ontimeout=function(){i(new TypeError("Network request failed"))},s.open(o.method,o.url,!0),"include"===o.credentials?s.withCredentials=!0:"omit"===o.credentials&&(s.withCredentials=!1),"responseType"in s&&t.blob&&(s.responseType="blob"),o.headers.forEach(function(e,t){s.setRequestHeader(t,e)}),s.send(void 0===o._bodyInit?null:o._bodyInit)})},e.fetch.polyfill=!0}function u(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function a(e){return"string"!=typeof e&&(e=String(e)),e}function f(e){var r={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return t.iterable&&(r[Symbol.iterator]=function(){return r}),r}function c(e){this.map={},e instanceof c?e.forEach(function(e,t){this.append(t,e)},this):Array.isArray(e)?e.forEach(function(e){this.append(e[0],e[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function l(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function h(e){return new Promise(function(t,r){e.onload=function(){t(e.result)},e.onerror=function(){r(e.error)}})}function p(e){var t=new FileReader,r=h(t);return t.readAsArrayBuffer(e),r}function _(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function d(){return this.bodyUsed=!1,this._initBody=function(e){if(this._bodyInit=e,e)if("string"==typeof e)this._bodyText=e;else if(t.blob&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(t.formData&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(t.searchParams&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else if(t.arrayBuffer&&t.blob&&n(e))this._bodyArrayBuffer=_(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!t.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(e)&&!i(e))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=_(e)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):t.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},t.blob&&(this.blob=function(){var e=l(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?l(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(p)}),this.text=function(){var e=l(this);if(e)return e;if(this._bodyBlob)return function(e){var t=new FileReader,r=h(t);return t.readAsText(e),r}(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),r=new Array(t.length),n=0;n<t.length;n++)r[n]=String.fromCharCode(t[n]);return r.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},t.formData&&(this.formData=function(){return this.text().then(g)}),this.json=function(){return this.text().then(JSON.parse)},this}function y(e,t){var r=(t=t||{}).body;if(e instanceof y){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new c(e.headers)),this.method=e.method,this.mode=e.mode,r||null==e._bodyInit||(r=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"omit",!t.headers&&this.headers||(this.headers=new c(t.headers)),this.method=function(e){var t=e.toUpperCase();return o.indexOf(t)>-1?t:e}(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&r)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(r)}function g(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var r=e.split("="),n=r.shift().replace(/\+/g," "),i=r.join("=").replace(/\+/g," ");t.append(decodeURIComponent(n),decodeURIComponent(i))}}),t}function b(e,t){t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new c(t.headers),this.url=t.url||"",this._initBody(e)}}("undefined"!=typeof self?self:this)},function(e,t,r){"use strict";r.r(t);var n=function(){function e(e,t,r,n,i,o,s){this.userId=e,this.deviceId=t,this.accessToken=r,this.refreshToken=n,this.loggedInProviderType=i,this.loggedInProviderName=o,this.userProfile=s}return e.empty=function(){return new e(void 0,void 0,void 0,void 0,void 0,void 0,void 0)},e.prototype.loggedOut=function(){return new e(void 0,this.deviceId,void 0,void 0,void 0,void 0,void 0)},e.prototype.merge=function(t){return new e(void 0===t.userId?this.userId:t.userId,void 0===t.deviceId?this.deviceId:t.deviceId,void 0===t.accessToken?this.accessToken:t.accessToken,void 0===t.refreshToken?this.refreshToken:t.refreshToken,void 0===t.loggedInProviderType?this.loggedInProviderType:t.loggedInProviderType,void 0===t.loggedInProviderName?this.loggedInProviderName:t.loggedInProviderName,void 0===t.userProfile?this.userProfile:t.userProfile)},e}(),i=r(0),o=r.n(i),s=r(5),u=o.a.Buffer;var a={Binary:{toExtendedJSON:function(e){return{$binary:{base64:u.isBuffer(e.buffer)?e.buffer.toString("base64"):u.from(e.buffer).toString("base64"),subType:function(e){var t=Number(e).toString(16);return 1===t.length?"0"+t:t}(e.sub_type)}}},fromExtendedJSON:function(e,t){var r=t.$binary.subType?parseInt(t.$binary.subType,16):0,n=new u(t.$binary.base64,"base64");return new e.Binary(n,r)}},Code:{toExtendedJSON:function(e){return e.scope?{$code:e.code,$scope:e.scope}:{$code:e.code}},fromExtendedJSON:function(e,t){return new e.Code(t.$code,t.$scope)}},DBRef:{toExtendedJSON:function(e){var t={$ref:e.collection,$id:e.oid};return e.db&&(t.$db=e.db),t=Object.assign(t,e.fields)},fromExtendedJSON:function(e,t){var r=Object.assign({},t);return["$ref","$id","$db"].forEach(function(e){return delete r[e]}),new e.DBRef(t.$ref,t.$id,t.$db,r)}},Decimal128:{toExtendedJSON:function(e){return{$numberDecimal:e.toString()}},fromExtendedJSON:function(e,t){return new e.Decimal128.fromString(t.$numberDecimal)}},Double:{toExtendedJSON:function(e,t){return t&&t.relaxed&&isFinite(e.value)?e.value:{$numberDouble:e.value.toString()}},fromExtendedJSON:function(e,t,r){return r&&r.relaxed?parseFloat(t.$numberDouble):new e.Double(parseFloat(t.$numberDouble))}},Int32:{toExtendedJSON:function(e,t){return t&&t.relaxed?e.value:{$numberInt:e.value.toString()}},fromExtendedJSON:function(e,t,r){return r&&r.relaxed?parseInt(t.$numberInt,10):new e.Int32(t.$numberInt)}},Long:{toExtendedJSON:function(e,t){return t&&t.relaxed?e.toNumber():{$numberLong:e.toString()}},fromExtendedJSON:function(e,t,r){var n=e.Long.fromString(t.$numberLong);return r&&r.relaxed?n.toNumber():n}},MaxKey:{toExtendedJSON:function(){return{$maxKey:1}},fromExtendedJSON:function(e){return new e.MaxKey}},MinKey:{toExtendedJSON:function(){return{$minKey:1}},fromExtendedJSON:function(e){return new e.MinKey}},ObjectID:{toExtendedJSON:function(e){return e.toHexString?{$oid:e.toHexString()}:{$oid:e.toString("hex")}},fromExtendedJSON:function(e,t){return new e.ObjectID(t.$oid)}},BSONRegExp:{toExtendedJSON:function(e){return{$regularExpression:{pattern:e.pattern,options:e.options}}},fromExtendedJSON:function(e,t){return new e.BSONRegExp(t.$regularExpression.pattern,t.$regularExpression.options.split("").sort().join(""))}},Symbol:{toExtendedJSON:function(e){return{$symbol:e.value}},fromExtendedJSON:function(e,t){return new e.Symbol(t.$symbol)}},Timestamp:{toExtendedJSON:function(e){return{$timestamp:{t:e.high_,i:e.low_}}},fromExtendedJSON:function(e,t){return new e.Timestamp(t.$timestamp.i,t.$timestamp.t)}}},f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c=s.a,l=["Binary","Code","DBRef","Decimal128","Double","Int32","Long","MaxKey","MinKey","ObjectID","BSONRegExp","Symbol","Timestamp"];p(c);var h={$oid:a.ObjectID,$binary:a.Binary,$symbol:a.Symbol,$numberInt:a.Int32,$numberDecimal:a.Decimal128,$numberDouble:a.Double,$numberLong:a.Long,$minKey:a.MinKey,$maxKey:a.MaxKey,$regularExpression:a.BSONRegExp,$timestamp:a.Timestamp};function p(e){l.forEach(function(t){if(!e[t])throw new Error("passed in module does not contain all BSON types required")}),c=e}var _=2147483647,d=-2147483648,y=0x8000000000000000,g=-0x8000000000000000;function b(e,t){return e.map(function(e){return N(e,t)})}function N(e,t){if(Array.isArray(e))return b(e,t);if(void 0===e)return null;if(e instanceof Date){var r=e.getTime(),n=r>-1&&r<2534023188e5;return t.relaxed&&n?{$date:function(e){var t=e.toISOString();return 0!==e.getUTCMilliseconds()?t:t.slice(0,-5)+"Z"}(e)}:{$date:{$numberLong:e.getTime().toString()}}}if("number"==typeof e&&!t.relaxed){if(Math.floor(e)===e){var i=e>=g&&e<=y;if(e>=d&&e<=_)return{$numberInt:e.toString()};if(i)return{$numberLong:e.toString()}}return{$numberDouble:e.toString()}}return null!=e&&"object"===(void 0===e?"undefined":f(e))?B(e,t):e}function B(e,t){if(null==e||"object"!==(void 0===e?"undefined":f(e)))throw new Error("not an object instance");if(e._bsontype&&-1!==l.indexOf(e._bsontype)){if("Code"===e._bsontype&&e.scope){var r=B(e.scope,t),n=Object.assign({},e,{scope:r});return a.Code.toExtendedJSON(n,t)}if("DBRef"===e._bsontype&&e.oid){var i=B(e.oid,t),o=Object.assign({},e,{oid:i});return a.DBRef.toExtendedJSON(o,t)}return a[e._bsontype].toExtendedJSON(e,t)}var s={};for(var u in e){var c=e[u];if(Array.isArray(c))s[u]=b(c,t);else if(null!=c&&c._bsontype&&-1!==l.indexOf(c._bsontype))if("Code"===c._bsontype&&c.scope){var h=B(c.scope,t),p=Object.assign({},c,{scope:h});s[u]=a.Code.toExtendedJSON(p,t)}else if("DBRef"===c._bsontype&&c.oid){var _=B(c.oid,t),d=Object.assign({},c,{oid:_});s[u]=a.DBRef.toExtendedJSON(d,t)}else s[u]=a[c._bsontype].toExtendedJSON(c,t);else c instanceof Date?s[u]=N(c,t):null!=c&&"object"===(void 0===c?"undefined":f(c))&&(s[u]=B(c,t));if(s[u]=N(c,t),c instanceof RegExp){var y=c.flags;void 0===y&&(y=c.toString().match(/[gimuy]*$/)[0]),s[u]=a.BSONRegExp.toExtendedJSON({pattern:c.source,options:y})}}return s}var O={parse:function(e,t){var r=this;return"boolean"==typeof(t=t||{relaxed:!1}).relaxed&&(t.strict=!t.relaxed),"boolean"==typeof t.strict&&(t.relaxed=!t.strict),JSON.parse(e,function(e,n){return function e(t,r,n,i){if("number"==typeof n){if(Math.floor(n)===n){var o=n>=g&&n<=y;if(n>=d&&n<=_)return i.strict?new c.Int32(n):n;if(o)return i.strict?new c.Long.fromNumber(n):n}return new c.Double(n)}if(null==n||"object"!==(void 0===n?"undefined":f(n)))return n;if(n.$undefined)return null;for(var s=Object.keys(n).filter(function(e){return e.startsWith("$")&&null!=n[e]}),u=0;u<s.length;u++){var l=h[s[u]];if(l)return l.fromExtendedJSON(c,n,i)}if(null!=n.$date){var p=n.$date,b=new Date;return"string"==typeof p?b.setTime(Date.parse(p)):p instanceof c.Long?b.setTime(p.toNumber()):"number"==typeof p&&i.relaxed&&b.setTime(p),b}if(null!=n.$code){if(n.$scope)var N=e(t,null,n.$scope);return Object.assign({},n).$scope=N,a.Code.fromExtendedJSON(c,n)}if(null!=n.$ref||null!=n.$dbPointer){var B=n.$ref?n:n.$dbPointer;if(B instanceof c.DBRef)return B;var O=!0;if(Object.keys(B).filter(function(e){return e.startsWith("$")}).forEach(function(e){-1===["$ref","$id","$db"].indexOf(e)&&(O=!1)}),O)return a.DBRef.fromExtendedJSON(c,B)}return n}(r,0,n,t)})},stringify:function(e,t,r,n){var i={};null!=n&&"object"===(void 0===n?"undefined":f(n))?i=n:null!=r&&"object"===(void 0===r?"undefined":f(r))?(i=r,r=0):null!=t&&"object"===(void 0===t?"undefined":f(t))&&(i=t,t=null);var o=Array.isArray(e)?b(e,i):B(e,i);return JSON.stringify(o,t,r)},setBSONModule:p,BSON:c},m={parse:O.parse,stringify:O.stringify,setBSONModule:O.setBSONModule,BSON:O.BSON},E=m.parse,S=m.stringify,A=function(){function e(){}return e.APPLICATION_JSON="application/json",e}(),w=function(){function e(){}return e.getAuthorizationBearer=function(t){return e.AUTHORIZATION_BEARER+" "+t},e.CONTENT_TYPE_CANON="Content-Type",e.CONTENT_TYPE=e.CONTENT_TYPE_CANON.toLocaleLowerCase(),e.AUTHORIZATION_CANON="Authorization",e.AUTHORIZATION=e.AUTHORIZATION_CANON.toLocaleLowerCase(),e.AUTHORIZATION_BEARER="Bearer",e}(),v=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),T=function(e){Error.call(this,e),Error.captureStackTrace&&Error.captureStackTrace(this),this.message=e,this.name=this.constructor.name};T.prototype=Object.create(Error.prototype);var I,D,R=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return v(t,e),t}(T);!function(e){e[e.TRANSPORT_ERROR=0]="TRANSPORT_ERROR",e[e.DECODING_ERROR=1]="DECODING_ERROR",e[e.ENCODING_ERROR=2]="ENCODING_ERROR"}(D||(D={}));var L,$=((I={})[D.TRANSPORT_ERROR]="the request transport encountered an error communicating with Stitch",I[D.DECODING_ERROR]="an error occurred while decoding a response from Stitch",I[D.ENCODING_ERROR]="an error occurred while encoding a request for Stitch",I),M=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),P=function(e){function t(t,r){var n=this,i=t.message+"("+D[r]+"): "+$[r];return(n=e.call(this,i)||this).underlyingError=t,n.errorCode=r,n.errorCodeName=D[r],n}return M(t,e),t}(R);!function(e){e[e.MissingAuthReq=0]="MissingAuthReq",e[e.InvalidSession=1]="InvalidSession",e[e.UserAppDomainMismatch=2]="UserAppDomainMismatch",e[e.DomainNotAllowed=3]="DomainNotAllowed",e[e.ReadSizeLimitExceeded=4]="ReadSizeLimitExceeded",e[e.InvalidParameter=5]="InvalidParameter",e[e.MissingParameter=6]="MissingParameter",e[e.TwilioError=7]="TwilioError",e[e.GCMError=8]="GCMError",e[e.HTTPError=9]="HTTPError",e[e.AWSError=10]="AWSError",e[e.MongoDBError=11]="MongoDBError",e[e.ArgumentsNotAllowed=12]="ArgumentsNotAllowed",e[e.FunctionExecutionError=13]="FunctionExecutionError",e[e.NoMatchingRuleFound=14]="NoMatchingRuleFound",e[e.InternalServerError=15]="InternalServerError",e[e.AuthProviderNotFound=16]="AuthProviderNotFound",e[e.AuthProviderAlreadyExists=17]="AuthProviderAlreadyExists",e[e.ServiceNotFound=18]="ServiceNotFound",e[e.ServiceTypeNotFound=19]="ServiceTypeNotFound",e[e.ServiceAlreadyExists=20]="ServiceAlreadyExists",e[e.ServiceCommandNotFound=21]="ServiceCommandNotFound",e[e.ValueNotFound=22]="ValueNotFound",e[e.ValueAlreadyExists=23]="ValueAlreadyExists",e[e.ValueDuplicateName=24]="ValueDuplicateName",e[e.FunctionNotFound=25]="FunctionNotFound",e[e.FunctionAlreadyExists=26]="FunctionAlreadyExists",e[e.FunctionDuplicateName=27]="FunctionDuplicateName",e[e.FunctionSyntaxError=28]="FunctionSyntaxError",e[e.FunctionInvalid=29]="FunctionInvalid",e[e.IncomingWebhookNotFound=30]="IncomingWebhookNotFound",e[e.IncomingWebhookAlreadyExists=31]="IncomingWebhookAlreadyExists",e[e.IncomingWebhookDuplicateName=32]="IncomingWebhookDuplicateName",e[e.RuleNotFound=33]="RuleNotFound",e[e.ApiKeyNotFound=34]="ApiKeyNotFound",e[e.RuleAlreadyExists=35]="RuleAlreadyExists",e[e.RuleDuplicateName=36]="RuleDuplicateName",e[e.AuthProviderDuplicateName=37]="AuthProviderDuplicateName",e[e.RestrictedHost=38]="RestrictedHost",e[e.ApiKeyAlreadyExists=39]="ApiKeyAlreadyExists",e[e.IncomingWebhookAuthFailed=40]="IncomingWebhookAuthFailed",e[e.ExecutionTimeLimitExceeded=41]="ExecutionTimeLimitExceeded",e[e.FunctionNotCallable=42]="FunctionNotCallable",e[e.UserAlreadyConfirmed=43]="UserAlreadyConfirmed",e[e.UserNotFound=44]="UserNotFound",e[e.UserDisabled=45]="UserDisabled",e[e.Unknown=46]="Unknown"}(L||(L={}));var x={MissingAuthReq:L.MissingAuthReq,InvalidSession:L.InvalidSession,UserAppDomainMismatch:L.UserAppDomainMismatch,DomainNotAllowed:L.DomainNotAllowed,ReadSizeLimitExceeded:L.ReadSizeLimitExceeded,InvalidParameter:L.InvalidParameter,MissingParameter:L.MissingParameter,TwilioError:L.TwilioError,GCMError:L.GCMError,HTTPError:L.HTTPError,AWSError:L.AWSError,MongoDBError:L.MongoDBError,ArgumentsNotAllowed:L.ArgumentsNotAllowed,FunctionExecutionError:L.FunctionExecutionError,NoMatchingRuleFound:L.NoMatchingRuleFound,InternalServerError:L.InternalServerError,AuthProviderNotFound:L.AuthProviderNotFound,AuthProviderAlreadyExists:L.AuthProviderAlreadyExists,ServiceNotFound:L.ServiceNotFound,ServiceTypeNotFound:L.ServiceTypeNotFound,ServiceAlreadyExists:L.ServiceAlreadyExists,ServiceCommandNotFound:L.ServiceCommandNotFound,ValueNotFound:L.ValueNotFound,ValueAlreadyExists:L.ValueAlreadyExists,ValueDuplicateName:L.ValueDuplicateName,FunctionNotFound:L.FunctionNotFound,FunctionAlreadyExists:L.FunctionAlreadyExists,FunctionDuplicateName:L.FunctionDuplicateName,FunctionSyntaxError:L.FunctionSyntaxError,FunctionInvalid:L.FunctionInvalid,IncomingWebhookNotFound:L.IncomingWebhookNotFound,IncomingWebhookAlreadyExists:L.IncomingWebhookAlreadyExists,IncomingWebhookDuplicateName:L.IncomingWebhookDuplicateName,RuleNotFound:L.RuleNotFound,APIKeyNotFound:L.ApiKeyNotFound,RuleAlreadyExists:L.RuleAlreadyExists,RuleDuplicateName:L.RuleDuplicateName,AuthProviderDuplicateName:L.AuthProviderDuplicateName,RestrictedHost:L.RestrictedHost,APIKeyAlreadyExists:L.ApiKeyAlreadyExists,IncomingWebhookAuthFailed:L.IncomingWebhookAuthFailed,ExecutionTimeLimitExceeded:L.ExecutionTimeLimitExceeded,FunctionNotCallable:L.FunctionNotCallable,UserAlreadyConfirmed:L.UserAlreadyConfirmed,UserNotFound:L.UserNotFound,UserDisabled:L.UserDisabled};var U,j,C=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),F=function(e){function t(t,r){void 0===r&&(r=L.Unknown);var n=e.call(this,t)||this;return n.message=t,n.errorCode=r,n.errorCodeName=L[r],n}return C(t,e),t}(R);function k(e){return e instanceof R?e:new P(e,D.DECODING_ERROR)}function z(e){if(void 0===e.body)throw new F("received unexpected status code "+e.statusCode,L.Unknown);var t;try{t=e.body}catch(t){throw new F("received unexpected status code "+e.statusCode,L.Unknown)}var r=function(e,t){if(void 0===e.headers[w.CONTENT_TYPE]||void 0!==e.headers[w.CONTENT_TYPE]&&e.headers[w.CONTENT_TYPE]!==A.APPLICATION_JSON)return t;var r=JSON.parse(t);if(!(r instanceof Object))return t;var n=r;if(void 0===n[U.ERROR])return t;var i=n[U.ERROR];if(void 0===n[U.ERROR_CODE])return i;var o=n[U.ERROR_CODE];throw new F(i,function(e){return e in x?x[e]:L.Unknown}(o))}(e,t);throw new F(r,L.Unknown)}!function(e){e.ERROR="error",e.ERROR_CODE="error_code"}(U||(U={})),function(e){e.GET="GET",e.POST="POST",e.PUT="PUT",e.DELETE="DELETE",e.HEAD="HEAD",e.OPTIONS="OPTIONS",e.TRACE="TRACE",e.PATCH="PATCH"}(j||(j={}));var Y=j,K=function(){function e(e,t,r,n,i){this.method=e,this.path=t,this.headers=r,this.body=i,this.startedAt=n}return Object.defineProperty(e.prototype,"builder",{get:function(){return new e.Builder(this)},enumerable:!0,configurable:!0}),e}();!function(e){var t=function(){function t(e){void 0!==e&&(this.method=e.method,this.path=e.path,this.headers=e.headers,this.body=e.body,this.startedAt=e.startedAt)}return t.prototype.withMethod=function(e){return this.method=e,this},t.prototype.withPath=function(e){return this.path=e,this},t.prototype.withHeaders=function(e){return this.headers=e,this},t.prototype.withBody=function(e){return this.body=e,this},t.prototype.build=function(){if(void 0===this.method)throw Error("must set method");if(void 0===this.path)throw Error("must set non-empty path");return void 0===this.startedAt&&(this.startedAt=Date.now()/1e3),new e(this.method,this.path,void 0===this.headers?{}:this.headers,this.startedAt,this.body)},t}();e.Builder=t}(K||(K={}));var W=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),X=function(e){function t(t,r,n){void 0===r&&(r=!1),void 0===n&&(n=!0);var i=e.call(this,t.method,t.path,t.headers,t.startedAt,t.body)||this;return i.useRefreshToken=r,i.shouldRefreshOnFailure=n,i}return W(t,e),Object.defineProperty(t.prototype,"builder",{get:function(){return new t.Builder(this)},enumerable:!0,configurable:!0}),t}(K);!function(e){var t=function(t){function r(e){return t.call(this,e)||this}return W(r,t),r.prototype.withAccessToken=function(){return this.useRefreshToken=!1,this},r.prototype.withRefreshToken=function(){return this.useRefreshToken=!0,this},r.prototype.withShouldRefreshOnFailure=function(e){return this.shouldRefreshOnFailure=e,this},r.prototype.build=function(){return this.useRefreshToken&&(this.shouldRefreshOnFailure=!1),new e(t.prototype.build.call(this),this.useRefreshToken,this.shouldRefreshOnFailure)},r}(K.Builder);e.Builder=t}(X||(X={}));var V=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),J=function(e){function t(t,r){var n=this;return(n=t instanceof X?e.call(this,t,t.useRefreshToken,t.shouldRefreshOnFailure)||this:e.call(this,t)||this).document=r,n}return V(t,e),Object.defineProperty(t.prototype,"builder",{get:function(){return new t.Builder(this)},enumerable:!0,configurable:!0}),t}(X);!function(e){var t=function(t){function r(e){var r=t.call(this,e)||this;return void 0!==e&&(r.document=e.document,r.useRefreshToken=e.useRefreshToken),r}return V(r,t),r.prototype.withDocument=function(e){return this.document=e,this},r.prototype.withAccessToken=function(){return this.useRefreshToken=!1,this},r.prototype.build=function(){if(void 0===this.document||!(this.document instanceof Object))throw new Error("document must be set: "+this.document);return void 0===this.headers&&this.withHeaders({}),this.headers[w.CONTENT_TYPE]=A.APPLICATION_JSON,this.withBody(S(this.document)),new e(t.prototype.build.call(this),this.document)},r}(X.Builder);e.Builder=t}(J||(J={}));var q,G,H=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Z=function(e){function t(t,r){var n=e.call(this,t.method,t.path,t.headers,t.startedAt,t.body)||this;return n.document=r,n}return H(t,e),Object.defineProperty(t.prototype,"builder",{get:function(){return new t.Builder(this)},enumerable:!0,configurable:!0}),t}(K);!function(e){var t=function(t){function r(e){var r=t.call(this,e)||this;return void 0!==e&&(r.document=e.document),r}return H(r,t),r.prototype.withDocument=function(e){return this.document=e,this},r.prototype.build=function(){if(void 0===this.document||!(this.document instanceof Object))throw new Error("document must be set");return void 0===this.headers&&this.withHeaders({}),this.headers[w.CONTENT_TYPE]=A.APPLICATION_JSON,this.withBody(S(this.document)),new e(t.prototype.build.call(this),this.document)},r}(K.Builder);e.Builder=t}(Z||(Z={})),function(e){e[e.LoggedOutDuringRequest=0]="LoggedOutDuringRequest",e[e.MustAuthenticateFirst=1]="MustAuthenticateFirst",e[e.UserNoLongerValid=2]="UserNoLongerValid",e[e.CouldNotLoadPersistedAuthInfo=3]="CouldNotLoadPersistedAuthInfo",e[e.CouldNotPersistAuthInfo=4]="CouldNotPersistAuthInfo"}(G||(G={}));var Q=((q={})[G.LoggedOutDuringRequest]="logged out while making a request to Stitch",q[G.MustAuthenticateFirst]="method called requires being authenticated",q[G.UserNoLongerValid]="user instance being accessed is no longer valid; please get a new user with auth.getUser()",q[G.CouldNotLoadPersistedAuthInfo]="failed to load stored auth information for Stitch",q[G.CouldNotPersistAuthInfo]="failed to save auth information for Stitch",q),ee=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),te=function(e){function t(t){var r=this,n="("+G[t]+"): "+Q[t];return(r=e.call(this,n)||this).errorCode=t,r.errorCodeName=G[t],r}return ee(t,e),t}(R),re=function(){return function(e,t,r,n){this.authInfo=e,this.providerType=t,this.providerName=r,this.asLink=n}}(),ne=r(1);function ie(e){var t,r=e.length%4;0!=r?t=e+"=".repeat(4-r):t=e;var n=Object(ne.toByteArray)(t);return function(e,t,r){var n="",i="";r=Math.min(e.length,r||1/0);for(var o=t=t||0;o<r;o++)e[o]<=127?(n+=se(i)+String.fromCharCode(e[o]),i=""):i+="%"+e[o].toString(16);return n+se(i)}(n,0,n.length)}function oe(e){for(var t,r=1/0,n=e.length,i=null,o=[],s=0;s<n;s++){if((t=e.charCodeAt(s))>55295&&t<57344){if(!i){if(t>56319){(r-=3)>-1&&o.push(239,191,189);continue}if(s+1===n){(r-=3)>-1&&o.push(239,191,189);continue}i=t;continue}if(t<56320){(r-=3)>-1&&o.push(239,191,189),i=t;continue}t=i-55296<<10|t-56320|65536,i=null}else i&&((r-=3)>-1&&o.push(239,191,189),i=null);if(t<128){if((r-=1)<0)break;o.push(t)}else if(t<2048){if((r-=2)<0)break;o.push(t>>6|192,63&t|128)}else if(t<65536){if((r-=3)<0)break;o.push(t>>12|224,t>>6&63|128,63&t|128)}else{if(!(t<2097152))throw new Error("Invalid code point");if((r-=4)<0)break;o.push(t>>18|240,t>>12&63|128,t>>6&63|128,63&t|128)}}return o}function se(e){try{return decodeURIComponent(e)}catch(e){return String.fromCharCode(65533)}}var ue,ae=function(){function e(e,t){this.expires=e,this.issuedAt=t}return e.fromEncoded=function(t){var r=e.splitToken(t),n=JSON.parse(ie(r[1]));return new e(n.exp,n.iat)},e.splitToken=function(e){var t=e.split(".");if(3!==t.length)throw new Error("Malformed JWT token. The string "+e+" should have 3 parts.");return t},e}(),fe=function(){function e(e){this.auth=e}return e.prototype.shouldRefresh=function(){var e=this.auth;if(void 0===e)return!1;if(!e.isLoggedIn)return!1;var t,r=e.authInfo;if(void 0===r)return!1;try{t=ae.fromEncoded(r.accessToken)}catch(e){return console.log(e),!1}return!(Date.now()/1e3<t.expires-300)},e.prototype.run=function(){var e=this;this.shouldRefresh()?this.auth.refreshAccessToken().then(function(){e.nextTimeout=setTimeout(function(){return e.run()},6e4)}).catch(function(){e.nextTimeout=setTimeout(function(){return e.run()},6e4)}):this.nextTimeout=setTimeout(function(){return e.run()},6e4)},e.prototype.stop=function(){clearTimeout(this.nextTimeout)},e}(),ce=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();!function(e){e.USER_ID="user_id",e.DEVICE_ID="device_id",e.ACCESS_TOKEN="access_token",e.REFRESH_TOKEN="refresh_token"}(ue||(ue={}));var le,he=function(e){function t(t,r,n,i){return e.call(this,t,r,n,i)||this}return ce(t,e),t.fromJSON=function(e){return new t(e[ue.USER_ID],e[ue.DEVICE_ID],e[ue.ACCESS_TOKEN],e[ue.REFRESH_TOKEN])},t.prototype.toJSON=function(){var e;return(e={})[ue.USER_ID]=this.userId,e[ue.DEVICE_ID]=this.deviceId,e[ue.ACCESS_TOKEN]=this.accessToken,e[ue.REFRESH_TOKEN]=this.refreshToken,e},t}(n),pe=function(){function e(){}return e.keyPresent=function(e,t){if(void 0===t[e])throw new Error("expected "+e+" to be present")},e}(),_e=function(){function e(e,t,r){void 0===t&&(t={}),void 0===r&&(r=[]),this.userType=e,this.data=t,this.identities=r}return e.empty=function(){return new e},Object.defineProperty(e.prototype,"name",{get:function(){return this.data.name},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"email",{get:function(){return this.data.email},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pictureUrl",{get:function(){return this.data.picture},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"firstName",{get:function(){return this.data.first_name},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lastName",{get:function(){return this.data.last_name},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"gender",{get:function(){return this.data.gender},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"birthday",{get:function(){return this.data.birthday},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minAge",{get:function(){var e=this.data.min_age;if(void 0!==e)return+e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxAge",{get:function(){var e=this.data.max_age;if(void 0!==e)return+e},enumerable:!0,configurable:!0}),e}(),de=function(){return function(e,t){this.id=e,this.providerType=t}}(),ye=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();!function(e){e.ID="id",e.PROVIDER_TYPE="provider_type"}(le||(le={}));var ge,be=function(e){function t(t,r){return e.call(this,t,r)||this}return ye(t,e),t.fromJSON=function(e){return new t(e[le.ID],e[le.PROVIDER_TYPE])},t.prototype.toJSON=function(){var e;return(e={})[le.ID]=this.id,e[le.PROVIDER_TYPE]=this.providerType,e},t}(de),Ne=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();!function(e){e.DATA="data",e.USER_TYPE="type",e.IDENTITIES="identities"}(ge||(ge={}));var Be,Oe=function(e){function t(t,r,n){return e.call(this,t,r,n)||this}return Ne(t,e),t.fromJSON=function(e){return pe.keyPresent(ge.USER_TYPE,e),pe.keyPresent(ge.DATA,e),pe.keyPresent(ge.IDENTITIES,e),new t(e[ge.USER_TYPE],e[ge.DATA],e[ge.IDENTITIES].map(be.fromJSON))},t.prototype.toJSON=function(){var e;return(e={})[ge.DATA]=this.data,e[ge.USER_TYPE]=this.userType,e[ge.IDENTITIES]=this.identities,e},t}(_e),me=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();!function(e){e.ID="id",e.PROVIDER_TYPE="provider_type"}(Be||(Be={}));var Ee,Se=function(e){function t(t,r){return e.call(this,t,r)||this}return me(t,e),t.decode=function(e){return new t(e[Be.ID],e[Be.PROVIDER_TYPE])},t.prototype.encode=function(){var e;return(e={})[Be.ID]=this.id,e[Be.PROVIDER_TYPE]=this.providerType,e},t}(de),Ae=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();!function(e){e.DATA="data",e.USER_TYPE="type",e.IDENTITIES="identities"}(Ee||(Ee={}));var we,ve=function(e){function t(t,r,n){var i=e.call(this,t,r,n)||this;return i.userType=t,i.data=r,i.identities=n,i}return Ae(t,e),t.decode=function(e){return e?new t(e[Ee.USER_TYPE],e[Ee.DATA],e[Ee.IDENTITIES].map(function(e){return Se.decode(e)})):void 0},t.prototype.encode=function(){var e;return(e={})[Ee.DATA]=this.data,e[Ee.USER_TYPE]=this.userType,e[Ee.IDENTITIES]=this.identities.map(function(e){return e.encode()}),e},t}(_e),Te=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();function Ie(e,t){var r=new Re(e.userId,e.deviceId,e.accessToken,e.refreshToken,e.loggedInProviderType,e.loggedInProviderName,e.userProfile?new ve(e.userProfile.userType,e.userProfile.data,e.userProfile.identities.map(function(e){return new Se(e.id,e.providerType)})):void 0);t.set(Re.STORAGE_NAME,JSON.stringify(r.encode()))}!function(e){e.USER_ID="user_id",e.DEVICE_ID="device_id",e.ACCESS_TOKEN="access_token",e.REFRESH_TOKEN="refresh_token",e.LOGGED_IN_PROVIDER_TYPE="logged_in_provider_type",e.LOGGED_IN_PROVIDER_NAME="logged_in_provider_name",e.USER_PROFILE="user_profile"}(we||(we={}));var De,Re=function(e){function t(t,r,n,i,o,s,u){var a=e.call(this,t,r,n,i,o,s,u)||this;return a.userProfile=u,a}return Te(t,e),t.decode=function(e){var r=e[we.USER_ID],n=e[we.DEVICE_ID],i=e[we.ACCESS_TOKEN],o=e[we.REFRESH_TOKEN],s=e[we.LOGGED_IN_PROVIDER_TYPE],u=e[we.LOGGED_IN_PROVIDER_NAME],a=e[we.USER_PROFILE];return new t(r,n,i,o,s,u,ve.decode(a))},t.prototype.encode=function(){var e={};return e[we.USER_ID]=this.userId,e[we.ACCESS_TOKEN]=this.accessToken,e[we.REFRESH_TOKEN]=this.refreshToken,e[we.DEVICE_ID]=this.deviceId,e[we.LOGGED_IN_PROVIDER_NAME]=this.loggedInProviderName,e[we.LOGGED_IN_PROVIDER_TYPE]=this.loggedInProviderType,e[we.USER_PROFILE]=this.userProfile?this.userProfile.encode():void 0,e},t.STORAGE_NAME="auth_info",t}(n),Le=function(){function e(e,t,r,i){var o;void 0===i&&(i=!0),this.requestClient=e,this.authRoutes=t,this.storage=r;try{o=function(e){var t=e.get(Re.STORAGE_NAME);if(t)return Re.decode(JSON.parse(t))}(r)}catch(e){throw new te(G.CouldNotLoadPersistedAuthInfo)}this.authInfo=void 0===o?n.empty():o,this.prepUser(),i&&(this.accessTokenRefresher=new fe(this),this.accessTokenRefresher.run())}return Object.defineProperty(e.prototype,"isLoggedIn",{get:function(){return void 0!==this.currentUser},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"user",{get:function(){return this.currentUser},enumerable:!0,configurable:!0}),e.prototype.doAuthenticatedRequest=function(e){var t=this;return this.requestClient.doRequest(this.prepareAuthRequest(e)).catch(function(r){return t.handleAuthFailure(r,e)})},e.prototype.doAuthenticatedRequestWithDecoder=function(e,t){return this.doAuthenticatedRequest(e).then(function(e){var r=E(e.body,{strict:!1});return t?t.decode(r):r}).catch(function(e){throw k(e)})},e.prototype.refreshAccessToken=function(){var e=this,t=(new X.Builder).withRefreshToken().withPath(this.authRoutes.sessionRoute).withMethod(Y.POST);return this.doAuthenticatedRequest(t.build()).then(function(t){try{var r=he.fromJSON(JSON.parse(t.body));e.authInfo=e.authInfo.merge(r)}catch(e){throw new P(e,D.DECODING_ERROR)}try{Ie(e.authInfo,e.storage)}catch(e){throw new te(G.CouldNotPersistAuthInfo)}})},e.prototype.loginWithCredentialInternal=function(e){return e instanceof re?this.processLogin(e,e.authInfo,e.asLink):this.isLoggedIn?e.providerCapabilities.reusesExistingSession&&e.providerType===this.currentUser.loggedInProviderType?Promise.resolve(this.currentUser):(this.logoutInternal(),this.doLogin(e,!1)):this.doLogin(e,!1)},e.prototype.linkUserWithCredentialInternal=function(e,t){return void 0!==this.currentUser&&e.id!==this.currentUser.id?Promise.reject(new te(G.UserNoLongerValid)):this.doLogin(t,!0)},e.prototype.logoutInternal=function(){var e=this;return this.isLoggedIn?this.doLogout().then(function(){e.clearAuth()}).catch(function(){e.clearAuth()}):Promise.resolve()},Object.defineProperty(e.prototype,"hasDeviceId",{get:function(){return void 0!==this.authInfo.deviceId&&""!==this.authInfo.deviceId&&"000000000000000000000000"!==this.authInfo.deviceId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"deviceId",{get:function(){if(this.hasDeviceId)return this.authInfo.deviceId},enumerable:!0,configurable:!0}),e.prototype.prepareAuthRequest=function(e){if(!this.isLoggedIn)throw new te(G.MustAuthenticateFirst);var t=e.builder,r=t.headers||{};return e.useRefreshToken?r[w.AUTHORIZATION]=w.getAuthorizationBearer(this.authInfo.refreshToken):r[w.AUTHORIZATION]=w.getAuthorizationBearer(this.authInfo.accessToken),t.withHeaders(r),t.build()},e.prototype.handleAuthFailure=function(e,t){var r=this;if(!(e instanceof F)||e.errorCode!==L.InvalidSession)throw e;if(t.useRefreshToken||!t.shouldRefreshOnFailure)throw this.clearAuth(),e;return this.tryRefreshAccessToken(t.startedAt).then(function(){return r.doAuthenticatedRequest(t.builder.withShouldRefreshOnFailure(!1).build())})},e.prototype.tryRefreshAccessToken=function(e){if(!this.isLoggedIn)throw new te(G.LoggedOutDuringRequest);try{if(ae.fromEncoded(this.authInfo.accessToken).issuedAt>=e)return Promise.resolve()}catch(e){}return this.refreshAccessToken()},e.prototype.prepUser=function(){void 0!==this.authInfo.userId&&(this.currentUser=this.userFactory.makeUser(this.authInfo.userId,this.authInfo.loggedInProviderType,this.authInfo.loggedInProviderName,this.authInfo.userProfile))},e.prototype.attachAuthOptions=function(e){var t={};t.device=this.deviceInfo,e.options=t},e.prototype.doLogin=function(e,t){var r=this;return this.doLoginRequest(e,t).then(function(n){return r.processLoginResponse(e,n,t)}).then(function(e){return r.onAuthEvent(),e})},e.prototype.doLoginRequest=function(e,t){var r=new Z.Builder;r.withMethod(Y.POST),t?r.withPath(this.authRoutes.getAuthProviderLinkRoute(e.providerName)):r.withPath(this.authRoutes.getAuthProviderLoginRoute(e.providerName));var n=e.material;if(this.attachAuthOptions(n),r.withDocument(n),!t)return this.requestClient.doRequest(r.build());var i=new J(r.build(),r.document);return this.doAuthenticatedRequest(i)},e.prototype.processLogin=function(e,t,r){var i=this,o=this.authInfo,s=this.currentUser;return t=this.authInfo.merge(new n(t.userId,t.deviceId,t.accessToken,t.refreshToken,e.providerType,e.providerName,void 0)),this.authInfo=t,this.currentUser=this.userFactory.makeUser(this.authInfo.userId,e.providerType,e.providerName,void 0),this.doGetUserProfile().then(function(r){t=t.merge(new n(t.userId,t.deviceId,t.accessToken,t.refreshToken,e.providerType,e.providerName,r));try{Ie(t,i.storage)}catch(e){throw new te(G.CouldNotPersistAuthInfo)}return i.authInfo=t,i.currentUser=i.userFactory.makeUser(i.authInfo.userId,e.providerType,e.providerName,r),i.currentUser}).catch(function(e){throw r?(i.authInfo=o,i.currentUser=s):i.clearAuth(),e})},e.prototype.processLoginResponse=function(e,t,r){try{if(!t)throw new F("the login response could not be processed for credential: "+e+";response was undefined");if(!t.body)throw new F("response with status code "+t.statusCode+" has empty body");return this.processLogin(e,he.fromJSON(JSON.parse(t.body)),r)}catch(e){throw new P(e,D.DECODING_ERROR)}},e.prototype.doGetUserProfile=function(){var e=new X.Builder;return e.withMethod(Y.GET).withPath(this.authRoutes.profileRoute),this.doAuthenticatedRequest(e.build()).then(function(e){return Oe.fromJSON(JSON.parse(e.body))}).catch(function(e){throw e instanceof R?e:new P(e,D.DECODING_ERROR)})},e.prototype.doLogout=function(){var e=new X.Builder;return e.withRefreshToken().withPath(this.authRoutes.sessionRoute).withMethod(Y.DELETE),this.doAuthenticatedRequest(e.build()).then(function(){})},e.prototype.clearAuth=function(){if(this.isLoggedIn){this.authInfo=this.authInfo.loggedOut();try{Ie(this.authInfo,this.storage)}catch(e){throw new te(G.CouldNotPersistAuthInfo)}this.currentUser=void 0,this.onAuthEvent()}},e.prototype.close=function(){this.accessTokenRefresher&&this.accessTokenRefresher.stop()},e}(),$e=function(){function e(e,t,r,n){this.id=e,this.loggedInProviderType=t,this.loggedInProviderName=r,this.profile=void 0===n?_e.empty():n}return Object.defineProperty(e.prototype,"userType",{get:function(){return this.profile.userType},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"identities",{get:function(){return this.profile.identities},enumerable:!0,configurable:!0}),e}();!function(e){e.DEVICE_ID="deviceId",e.APP_ID="appId",e.APP_VERSION="appVersion",e.PLATFORM="platform",e.PLATFORM_VERSION="platformVersion",e.SDK_VERSION="sdkVersion"}(De||(De={}));var Me,Pe=De,xe=function(){function e(){}return e.TYPE="anon-user",e.DEFAULT_NAME="anon-user",e}(),Ue=function(){return function(e){void 0===e&&(e=!1),this.reusesExistingSession=e}}(),je=(function(){}(),function(){function e(){}return e.TYPE="custom-token",e.DEFAULT_NAME="custom-token",e}());(Me||(Me={})).TOKEN="token";var Ce,Fe=function(){function e(){}return e.TYPE="oauth2-facebook",e.DEFAULT_NAME="oauth2-facebook",e}();(Ce||(Ce={})).ACCESS_TOKEN="accessToken";!function(){function e(e,t){var r;void 0===t&&(t=Fe.DEFAULT_NAME),this.providerType=Fe.TYPE,this.providerName=t,this.accessToken=e,this.material=((r={})[Ce.ACCESS_TOKEN]=this.accessToken,r)}Object.defineProperty(e.prototype,"providerCapabilities",{get:function(){return new Ue(!1)},enumerable:!0,configurable:!0})}();var ke,ze=function(){function e(){}return e.TYPE="oauth2-google",e.DEFAULT_NAME="oauth2-google",e}();(ke||(ke={})).AUTH_CODE="authCode";var Ye,Ke=function(){function e(){}return e.TYPE="api-key",e.DEFAULT_NAME="api-key",e}();(Ye||(Ye={})).KEY="key";var We,Xe=function(){return function(e,t,r){this.providerName=e,this.requestClient=t,this.baseRoute=r}}(),Ve=r(2);!function(e){e.ID="_id",e.KEY="key",e.NAME="name",e.DISABLED="disabled"}(We||(We={}));var Je,qe=function(){function e(e,t,r,n){this.id=Ve.a.ObjectID.createFromHexString(e),this.key=t,this.name=r,this.disabled=n}return e.readFromApi=function(t){var r="string"==typeof t?JSON.parse(t):t;return pe.keyPresent(We.ID,r),pe.keyPresent(We.NAME,r),pe.keyPresent(We.DISABLED,r),new e(r[We.ID],r[We.KEY],r[We.NAME],r[We.DISABLED])},e.prototype.toJSON=function(){var e;return(e={})[We.ID]=this.id,e[We.KEY]=this.key,e[We.NAME]=this.name,e[We.DISABLED]=this.disabled,e},e}(),Ge=function(){function e(){}return e.TYPE="api-key",e.DEFAULT_NAME="api-key",e}(),He=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();!function(e){e.NAME="name"}(Je||(Je={}));var Ze,Qe=function(e){function t(t,r){var n=r.baseAuthRoute+"/api_keys",i=Ge.DEFAULT_NAME;return e.call(this,i,t,n)||this}return He(t,e),t.prototype.createApiKey=function(e){var t,r=new J.Builder;return r.withMethod(Y.POST).withPath(this.baseRoute).withDocument((t={},t[Je.NAME]=e,t)).withRefreshToken(),this.requestClient.doAuthenticatedRequest(r.build()).then(function(e){return qe.readFromApi(e.body)}).catch(function(e){throw k(e)})},t.prototype.fetchApiKey=function(e){var t=new X.Builder;return t.withMethod(Y.GET).withPath(this.getApiKeyRoute(e.toHexString())),t.withRefreshToken(),this.requestClient.doAuthenticatedRequest(t.build()).then(function(e){return qe.readFromApi(e.body)}).catch(function(e){throw k(e)})},t.prototype.fetchApiKeys=function(){var e=new X.Builder;return e.withMethod(Y.GET).withPath(this.baseRoute),e.withRefreshToken(),this.requestClient.doAuthenticatedRequest(e.build()).then(function(e){var t=JSON.parse(e.body);if(Array.isArray(t))return t.map(function(e){return qe.readFromApi(e)});throw new P(new Error("unexpected non-array response from server"),D.DECODING_ERROR)}).catch(function(e){throw k(e)})},t.prototype.deleteApiKey=function(e){var t=new X.Builder;return t.withMethod(Y.DELETE).withPath(this.getApiKeyRoute(e.toHexString())),t.withRefreshToken(),this.requestClient.doAuthenticatedRequest(t.build()).then(function(){})},t.prototype.enableApiKey=function(e){var t=new X.Builder;return t.withMethod(Y.PUT).withPath(this.getApiKeyEnableRoute(e.toHexString())),t.withRefreshToken(),this.requestClient.doAuthenticatedRequest(t.build()).then(function(){})},t.prototype.disableApiKey=function(e){var t=new X.Builder;return t.withMethod(Y.PUT).withPath(this.getApiKeyDisableRoute(e.toHexString())),t.withRefreshToken(),this.requestClient.doAuthenticatedRequest(t.build()).then(function(){})},t.prototype.getApiKeyRoute=function(e){return this.baseRoute+"/"+e},t.prototype.getApiKeyEnableRoute=function(e){return this.getApiKeyRoute(e)+"/enable"},t.prototype.getApiKeyDisableRoute=function(e){return this.getApiKeyRoute(e)+"/disable"},t}(Xe);(Ze||(Ze={})).KEY="key";var et,tt,rt=function(){function e(){}return e.TYPE="local-userpass",e.DEFAULT_NAME="local-userpass",e}(),nt=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();!function(e){e.EMAIL="email",e.PASSWORD="password"}(et||(et={})),function(e){e.EMAIL="email",e.PASSWORD="password",e.TOKEN="token",e.TOKEN_ID="tokenId"}(tt||(tt={}));var it,ot=function(e){function t(t,r,n){void 0===t&&(t=rt.DEFAULT_NAME);var i=n.getAuthProviderRoute(t);return e.call(this,t,r,i)||this}return nt(t,e),t.prototype.registerWithEmailInternal=function(e,t){var r,n=new Z.Builder;return n.withMethod(Y.POST).withPath(this.getRegisterWithEmailRoute()),n.withDocument(((r={})[et.EMAIL]=e,r[et.PASSWORD]=t,r)),this.requestClient.doRequest(n.build()).then(function(){})},t.prototype.confirmUserInternal=function(e,t){var r,n=new Z.Builder;return n.withMethod(Y.POST).withPath(this.getConfirmUserRoute()),n.withDocument(((r={})[tt.TOKEN]=e,r[tt.TOKEN_ID]=t,r)),this.requestClient.doRequest(n.build()).then(function(){})},t.prototype.resendConfirmationEmailInternal=function(e){var t,r=new Z.Builder;return r.withMethod(Y.POST).withPath(this.getResendConfirmationEmailRoute()),r.withDocument(((t={})[tt.EMAIL]=e,t)),this.requestClient.doRequest(r.build()).then(function(){})},t.prototype.resetPasswordInternal=function(e,t,r){var n,i=new Z.Builder;return i.withMethod(Y.POST).withPath(this.getResetPasswordRoute()),i.withDocument(((n={})[tt.TOKEN]=e,n[tt.TOKEN_ID]=t,n[tt.PASSWORD]=r,n)),this.requestClient.doRequest(i.build()).then(function(){})},t.prototype.sendResetPasswordEmailInternal=function(e){var t,r=new Z.Builder;return r.withMethod(Y.POST).withPath(this.getSendResetPasswordEmailRoute()),r.withDocument(((t={})[tt.EMAIL]=e,t)),this.requestClient.doRequest(r.build()).then(function(){})},t.prototype.getRegisterWithEmailRoute=function(){return this.getExtensionRoute("register")},t.prototype.getConfirmUserRoute=function(){return this.getExtensionRoute("confirm")},t.prototype.getResendConfirmationEmailRoute=function(){return this.getExtensionRoute("confirm/send")},t.prototype.getResetPasswordRoute=function(){return this.getExtensionRoute("reset")},t.prototype.getSendResetPasswordEmailRoute=function(){return this.getExtensionRoute("reset/send")},t.prototype.getExtensionRoute=function(e){return this.baseRoute+"/"+e},t}(Xe);!function(e){e.USERNAME="username",e.PASSWORD="password"}(it||(it={}));var st;!function(e){e.Normal="normal",e.Server="server",e.Unknown="unknown"}(st||(st={}));!function(){function e(e){this.suiteName=e,this.storage={}}e.prototype.get=function(e){return this.storage[this.suiteName+"."+e]},e.prototype.set=function(e,t){this.storage[this.suiteName+"."+e]=t},e.prototype.remove=function(e){delete this.storage[this.suiteName+"."+e]}}();var ut=function(){function e(e,t,r){this.requestClient=e,this.serviceRoutes=t,this.serviceName=r}return e.prototype.callFunction=function(e,t,r){return this.requestClient.doAuthenticatedRequestWithDecoder(this.getCallServiceFunctionRequest(e,t),r)},e.prototype.getCallServiceFunctionRequest=function(e,t){var r={name:e};void 0!==this.serviceName&&(r.service=this.serviceName),r.arguments=t;var n=new J.Builder;return n.withMethod(Y.POST).withPath(this.serviceRoutes.functionCallRoute),n.withDocument(r),n.build()},e}(),at=function(){function e(e,t){this.functionService=new ut(e,t.serviceRoutes)}return e.prototype.callFunction=function(e,t,r){return this.functionService.callFunction(e,t,r)},e}(),ft=function(){return function(e,t,r){var n=this;this.statusCode=t,this.body=r,this.headers={},Object.keys(e).map(function(t,r){n.headers[t.toLocaleLowerCase()]=e[t]})}}(),ct=r(6),lt=r.n(ct),ht=function(){function e(){}return e.prototype.roundTrip=function(e){var t=lt()(e.url,{body:e.body,headers:e.headers,method:e.method}),r=t.then(function(e){return e.text()});return Promise.all([t,r]).then(function(e){var t=e[0],r=e[1],n={};return t.headers.forEach(function(e,t){n[t]=e}),new ft(n,t.status,r)})},e}(),pt="/api/client/v2.0";function _t(e){return pt+"/app/"+e}function dt(e){return _t(e)+"/functions/call"}function yt(e,t){return _t(e)+"/auth/providers/"+t}function gt(e,t){return yt(e,t)+"/login"}var bt=function(){function e(e){var t=this;this.baseAuthRoute=pt+"/auth",this.sessionRoute=t.baseAuthRoute+"/session",this.profileRoute=t.baseAuthRoute+"/profile",this.clientAppId=e}return e.prototype.getAuthProviderRoute=function(e){return yt(this.clientAppId,e)},e.prototype.getAuthProviderLoginRoute=function(e){return gt(this.clientAppId,e)},e.prototype.getAuthProviderLinkRoute=function(e){return function(e,t){return gt(e,t)+"?link=true"}(this.clientAppId,e)},e.prototype.getAuthProviderExtensionRoute=function(e,t){return this.getAuthProviderRoute(e)+"/"+t},e}(),Nt=function(){return function(e){this.clientAppId=e,this.functionCallRoute=dt(e)}}(),Bt=function(){return function(e){this.clientAppId=e,this.authRoutes=new bt(e),this.serviceRoutes=new Nt(e),this.functionCallRoute=dt(e)}}(),Ot=function(){return function(e,t,r,n){this.method=e,this.url=t,this.headers=r,this.body=n}}();function mt(e){return e.statusCode>=200&&e.statusCode<300?e:z(e)}!function(e){var t=function(){function t(e){e&&(this.method=e.method,this.url=e.url,this.headers=e.headers,this.body=e.body)}return t.prototype.withMethod=function(e){return this.method=e,this},t.prototype.withUrl=function(e){return this.url=e,this},t.prototype.withHeaders=function(e){return this.headers=e,this},t.prototype.withBody=function(e){return this.body=e,this},t.prototype.build=function(){if(void 0===this.method)throw new Error("must set method");if(void 0===this.url)throw new Error("must set non-empty url");return new e(this.method,this.url,void 0===this.headers?{}:this.headers,this.body)},t}();e.Builder=t}(Ot||(Ot={}));var Et=function(){function e(e,t){this.baseUrl=e,this.transport=t}return e.prototype.doRequest=function(e){return this.transport.roundTrip(this.buildRequest(e)).catch(function(e){throw new P(e,D.TRANSPORT_ERROR)}).then(mt)},e.prototype.buildRequest=function(e){return(new Ot.Builder).withMethod(e.method).withUrl(""+this.baseUrl+e.path).withHeaders(e.headers).withBody(e.body).build()},e}(),St=function(){function e(e,t,r,n){this.baseUrl=e,this.storage=t,this.dataDirectory=r,this.transport=n}return e.prototype.builder=function(){return new e.Builder(this)},e}();!function(e){var t=function(){function t(e){e&&(this.baseUrl=e.baseUrl,this.storage=e.storage,this.dataDirectory=e.dataDirectory,this.transport=e.transport)}return t.prototype.withBaseUrl=function(e){return this.baseUrl=e,this},t.prototype.withStorage=function(e){return this.storage=e,this},t.prototype.withDataDirectory=function(e){return this.dataDirectory=e,this},t.prototype.withTransport=function(e){return this.transport=e,this},t.prototype.build=function(){return new e(this.baseUrl,this.storage,this.dataDirectory,this.transport)},t}();e.Builder=t}(St||(St={}));var At=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),wt=function(e){function t(t,r,n){var i=e.call(this,t.baseUrl,t.storage,t.dataDirectory,t.transport)||this;return i.localAppVersion=n,i.localAppName=r,i}return At(t,e),t.prototype.builder=function(){return new t.Builder(this)},t}(St);!function(e){var t=function(t){function r(e){var r=t.call(this,e)||this;return e&&(r.localAppVersion=e.localAppVersion,r.localAppName=e.localAppName),r}return At(r,t),r.prototype.withLocalAppName=function(e){return this.localAppName=e,this},r.prototype.withLocalAppVersion=function(e){return this.localAppVersion=e,this},r.prototype.build=function(){var r=t.prototype.build.call(this);return new e(r,this.localAppName,this.localAppVersion)},r}(St.Builder);e.Builder=t}(wt||(wt={}));var vt,Tt=function(){return function(e,t,r,n){this.clientAppId=e,this.dataDirectory=t,this.localAppName=r,this.localAppVersion=n}}(),It=(function(){}(),function(){}(),function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}()),Dt=function(e){function t(t,r){return e.call(this,t,r)||this}return It(t,e),t.prototype.createApiKey=function(t){return e.prototype.createApiKey.call(this,t)},t.prototype.fetchApiKey=function(t){return e.prototype.fetchApiKey.call(this,t)},t.prototype.fetchApiKeys=function(){return e.prototype.fetchApiKeys.call(this)},t.prototype.deleteApiKey=function(t){return e.prototype.deleteApiKey.call(this,t)},t.prototype.enableApiKey=function(t){return e.prototype.enableApiKey.call(this,t)},t.prototype.disableApiKey=function(t){return e.prototype.disableApiKey.call(this,t)},t}(Qe);(vt||(vt={})).factory=new(function(){function e(){}return e.prototype.getClient=function(e,t,r){return new Dt(e,r)},e}());var Rt,Lt=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),$t=function(e){function t(t,r){return e.call(this,rt.DEFAULT_NAME,t,r)||this}return Lt(t,e),t.prototype.registerWithEmail=function(t,r){return e.prototype.registerWithEmailInternal.call(this,t,r)},t.prototype.confirmUser=function(t,r){return e.prototype.confirmUserInternal.call(this,t,r)},t.prototype.resendConfirmationEmail=function(t){return e.prototype.resendConfirmationEmailInternal.call(this,t)},t.prototype.resetPassword=function(t,r,n){return e.prototype.resetPasswordInternal.call(this,t,r,n)},t.prototype.sendResetPasswordEmail=function(t){return e.prototype.sendResetPasswordEmailInternal.call(this,t)},t}(ot);(Rt||(Rt={})).factory=new(function(){function e(){}return e.prototype.getClient=function(e,t,r){return new $t(t,r)},e}());var Mt,Pt=function(){function e(e){this.suiteName=e}return e.prototype.getKey=function(e){return"__stitch.client."+this.suiteName+"."+e},e.prototype.get=function(e){return localStorage.getItem(this.getKey(e))},e.prototype.set=function(e,t){localStorage.setItem(this.getKey(e),t)},e.prototype.remove=function(e){localStorage.removeItem(this.getKey(e))},e}(),xt=r(7);!function(e){e.StitchError="_stitch_error",e.State="_stitch_state",e.UserAuth="_stitch_ua",e.LinkUser="_stitch_link_user",e.StitchLink="_stitch_link",e.ClientAppId="_stitch_client_app_id"}(Mt||(Mt={}));var Ut,jt=Mt;!function(e){e.ProviderName="_stitch_redirect_provider_name",e.ProviderType="_stitch_redirect_provider_type",e.State="_stitch_redirect_state"}(Ut||(Ut={}));var Ct=Ut,Ft=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),kt=function(e){function t(t){return e.call(this,t)||this}return Ft(t,e),t}(R),zt=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Yt=function(e){function t(t,r,n,i,o){var s=e.call(this,t,r,n,i)||this;return s.auth=o,s}return zt(t,e),t.prototype.linkWithCredential=function(e){return this.auth.linkWithCredential(this,e)},t.prototype.linkUserWithRedirect=function(e){return this.auth.linkWithRedirectInternal(this,e)},t}($e),Kt=function(){function e(e){this.auth=e}return e.prototype.makeUser=function(e,t,r,n){return new Yt(e,t,r,n,this.auth)},e}(),Wt=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Xt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",Vt=function(e){function t(t,r,n,i,o){void 0===o&&(o=window);var s=e.call(this,t,r,n)||this;return s.browserAuthRoutes=r,s.authStorage=n,s.appInfo=i,s.jsdomWindow=o,s.listeners=new Set,s}return Wt(t,e),Object.defineProperty(t.prototype,"userFactory",{get:function(){return new Kt(this)},enumerable:!0,configurable:!0}),t.prototype.getProviderClient=function(e,t){return function(e){return void 0!==e.getClient}(e)?e.getClient(this,this.requestClient,this.authRoutes):e.getNamedClient(t,this.requestClient,this.authRoutes)},t.prototype.loginWithCredential=function(t){return e.prototype.loginWithCredentialInternal.call(this,t)},t.prototype.loginWithRedirect=function(e){var t=this.prepareRedirect(e),r=t.redirectUrl,n=t.state;this.jsdomWindow.location.replace(this.browserAuthRoutes.getAuthProviderRedirectRoute(e,r,n,this.deviceInfo))},t.prototype.linkWithRedirectInternal=function(e,t){var r=this;if(void 0!==this.user&&e.id!==this.user.id)return Promise.reject(new te(G.UserNoLongerValid));var n=this.prepareRedirect(t),i=n.redirectUrl,o=n.state,s=this.browserAuthRoutes.getAuthProviderLinkRedirectRoute(t,i,o,this.deviceInfo);return fetch(new Request(s,{credentials:"include",headers:{Authorization:"Bearer "+this.authInfo.accessToken}})).then(function(e){r.jsdomWindow.location.replace(e.headers.get("X-Stitch-Location"))})},t.prototype.hasRedirectResult=function(){var e=!1;try{return e=this.parseRedirect().isValid}catch(e){return!1}finally{e||this.cleanupRedirect()}},t.prototype.handleRedirectResult=function(){try{var e=this.authStorage.get(Ct.ProviderName),t=this.authStorage.get(Ct.ProviderType),r=this.parseRedirect();return this.loginWithCredentialInternal(new re(this.processRedirectResult(r),t,e,r.asLink)).then(function(e){return e})}catch(e){return Promise.reject(e)}},t.prototype.linkWithCredential=function(t,r){return e.prototype.linkUserWithCredentialInternal.call(this,t,r)},t.prototype.logout=function(){return Promise.resolve(e.prototype.logoutInternal.call(this))},Object.defineProperty(t.prototype,"deviceInfo",{get:function(){var e={};this.hasDeviceId&&(e[Pe.DEVICE_ID]=this.deviceId),void 0!==this.appInfo.localAppName&&(e[Pe.APP_ID]=this.appInfo.localAppName),void 0!==this.appInfo.localAppVersion&&(e[Pe.APP_VERSION]=this.appInfo.localAppVersion);var t=Object(xt.detect)();return t?(e[Pe.PLATFORM]=t.name,e[Pe.PLATFORM_VERSION]=t.version):(e[Pe.PLATFORM]="web",e[Pe.PLATFORM_VERSION]="0.0.0"),e[Pe.SDK_VERSION]="4.0.13",e},enumerable:!0,configurable:!0}),t.prototype.addAuthListener=function(e){this.listeners.add(e),this.onAuthEvent(e)},t.prototype.removeAuthListener=function(e){this.listeners.delete(e)},t.prototype.onAuthEvent=function(e){var t=this;if(e){var r=this;new Promise(function(t){e.onAuthEvent(r),t(void 0)})}else this.listeners.forEach(function(e){t.onAuthEvent(e)})},t.prototype.cleanupRedirect=function(){this.jsdomWindow.history.replaceState(null,"",this.pageRootUrl()),this.authStorage.remove(Ct.State),this.authStorage.remove(Ct.ProviderName),this.authStorage.remove(Ct.ProviderType)},t.prototype.parseRedirect=function(){if(void 0===this.jsdomWindow)throw new kt("running in a non-browser environment");if(!this.jsdomWindow.location||!this.jsdomWindow.location.hash)throw new kt("window location hash was undefined");var e=this.authStorage.get(Ct.State);return function(e,t,r){var i=e.split("&"),o=new Jt;return i.forEach(function(e){var i=e.split("=");switch(decodeURIComponent(i[0])){case jt.StitchError:o.lastError=decodeURIComponent(i[1]);break;case jt.UserAuth:try{o.authInfo=function(e){var t=e.split("$");if(4!==t.length)throw new kt("invalid user auth data provided while marshalling user authentication data: "+e);var r=t[0],i=t[1],o=t[2],s=t[3];return new n(o,s,r,i)}(decodeURIComponent(i[1]))}catch(e){o.lastError=e}break;case jt.StitchLink:"ok"==i[1]&&(o.asLink=!0);break;case jt.State:var s=decodeURIComponent(i[1]);t===s&&(o.stateValid=!0);break;case jt.ClientAppId:var u=decodeURIComponent(i[1]);r===u&&(o.clientAppIdValid=!0)}}),o}(this.jsdomWindow.location.hash.substring(1),e,this.appInfo.clientAppId)},t.prototype.processRedirectResult=function(e){try{if(!e.isValid)throw new kt("invalid redirect result");if(e.lastError)throw new kt("error handling redirect: "+e.lastError);if(!e.authInfo)throw new kt("no user auth value was found: it could not be decoded from fragment")}catch(e){throw e}finally{this.cleanupRedirect()}return e.authInfo},t.prototype.prepareRedirect=function(e){this.authStorage.set(Ct.ProviderName,e.providerName),this.authStorage.set(Ct.ProviderType,e.providerType);var t=e.redirectUrl;void 0===t&&(t=this.pageRootUrl());var r=function(){for(var e="",t=0;t<64;++t)e+=Xt.charAt(Math.floor(Math.random()*Xt.length));return e}();return this.authStorage.set(Ct.State,r),{redirectUrl:t,state:r}},t.prototype.pageRootUrl=function(){return[this.jsdomWindow.location.protocol,"//",this.jsdomWindow.location.host,this.jsdomWindow.location.pathname].join("")},t}(Le);var Jt=function(){function e(){this.stateValid=!1,this.clientAppIdValid=!1,this.asLink=!1}return Object.defineProperty(e.prototype,"isValid",{get:function(){return this.stateValid&&this.clientAppIdValid},enumerable:!0,configurable:!0}),e}();var qt=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Gt=function(e){function t(t,r){var n=e.call(this,t)||this;return n.baseUrl=r,n}return qt(t,e),t.prototype.getAuthProviderRedirectRoute=function(e,t,r,n){return""+this.baseUrl+this.getAuthProviderLoginRoute(e.providerName)+"?redirect="+encodeURI(t)+"&state="+r+"&device="+this.uriEncodeObject(n)},t.prototype.getAuthProviderLinkRedirectRoute=function(e,t,r,n){return""+this.baseUrl+this.getAuthProviderLoginRoute(e.providerName)+"?redirect="+encodeURI(t)+"&state="+r+"&device="+this.uriEncodeObject(n)+"&link=true&providerRedirectHeader=true"},t.prototype.uriEncodeObject=function(e){return encodeURIComponent(function(e){var t;return"undefined"==typeof Uint8Array&&(t=oe(e)),t=new Uint8Array(oe(e)),Object(ne.fromByteArray)(t)}(JSON.stringify(e)))},t}(bt),Ht=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Zt=function(e){function t(t,r){var n=e.call(this,t)||this;return n.authRoutes=new Gt(t,r),n}return Ht(t,e),t}(Bt),Qt=function(){function e(e){this.proxy=e}return e.prototype.callFunction=function(e,t,r){return this.proxy.callFunction(e,t,r)},e}(),er=function(){function e(e,t){this.info=new Tt(e,t.dataDirectory,t.localAppName,t.localAppVersion),this.routes=new Zt(this.info.clientAppId,t.baseUrl);var r=new Et(t.baseUrl,t.transport);this.auth=new Vt(r,this.routes.authRoutes,t.storage,this.info),this.coreClient=new at(this.auth,this.routes)}return e.prototype.getServiceClient=function(e,t){return function(e){return void 0!==e.getClient}(e)?e.getClient(new ut(this.auth,this.routes.serviceRoutes,""),this.info):e.getNamedClient(new ut(this.auth,this.routes.serviceRoutes,t),this.info)},e.prototype.getGeneralServiceClient=function(e){return new Qt(new ut(this.auth,this.routes.serviceRoutes,e))},e.prototype.callFunction=function(e,t){return this.coreClient.callFunction(e,t)},e}();var tr,rr,nr,ir,or={},sr=(function(){function e(){}Object.defineProperty(e,"defaultAppClient",{get:function(){if(void 0===e.defaultClientAppId)throw new Error("default app client has not yet been initialized/set");return or[e.defaultClientAppId]},enumerable:!0,configurable:!0}),e.getAppClient=function(e){if(void 0!==or[e])throw new Error("client for app '"+e+"' has not yet been initialized");return or[e]},e.hasAppClient=function(e){return void 0!==or[e]},e.initializeDefaultAppClient=function(t,r){if(void 0===r&&(r=(new wt.Builder).build()),void 0===t||""===t)throw new Error("clientAppId must be set to a non-empty string");if(void 0!==e.defaultClientAppId)throw new Error("default app can only be set once; currently set to '"+e.defaultClientAppId+"'");var n=e.initializeAppClient(t,r);return e.defaultClientAppId=t,n},e.initializeAppClient=function(t,r){if(void 0===r&&(r=(new wt.Builder).build()),void 0===t||""===t)throw new Error("clientAppId must be set to a non-empty string");if(void 0!==or[t])throw new Error("client for app '"+t+"' has already been initialized");var n=r.builder();void 0===n.storage&&n.withStorage(new Pt(t)),void 0===n.transport&&n.withTransport(new ht),void 0!==n.baseUrl&&""!==n.baseUrl||n.withBaseUrl("https://stitch.mongodb.com"),void 0!==n.localAppName&&""!==n.localAppName||n.withLocalAppName(e.localAppName),void 0!==n.localAppVersion&&""!==n.localAppVersion||n.withLocalAppVersion(e.localAppVersion);var i=new er(t,n.build());return or[t]=i,i}}(),function(){function e(e,t,r,n){this.command=e,this.args=t,this.service=r,n&&(this.collectionDecoder=new(function(){function e(){}return e.prototype.decode=function(e){return e instanceof Array?e.map(function(e){return n.decode(e)}):[n.decode(e)]},e}()))}return e.prototype.iterator=function(){return this.executeRead().then(function(e){return e[Symbol.iterator]()})},e.prototype.first=function(){return this.executeRead().then(function(e){return e[0]})},e.prototype.asArray=function(){return this.executeRead()},e.prototype.executeRead=function(){return this.service.callFunction(this.command,[this.args],this.collectionDecoder)},e}()),ur=function(){return function(e){var t={};e.forEach(function(e,r){t[r]=e}),this.insertedIds=t}}();!function(e){e.InsertedIds="insertedIds"}(tr||(tr={})),function(e){e.InsertedId="insertedId"}(rr||(rr={})),function(e){e.MatchedCount="matchedCount",e.ModifiedCount="modifiedCount",e.UpsertedId="upsertedId"}(nr||(nr={})),function(e){e.DeletedCount="deletedCount"}(ir||(ir={}));var ar,fr=function(){function e(){}return e.prototype.decode=function(e){return new ur(e[tr.InsertedIds])},e}(),cr=function(){function e(){}return e.prototype.decode=function(e){return{insertedId:e[rr.InsertedId]}},e}(),lr=function(){function e(){}return e.prototype.decode=function(e){return{matchedCount:e[nr.MatchedCount],modifiedCount:e[nr.ModifiedCount],upsertedId:e[nr.UpsertedId]}},e}(),hr=function(){function e(){}return e.prototype.decode=function(e){return{deletedCount:e[ir.DeletedCount]}},e}(),pr=function(){function e(){}return e.remoteInsertManyResultDecoder=new fr,e.remoteInsertOneResultDecoder=new cr,e.remoteUpdateResultDecoder=new lr,e.remoteDeleteResultDecoder=new hr,e}(),_r=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},dr=function(){function e(e,t,r,n){var i=this;this.name=e,this.databaseName=t,this.service=r,this.codec=n,this.namespace=this.databaseName+"."+this.name,this.baseOperationArgs={collection:i.name,database:i.databaseName}}return e.prototype.withCollectionType=function(t){return new e(this.name,this.databaseName,this.service,t)},e.prototype.find=function(e,t){void 0===e&&(e={});var r=_r({},this.baseOperationArgs);return r.query=e,t&&(t.limit&&(r.limit=t.limit),t.projection&&(r.project=t.projection),t.sort&&(r.sort=t.sort)),new sr("find",r,this.service,this.codec)},e.prototype.aggregate=function(e){var t=_r({},this.baseOperationArgs);return t.pipeline=e,new sr("aggregate",t,this.service,this.codec)},e.prototype.count=function(e,t){void 0===e&&(e={});var r=_r({},this.baseOperationArgs);return r.query=e,t&&t.limit&&(r.limit=t.limit),this.service.callFunction("count",[r])},e.prototype.insertOne=function(e){var t=_r({},this.baseOperationArgs);return t.document=this.generateObjectIdIfMissing(this.codec?this.codec.encode(e):e),this.service.callFunction("insertOne",[t],pr.remoteInsertOneResultDecoder)},e.prototype.insertMany=function(e){var t=this,r=_r({},this.baseOperationArgs);return r.documents=e.map(function(e){return t.generateObjectIdIfMissing(t.codec?t.codec.encode(e):e)}),this.service.callFunction("insertMany",[r],pr.remoteInsertManyResultDecoder)},e.prototype.deleteOne=function(e){return this.executeDelete(e,!1)},e.prototype.deleteMany=function(e){return this.executeDelete(e,!0)},e.prototype.updateOne=function(e,t,r){return this.executeUpdate(e,t,r,!1)},e.prototype.updateMany=function(e,t,r){return this.executeUpdate(e,t,r,!0)},e.prototype.executeDelete=function(e,t){var r=_r({},this.baseOperationArgs);return r.query=e,this.service.callFunction(t?"deleteMany":"deleteOne",[r],pr.remoteDeleteResultDecoder)},e.prototype.executeUpdate=function(e,t,r,n){void 0===n&&(n=!1);var i=_r({},this.baseOperationArgs);return i.query=e,i.update=t,r&&r.upsert&&(i.upsert=r.upsert),this.service.callFunction(n?"updateMany":"updateOne",[i],pr.remoteUpdateResultDecoder)},e.prototype.generateObjectIdIfMissing=function(e){if(!e._id){var t=e;return t._id=new Ve.a.ObjectID,t}return e},e}(),yr=function(){function e(e,t){this.name=e,this.service=t}return e.prototype.collection=function(e,t){return new dr(e,this.name,this.service,t)},e}(),gr=function(){function e(e){this.service=e}return e.prototype.db=function(e){return new yr(e,this.service)},e}(),br=function(){function e(e){this.proxy=e}return e.prototype.next=function(){return Promise.resolve(this.proxy.next().value)},e}(),Nr=function(){function e(e){this.proxy=e}return e.prototype.first=function(){return this.proxy.first()},e.prototype.asArray=function(){return this.proxy.asArray()},e.prototype.iterator=function(){return this.proxy.iterator().then(function(e){return new br(e)})},e}(),Br=function(){function e(e){this.proxy=e,this.namespace=this.proxy.namespace}return e.prototype.withCollectionType=function(t){return new e(this.proxy.withCollectionType(t))},e.prototype.count=function(e,t){return this.proxy.count(e,t)},e.prototype.find=function(e,t){return new Nr(this.proxy.find(e,t))},e.prototype.aggregate=function(e){return new Nr(this.proxy.aggregate(e))},e.prototype.insertOne=function(e){return this.proxy.insertOne(e)},e.prototype.insertMany=function(e){return this.proxy.insertMany(e)},e.prototype.deleteOne=function(e){return this.proxy.deleteOne(e)},e.prototype.deleteMany=function(e){return this.proxy.deleteMany(e)},e.prototype.updateOne=function(e,t,r){return this.proxy.updateOne(e,t,r)},e.prototype.updateMany=function(e,t,r){return this.proxy.updateMany(e,t,r)},e}(),Or=function(){function e(e){this.proxy=e,this.name=this.proxy.name}return e.prototype.collection=function(e,t){return new Br(this.proxy.collection(e,t))},e}(),mr=function(){function e(e){this.proxy=e}return e.prototype.db=function(e){return new Or(this.proxy.db(e))},e}();(ar||(ar={})).factory=new(function(){function e(){}return e.prototype.getNamedClient=function(e,t){return new mr(new gr(e))},e}())}]);